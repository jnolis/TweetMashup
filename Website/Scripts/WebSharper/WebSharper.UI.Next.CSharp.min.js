(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;a=self;b=a.WebSharper=a.WebSharper||{};c=b.UI=b.UI||{};d=c.Next=c.Next||{};e=d.CSharp=d.CSharp||{};f=e.ViewExtensions=e.ViewExtensions||{};g=e.DocExtension=e.DocExtension||{};h=e.Client=e.Client||{};i=h.Helpers=h.Helpers||{};j=b&&b.Obj;k=h.RouteMapBuilder=h.RouteMapBuilder||{};l=h.RouteItemParsers=h.RouteItemParsers||{};m=d&&d.View;n=d&&d.Doc;o=d&&d.Var;p=b&&b.List;q=a.IntelliFactory;r=q&&q.Runtime;s=d&&d.RouteMap;t=b&&b.Seq;u=b&&b.Unchecked;v=b&&b.Arrays;w=b&&b.Collections;x=w&&w.Map;y=b&&b.Nullable;z=b&&b.Operators;A=w&&w.FSharpMap;B=b&&b.Option;f.UpdateWhile=function(C,D,E){return m.UpdateWhile(D,E,C);};g.DocSeqCached=function(C,D,E){return n.ConvertSeqBy(D,function(F){return function(G){return E(F,G);};},C);};i.seqRefToListRef=function(C){return o.Lens(C,p.ofSeq,function(D,E){return E;});};k=h.RouteMapBuilder=r.Class({Install:function(){var C,D;function E(F,G){return F(function(H){return o.Set(C,H);},G);}C=s.Install(this.ToRouteMap());D=p.map(function(F){return function(G){return E(F,G);};},p.rev(this.renders));return n.BindView(function(F){return t.pick(function(G){return G(F);},D);},C.v);},ToRouteMap:function(){var C,D;C=p.rev(this.links);D=p.rev(this.routes);return s.CreateWithQuery(function(E){return t.pick(function(F){return F(E);},C);},function(E){return t.pick(function(F){return F(E);},D);});},AddRender:function(C){this.renders=new p.T({$:1,$0:C,$1:this.renders});},AddLink:function(C){this.links=new p.T({$:1,$0:C,$1:this.links});},AddRoute:function(C){this.routes=new p.T({$:1,$0:C,$1:this.routes});}},j,k);k.New=r.Ctor(function(){j.New.call(this);this.links=p.T.Empty;this.routes=p.T.Empty;this.renders=p.T.Empty;},k);l["System.Double"]=function(C){var D,E;D=C[0];return D.$==1?(E=(new a.RegExp("^[0-9](?:\\.[0-9]*)?$")).exec(D.$0),u.Equals(E,null)?null:{$:1,$0:[a.parseFloat(v.get(E,0)),D.$1]}):null;};l["System.Int32"]=function(C){var D,E;D=C[0];return D.$==1?(E=(new a.RegExp("^[0-9]+$")).exec(D.$0),u.Equals(E,null)?null:{$:1,$0:[a.parseInt(v.get(E,0),a.$radix),D.$1]}):null;};l["System.String"]=function(C){var D;D=C[0];return D.$==1?{$:1,$0:[D.$0,D.$1]}:null;};l.MakeLink=function(C){return function(D){var E,F;function G(J,K,L,M){var N,O,P,Q,R,S;return K===0?(N=M(D[J]),(E[0]=x.FoldBack(function(T,U,V){return V.Add(T,U);},N[1],E[0]),N[0])):K===1?(E[0]=(O=p.head((M(D[J]))[0]),E[0].Add(J,O)),p.T.Empty):K===2?(P=D[J],P!=null&&P.$==1?E[0]=(Q=p.head((M(P.$0))[0]),E[0].Add(J,Q)):void 0,p.T.Empty):K===3?(R=D[J],(R!=null?E[0]=(S=p.head((M(y.get(R)))[0]),E[0].Add(J,S)):void 0,p.T.Empty)):z.FailWith("invalid QueryItem enum value");}function H(J){return J[0];}function I(J,K){return function(L){return(K(L))[0];};}return C.$==1?(E=[new A.New([])],[p.append(B.toList(C.$1),p.ofSeq(t.collect(function(J){return G(J[0],J[1],J[2],J[3]);},C.$2))),E[0]]):C.$==2?[new p.T({$:1,$0:a.String(t.length(D)),$1:p.ofSeq(t.collect((F=C.$2,function(J){return H(F(J));}),D))}),new A.New([])]:C.$==3?[p.ofSeq(t.concat((((r.Curried3(t.map2))(function(J,K){return(function(L){return I(L[0],L[1]);}(J))(K);}))(C.$0))(D))),new A.New([])]:[p.ofArray([a.String(D)]),new A.New([])];};};l.ParseRoute=function(C){var D,E;function F(G,H){return H.$==0?{$:1,$0:G}:null;}D=l.ParseShape(C);E=function(G){var H;return G==null?null:(H=G.$0,F(H[0],H[1]));};return function(G){return E(D(G));};};l.ParseShape=function(C){return function(D){var E,F,G,H,I,J,K,L,M,N,O,P;function Q(S,T,U){var V,W;function X(Y,Z){var _0,_1,_2,_3,_4,_5,_6,_7,_8,_9;_0=Z[0];_1=Z[1];_2=Z[2];return Y!=null&&Y.$==1?(_3=Y.$0,_1===0?(_4=_2([_3,F]),_4!=null&&_4.$==1?(V[_0]=_4.$0[0],{$:1,$0:_4.$0[1]}):null):_1===1?(_5=x.TryFind(_0,F),_5==null?null:(V[_0]=_5.$0,{$:1,$0:_3})):_1===2?(_6=x.TryFind(_0,F),_6!=null&&_6.$==1?(_7=_2([p.ofArray([_6.$0]),new A.New([])]),_7!=null&&_7.$==1?(V[_0]={$:1,$0:_7.$0[0]},{$:1,$0:_3}):null):(V[_0]=null,{$:1,$0:_3})):_1===3?(_8=x.TryFind(_0,F),_8!=null&&_8.$==1?(_9=_2([p.ofArray([_8.$0]),new A.New([])]),_9!=null&&_9.$==1?(V[_0]=_9.$0[0],{$:1,$0:_3}):null):(V[_0]=null,{$:1,$0:_3})):z.FailWith("invalid QueryItem enum value")):null;}V=S();W=(((r.Curried3(v.fold))(X))({$:1,$0:T}))(U);return W==null?null:{$:1,$0:[V,W.$0]};}function R(S,T){var U,V,W,X;return S==null?null:(U=T[0]([S.$0,F]),U==null?null:{$:1,$0:(V=U.$0,(W=V[0],(X=V[1],(O.push(W),X))))});}E=D[0];F=D[1];return C.$==1?C.$1==null?Q(C.$0,E,C.$2):E.$==1&&(E.$0===C.$1.$0&&(G=[E.$1,E.$0],true))?Q(C.$0,G[0],C.$2):null:C.$==2?(H=C.$0,(I=C.$1,(J=l["System.Int32"]([E,F]),J==null?null:(K=J.$0,(L=K[0],(M=K[1],(N=v.create(L,null),function(S,T){var U;while(true)if(S===L)return{$:1,$0:[H(N),T]};else{U=I([T,F]);if(U!=null&&U.$==1){v.set(N,S,U.$0[0]);S=S+1;T=U.$0[1];}else return null;}}(0,M)))))))):C.$==3?(O=[],(P=(((r.Curried3(v.fold))(R))({$:1,$0:E}))(C.$0),P==null?null:{$:1,$0:[O,P.$0]})):C.$0([E,F]);};};}());
