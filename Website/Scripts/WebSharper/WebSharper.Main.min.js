(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI;a=self;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JS=c.JS||{};e=a.Error;f=c.NonStandardPromiseRejectionException=c.NonStandardPromiseRejectionException||{};g=c.Promise=c.Promise||{};h=c.Pervasives=c.Pervasives||{};i=b.Json=b.Json||{};j=b.Obj=b.Obj||{};k=b.Remoting=b.Remoting||{};l=k.XhrProvider=k.XhrProvider||{};m=k.AjaxRemotingProvider=k.AjaxRemotingProvider||{};n=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};o=b.HtmlContentExtensions=b.HtmlContentExtensions||{};p=o.SingleNode=o.SingleNode||{};q=b.Activator=b.Activator||{};r=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};s=b.Collections=b.Collections||{};t=s.EqualityComparer=s.EqualityComparer||{};u=b.Comparers=b.Comparers||{};v=u.EquatableEqualityComparer=u.EquatableEqualityComparer||{};w=u.BaseEqualityComparer=u.BaseEqualityComparer||{};x=s.Comparer=s.Comparer||{};y=u.ComparableComparer=u.ComparableComparer||{};z=u.BaseComparer=u.BaseComparer||{};A=b.Operators=b.Operators||{};B=b.Nullable=b.Nullable||{};C=b.Utils=b.Utils||{};D=b.Concurrency=b.Concurrency||{};E=D.CT=D.CT||{};F=D.AsyncBody=D.AsyncBody||{};G=D.Scheduler=D.Scheduler||{};H=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};I=b.Enumerator=b.Enumerator||{};J=I.T=I.T||{};K=c.Optional=c.Optional||{};L=b.Arrays=b.Arrays||{};M=b.Seq=b.Seq||{};N=b.List=b.List||{};O=b.Arrays2D=b.Arrays2D||{};P=b.CancellationTokenSource=b.CancellationTokenSource||{};Q=b.Char=b.Char||{};R=b.Util=b.Util||{};S=b.DateUtil=b.DateUtil||{};T=b.DateTimeOffset=b.DateTimeOffset||{};U=b.Delegate=b.Delegate||{};V=s.DictionaryUtil=s.DictionaryUtil||{};W=s.KeyCollection=s.KeyCollection||{};X=s.ValueCollection=s.ValueCollection||{};Y=s.Dictionary=s.Dictionary||{};Z=b.Exception=b.Exception||{};_0=b.MatchFailureException=b.MatchFailureException||{};_1=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};_2=b.OperationCanceledException=b.OperationCanceledException||{};_3=b.ArgumentException=b.ArgumentException||{};_4=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_5=b.ArgumentNullException=b.ArgumentNullException||{};_6=b.InvalidOperationException=b.InvalidOperationException||{};_7=b.AggregateException=b.AggregateException||{};_8=b.TimeoutException=b.TimeoutException||{};_9=b.FormatException=b.FormatException||{};_=b.OverflowException=b.OverflowException||{};$=b.TaskCanceledException=b.TaskCanceledException||{};ba=a.System=a.System||{};bb=ba.Guid=ba.Guid||{};bc=s.HashSetUtil=s.HashSetUtil||{};bd=s.HashSet=s.HashSet||{};be=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bf=be.LazyRecord=be.LazyRecord||{};bg=b.Lazy=b.Lazy||{};bh=N.T=N.T||{};bi=b.Slice=b.Slice||{};bj=b.Option=b.Option||{};bk=b.Queue=b.Queue||{};bl=b.Random=b.Random||{};bm=b.Ref=b.Ref||{};bn=b.Result=b.Result||{};bo=b.Control=b.Control||{};bp=b.Stack=b.Stack||{};bq=b.Strings=b.Strings||{};br=b.Task=b.Task||{};bs=b.Task1=b.Task1||{};bt=b.TaskCompletionSource=b.TaskCompletionSource||{};bu=b.Unchecked=b.Unchecked||{};bv=a.Microsoft=a.Microsoft||{};bw=bv.FSharp=bv.FSharp||{};bx=bw.Core=bw.Core||{};by=bx.FSharpValueOption=bx.FSharpValueOption||{};bz=b.ValueOption=b.ValueOption||{};bA=b.Numeric=b.Numeric||{};bB=a.IntelliFactory;bC=bB&&bB.Runtime;bD=a.Promise;bE=a.JSON;bF=a.String;bG=a.Date;bH=a.console;bI=a.Math;d.GetFieldValues=function(bJ){var bK,bL;bK=[];for(var bM in bJ)bK.push(bJ[bM]);return bK;};d.GetFieldNames=function(bJ){var bK,bL;bK=[];for(var bM in bJ)bK.push(bM);return bK;};d.GetFields=function(bJ){var bK,bL;bK=[];for(var bM in bJ)bK.push([bM,bJ[bM]]);return bK;};f=c.NonStandardPromiseRejectionException=bC.Class({get_Reason:function(){return this.reason;}},e,f);f.New=bC.Ctor(function(bJ){this.message="Promise rejected";a.Object.setPrototypeOf(this,f.prototype);this.reason=bJ;},f);g.For=function(bJ,bK){var bL;function bM(){return bL.MoveNext()?bK(bL.Current()).then(function(){return bM();}):bD.resolve(null);}bL=I.Get(bJ);return new bD(function(bN){bM();bN();})["finally"](function(){return bL.Dispose();});};g.AsTask=function(bJ){var bK;bK=new bt.New();bJ.then(function(bL){return bK.SetResult(bL);},function(bL){return bK.SetException$1(g.unwrapExn(bL));});return bK.get_Task();};g.AsAsync=function(bJ){return D.FromContinuations(function(bK,bL){bJ.then(bK,function(bM){return bL(g.unwrapExn(bM));});});};g.OfTask=function(bJ){return new bD(function(bK,bL){bJ.ContinueWith$1(function(bM){return bM.get_IsCanceled()?bL(new $.New()):bM.get_IsFaulted()?bL(bM.get_Exception()):bK(bM.get_Result());},D.noneCT());});};g.OfAsync=function(bJ){return new bD(function(bK,bL){D.StartWithContinuations(bJ,bK,function(bM){bL(bM);},function(bM){bL(bM);},null);});};g.unwrapExn=function(bJ){return bJ instanceof e?bJ:new f.New(bJ);};h.GetJS=function(bJ,bK){var bL,bM;bL=bJ;bM=I.Get(bK);try{while(bM.MoveNext())bL=bL[bM.Current()];}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}return bL;};h.NewFromSeq=function(bJ){var bK,bL,bM;bK={};bL=I.Get(bJ);try{while(bL.MoveNext()){bM=bL.Current();bK[bM[0]]=bM[1];}}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}return bK;};i.Activate=function(bJ){var bK,bM,bN,bO,bP,bQ,bR;function bL(bS){var bT,bU,bV,bW,bX;if(bu.Equals(bS,null))return bS;else if(typeof bS=="object"){if(bS instanceof a.Array)return i.shallowMap(bL,bS);else{bT=i.shallowMap(bL,bS.$V);bU=bS.$T;if(bU===void 0)return bT;else{bV=L.get(bM,bU);if(bV===1)return N.ofArray(bT);else if(bV===2)return self.WebSharper.Decimal.CreateDecimalBits(bT);else{bW=new(L.get(bM,bU))();for(var bY in bT)if(function(bZ){bW[bZ]=bT[bZ];return false;}(bY))break;return bW;}}}}else return bS;}bM=bJ?bJ.$TYPES:void 0;if(bM===void 0)bK=bJ;else{for(bN=0,bO=L.length(bM)-1;bN<=bO;bN++){bR=L.get(bM,bN);switch(!bu.Equals(bR,null)&&bR.length===3?L.get(bR,0)==="WebSharper"?L.get(bR,1)==="List"?L.get(bR,2)==="T"?0:(bQ=bR,2):(bQ=bR,2):(bQ=bR,2):!bu.Equals(bR,null)&&bR.length===2?L.get(bR,0)==="WebSharper"?L.get(bR,1)==="Decimal"?1:(bQ=bR,2):(bQ=bR,2):(bQ=bR,2)){case 0:bP=1;break;case 1:bP=2;break;case 2:bP=i.lookup(bQ);break;}L.set(bM,bN,bP);}bK=bJ.$DATA;}return bL(bK);};i.shallowMap=function(bJ,bK){var bL,bM;if(bK instanceof a.Array)return L.map(bJ,bK);else if(typeof bK=="object"){bL={};for(var bN in bK)if(function(bO){bL[bO]=bJ(bK[bO]);return false;}(bN))break;return bL;}else return bK;};i.lookup=function(bJ){var bK,bL,bM,bN,bO;bM=L.length(bJ);bK=self;bL=0;while(bL<bM){bN=L.get(bJ,bL);bO=bK[bN];!bu.Equals(typeof bO,void 0)?(bK=bO,bL=bL+1):A.FailWith("Invalid server reply. Failed to find type: "+bN);}return bK;};j=b.Obj=bC.Class({Equals:function(bJ){return this===bJ;},GetHashCode:function(){return -1;}},null,j);j.New=bC.Ctor(function(){},j);l=k.XhrProvider=bC.Class({Sync:function(bJ,bK,bL){var bM;bM=[null];k.ajax(false,bJ,bK,bL,function(bN){bM[0]=bN;},function(bN){throw bN;},function(){k.ajax(false,bJ,bK,bL,function(bN){bM[0]=bN;},function(bN){throw bN;},void 0);});return bM[0];},Async:function(bJ,bK,bL,bM,bN){k.ajax(true,bJ,bK,bL,bM,bN,function(){k.ajax(true,bJ,bK,bL,bM,bN,void 0);});}},j,l);l.New=bC.Ctor(function(){j.New.call(this);},l);m=k.AjaxRemotingProvider=bC.Class({get_EndPoint:function(){return k.EndPoint();},AsyncBase:function(bJ,bK){var bL,bM;bL=this;bM=null;return D.Delay(function(){var bN,bO;bN=k.makeHeaders(bJ);bO=k.makePayload(bK);return D.Bind(D.GetCT(),function(bP){return D.FromContinuations(function(bQ,bR,bS){var bT,bU,bV;function bW(bX){return bT[0]?(bT[0]=false,bS(new _2.New(bP))):null;}bT=[true];bU=D.Register(bP,function(){bW();});bV=bL.get_EndPoint();return k.AjaxProvider().Async(bV,bN,bO,function(bX){if(bT[0]){bT[0]=false;bU.Dispose();bQ(i.Activate(bE.parse(bX)));}},function(bX){if(bT[0]){bT[0]=false;bU.Dispose();bR(bX);}});});});});},Send:function(bJ,bK){D.Start(this.AsyncBase(bJ,bK),null);},Task:function(bJ,bK){return D.StartAsTask(this.AsyncBase(bJ,bK),null);},Async:function(bJ,bK){return this.AsyncBase(bJ,bK);},Sync:function(bJ,bK){var bL,bM,bN;return i.Activate(bE.parse((bL=this.get_EndPoint(),(bM=k.makeHeaders(bJ),(bN=k.makePayload(bK),k.AjaxProvider().Sync(bL,bM,bN))))));}},j,m);m.New=bC.Ctor(function(){j.New.call(this);},m);k.ajax=function(bJ,bK,bL,bM,bN,bO,bP){var bQ,bR,bS;bQ=new a.XMLHttpRequest();bR=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bQ.open("POST",bK,bJ);if(bJ==true)bQ.withCredentials=true;for(var bU in bL)bQ.setRequestHeader(bU,bL[bU]);if(bR)bQ.setRequestHeader("x-csrftoken",bR);function bT(){var bV;if(bQ.status==200)bN(bQ.responseText);else if(bP&&bQ.status==403&&bQ.responseText=="CSRF")bP();else{bV="Response status is not 200: ";bO(new e(bV+bQ.status));}}if("onload"in bQ)bQ.onload=bQ.onerror=bQ.onabort=bT;else bQ.onreadystatechange=function(){if(bQ.readyState==4)bT();};bQ.send(bM);};k.makePayload=function(bJ){return bE.stringify(bJ);};k.makeHeaders=function(bJ){return{"content-type":"application/json","x-websharper-rpc":bJ};};k.AjaxProvider=function(){n.$cctor();return n.AjaxProvider;};k.set_AjaxProvider=function(bJ){n.$cctor();n.AjaxProvider=bJ;};k.UseHttps=function(){try{return!bq.StartsWith(self.location.href,"https://")&&(k.set_EndPoint(bq.Replace(self.location.href,"http://","https://")),true);}catch(bJ){return false;}};k.EndPoint=function(){n.$cctor();return n.EndPoint;};k.set_EndPoint=function(bJ){n.$cctor();n.EndPoint=bJ;};n.$cctor=function(){n.$cctor=a.ignore;n.EndPoint="?";n.AjaxProvider=new l.New();};p=o.SingleNode=bC.Class({ReplaceInDom:function(bJ){this.node.parentNode.replaceChild(this.node,bJ);}},j,p);p.New=bC.Ctor(function(bJ){j.New.call(this);this.node=bJ;},p);q.Activate=function(){var bJ;if(self.document){bJ=self.document.getElementById("websharper-data");bJ?q.onReady(function(){var bK,bL;function bM(bP,bQ){if(typeof bQ=="object"&&"$init"in bQ)bQ.$preinit(bP);}function bN(bP,bQ){if(typeof bQ=="object"&&"Body"in bQ)bQ.Body().ReplaceInDom(self.document.getElementById(bP));else if(typeof bQ=="object"&&"$init"in bQ)bQ.$init(bP);}function bO(bP,bQ){if(typeof bQ=="object"&&"$init"in bQ)bQ.$postinit(bP);}bK=i.Activate(bE.parse(bJ.getAttribute("content")));q.set_Instances(bK);bL=d.GetFields(bK);L.iter(function(bP){return bM(bP[0],bP[1]);},bL);L.iter(function(bP){return bN(bP[0],bP[1]);},bL);L.iter(function(bP){return bO(bP[0],bP[1]);},bL);}):void 0;}};q.onReady=function(bJ){var bK;function bL(){if(!bK){bK=true;bJ();self.document.removeEventListener("DOMContentLoaded",bL,false);self.removeEventListener("load",bL,false);}}bK=false;self.document.readyState==="complete"?bL():(self.document.addEventListener("DOMContentLoaded",bL,false),self.addEventListener("load",bL,false));};q.Instances=function(){r.$cctor();return r.Instances;};q.set_Instances=function(bJ){r.$cctor();r.Instances=bJ;};q.META_ID=function(){r.$cctor();return r.META_ID;};r.$cctor=function(){r.$cctor=a.ignore;r.META_ID="websharper-data";r.Instances=null;};t=s.EqualityComparer=bC.Class({CGetHashCode0:function(bJ){return this.GetHashCode$1(bJ);},CEquals0:function(bJ,bK){return this.Equals$1(bJ,bK);},CGetHashCode:function(bJ){return this.GetHashCode$1(bJ);},CEquals:function(bJ,bK){return this.Equals$1(bJ,bK);}},j,t);t.New=bC.Ctor(function(){j.New.call(this);},t);v=u.EquatableEqualityComparer=bC.Class({GetHashCode$1:function(bJ){return bu.Hash(bJ);},Equals$1:function(bJ,bK){return bJ.EEquals(bK);}},t,v);v.New=bC.Ctor(function(){t.New.call(this);},v);w=u.BaseEqualityComparer=bC.Class({GetHashCode$1:function(bJ){return bu.Hash(bJ);},Equals$1:function(bJ,bK){return bu.Equals(bJ,bK);}},t,w);w.New=bC.Ctor(function(){t.New.call(this);},w);x=s.Comparer=bC.Class({Compare0:function(bJ,bK){return this.Compare$1(bJ,bK);},Compare:function(bJ,bK){return this.Compare$1(bJ,bK);}},j,x);x.New=bC.Ctor(function(){j.New.call(this);},x);y=u.ComparableComparer=bC.Class({Compare$1:function(bJ,bK){return bJ.CompareTo(bK);}},x,y);y.New=bC.Ctor(function(){x.New.call(this);},y);z=u.BaseComparer=bC.Class({Compare$1:function(bJ,bK){return bu.Compare(bJ,bK);}},x,z);z.New=bC.Ctor(function(){x.New.call(this);},z);A.charRange=function(bJ,bK){var bL,bM;bL=bJ.charCodeAt();bM=1+bK.charCodeAt()-bL;return bM<=0?[]:M.init(bM,function(bN){return bF.fromCharCode(bN+bL);});};B.op=function(bJ,bK,bL){return bJ==null||bK==null?null:bL(bJ,bK);};B.opL=function(bJ,bK,bL){return bJ==null?null:bL(bJ,bK);};B.opR=function(bJ,bK,bL){return bK==null?null:bL(bJ,bK);};B.cmp=function(bJ,bK,bL){return bJ==null||bK==null?false:bL(bJ,bK);};B.cmpE=function(bJ,bK,bL){return bJ==null?bK==null:bK==null?false:bL(bJ,bK);};B.cmpL=function(bJ,bK,bL){return bJ==null?false:bL(bJ,bK);};B.cmpR=function(bJ,bK,bL){return bK==null?false:bL(bJ,bK);};B.conv=function(bJ,bK){return bJ==null?null:bK(bJ);};C.prettyPrint=function(bJ){var bK,bL;function bM(bN,bO){return bN+" = "+C.prettyPrint(bO);}return bJ===null?"null":(bK=typeof bJ,bK=="string"?"\""+bJ+"\"":bK=="object"?bJ instanceof a.Array?"[|"+bq.concat("; ",L.map(C.prettyPrint,bJ))+"|]":(bL=bF(bJ),bL==="[object Object]"?"{"+bq.concat("; ",L.map(function(bN){return bM(bN[0],bN[1]);},d.GetFields(bJ)))+"}":bL):bF(bJ));};C.printArray2D=function(bJ,bK){return bK===null?"null":"[["+bq.concat("][",M.delay(function(){var bL;bL=bK.length?bK[0].length:0;return M.map(function(bM){return bq.concat("; ",M.delay(function(){return M.map(function(bN){return bJ(L.get2D(bK,bM,bN));},A.range(0,bL-1));}));},A.range(0,bK.length-1));}))+"]]";};C.printArray=function(bJ,bK){return bK===null?"null":"[|"+bq.concat("; ",L.map(bJ,bK))+"|]";};C.printList=function(bJ,bK){return"["+bq.concat("; ",M.map(bJ,bK))+"]";};C.padNumLeft=function(bJ,bK){var bL;bL=L.get(bJ,0);return bL===" "||bL==="+"||bL==="-"?bL+bq.PadLeftWith(bJ.substr(1),bK-1,"0"):bq.PadLeftWith(bJ,bK,"0");};C.spaceForPos=function(bJ,bK){return 0<=bJ?" "+bK:bK;};C.plusForPos=function(bJ,bK){return 0<=bJ?"+"+bK:bK;};C.toSafe=function(bJ){return bJ==null?"":bJ;};E.New=function(bJ,bK){return{c:bJ,r:bK};};F.New=function(bJ,bK){return{k:bJ,ct:bK};};G=D.Scheduler=bC.Class({tick:function(){var bJ,bK,bL;bK=this;bL=bG.now();bJ=true;while(bJ)if(this.robin.length===0){this.idle=true;bJ=false;}else{(this.robin.shift())();bG.now()-bL>40?(a.setTimeout(function(){bK.tick();},0),bJ=false):void 0;}},Fork:function(bJ){var bK;bK=this;this.robin.push(bJ);this.idle?(this.idle=false,a.setTimeout(function(){bK.tick();},0)):void 0;}},j,G);G.New=bC.Ctor(function(){j.New.call(this);this.idle=true;this.robin=[];},G);D.For=function(bJ,bK){return D.Using(I.Get(bJ),function(bL){return D.While(function(){return bL.MoveNext();},D.Delay(function(){return bK(bL.Current());}));});};D.While=function(bJ,bK){return bJ()?D.Bind(bK,function(){return D.While(bJ,bK);}):D.Return();};D.Using=function(bJ,bK){return D.TryFinally(bK(bJ),function(){bJ.Dispose();});};D.TryCancelled=function(bJ,bK){return function(bL){bJ(F.New(function(bM){if(bM.$==2){bK(bM.$0);bL.k(bM);}else bL.k(bM);},bL.ct));};};D.OnCancel=function(bJ){return function(bK){bK.k({$:0,$0:D.Register(bK.ct,bJ)});};};D.StartChildAsTask=function(bJ){return function(bK){(D.StartChild(bJ,null))(F.New(function(bL){if(bL.$==0)bK.k({$:0,$0:D.StartImmediateAsTask(bL.$0,{$:1,$0:bK.ct})});},bK.ct));};};D.StartChild=function(bJ,bK){return function(bL){var bM,bN,bO,bP;bM=[true];bN=[null];bO=[];bP=bK!=null&&bK.$==1?{$:1,$0:a.setTimeout(function(){var bQ;bM[0]=false;bQ={$:1,$0:new _8.New()};while(bO.length>0)(bO.shift())(bQ);},bK.$0)}:null;D.scheduler().Fork(function(){if(!bL.ct.c)bJ(F.New(function(bQ){if(bM[0]){bN[0]={$:1,$0:bQ};bP!=null&&bP.$==1?a.clearTimeout(bP.$0):void 0;while(bO.length>0)(bO.shift())(bQ);}},bL.ct));});bL.k({$:0,$0:function(bQ){var bR;if(bM[0]){bR=bN[0];bR==null?bO.push(bQ.k):bQ.k(bR.$0);}else bQ.k({$:1,$0:new _8.New()});}});};};D.Parallel=function(bJ){var bK;bK=L.ofSeq(bJ);return L.length(bK)===0?D.Return([]):function(bL){var bM,bN,bO;function bP(bQ,bR){var bS,bT;bT=bN[0];switch(bT===0?0:bT===1?bR.$==0?1:(bS=[bT,bR],3):bR.$==0?2:(bS=[bT,bR],3)){case 0:return null;case 1:L.set(bO,bQ,bR.$0);bN[0]=0;return bL.k({$:0,$0:bO});case 2:L.set(bO,bQ,bR.$0);{bN[0]=bT-1;return;}break;case 3:bN[0]=0;return bL.k(bS[1]);}}bM=bK.length;bN=[bM];bO=new a.Array(bM);L.iteri(function(bQ,bR){return D.scheduler().Fork(function(){bR(F.New(function(bS){return bP(bQ,bS);},bL.ct));});},bK);};};D.Sleep=function(bJ){return function(bK){var bL,bM;bL=void 0;bM=void 0;bL=a.setTimeout(function(){bM.Dispose();D.scheduler().Fork(function(){bK.k({$:0,$0:null});});},bJ);bM=D.Register(bK.ct,function(){a.clearTimeout(bL);D.scheduler().Fork(function(){D.cancel(bK);});});};};D.StartImmediateAsTask=function(bJ,bK){var bL;bL=new bt.New();D.StartWithContinuations(bJ,function(bM){bL.SetResult(bM);},function(bM){bL.SetException$1(bM);},function(){bL.SetCanceled();},bK);return bL.get_Task();};D.StartAsTask=function(bJ,bK){var bL;bL=new bt.New();D.scheduler().Fork(function(){D.StartWithContinuations(bJ,function(bM){bL.SetResult(bM);},function(bM){bL.SetException$1(bM);},function(){bL.SetCanceled();},bK);});return bL.get_Task();};D.AwaitTask1=function(bJ){return D.FromContinuations(function(bK,bL,bM){bJ.get_Status()===0?bJ.Start():void 0;bJ.ContinueWith$1(function(bN){return bN.get_IsCanceled()?bM(new _2.New(D.noneCT())):bN.get_IsFaulted()?bL(bN.get_Exception()):bK(bN.get_Result());},D.noneCT());});};D.AwaitTask=function(bJ){return D.FromContinuations(function(bK,bL,bM){bJ.get_Status()===0?bJ.Start():void 0;bJ.ContinueWith$1(function(bN){return bN.get_IsCanceled()?bM(new _2.New(D.noneCT())):bN.get_IsFaulted()?bL(bN.get_Exception()):bK();},D.noneCT());});};D.AwaitEvent=function(bJ,bK){return function(bL){var bM,bN;bM=void 0;bN=void 0;bM=bJ.Subscribe(R.observer(function(bO){bM.Dispose();bN.Dispose();D.scheduler().Fork(function(){bL.k({$:0,$0:bO});});}));bN=D.Register(bL.ct,function(){if(bK!=null&&bK.$==1)bK.$0();else{bM.Dispose();D.scheduler().Fork(function(){D.cancel(bL);});}});};};D.StartImmediate=function(bJ,bK){var bL,bM;bL=(bM=(D.defCTS())[0],bK==null?bM:bK.$0);!bL.c?bJ(F.New(function(bN){if(bN.$==1)D.UncaughtAsyncError(bN.$0);},bL)):void 0;};D.Start=function(bJ,bK){var bL,bM;bL=(bM=(D.defCTS())[0],bK==null?bM:bK.$0);D.scheduler().Fork(function(){if(!bL.c)bJ(F.New(function(bN){if(bN.$==1)D.UncaughtAsyncError(bN.$0);},bL));});};D.UncaughtAsyncError=function(bJ){bH.log("WebSharper: Uncaught asynchronous exception",bJ);};D.StartWithContinuations=function(bJ,bK,bL,bM,bN){var bO,bP;bO=(bP=(D.defCTS())[0],bN==null?bP:bN.$0);!bO.c?bJ(F.New(function(bQ){if(bQ.$==1)bL(bQ.$0);else if(bQ.$==2)bM(bQ.$0);else bK(bQ.$0);},bO)):void 0;};D.FromContinuations=function(bJ){return function(bK){var bL;function bM(bN){if(bL[0])A.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bL[0]=true;D.scheduler().Fork(bN);}}bL=[false];bJ(function(bN){bM(function(){bK.k({$:0,$0:bN});});},function(bN){bM(function(){bK.k({$:1,$0:bN});});},function(bN){bM(function(){bK.k({$:2,$0:bN});});});};};D.GetCT=function(){H.$cctor();return H.GetCT;};D.Catch=function(bJ){return function(bK){try{bJ(F.New(function(bL){if(bL.$==0)bK.k({$:0,$0:{$:0,$0:bL.$0}});else if(bL.$==1)bK.k({$:0,$0:{$:1,$0:bL.$0}});else bK.k(bL);},bK.ct));}catch(bL){bK.k({$:0,$0:{$:1,$0:bL}});}};};D.TryWith=function(bJ,bK){return function(bL){bJ(F.New(function(bM){if(bM.$==0)bL.k({$:0,$0:bM.$0});else if(bM.$==1)try{(bK(bM.$0))(bL);}catch(bN){bL.k(bM);}else bL.k(bM);},bL.ct));};};D.TryFinally=function(bJ,bK){return function(bL){bJ(F.New(function(bM){try{bK();bL.k(bM);}catch(bN){bL.k({$:1,$0:bN});}},bL.ct));};};D.Delay=function(bJ){return function(bK){try{(bJ(null))(bK);}catch(bL){bK.k({$:1,$0:bL});}};};D.Combine=function(bJ,bK){return D.Bind(bJ,function(){return bK;});};D.Bind=function(bJ,bK){return D.checkCancel(function(bL){bJ(F.New(function(bM){var bN;if(bM.$==0){bN=bM.$0;D.scheduler().Fork(function(){try{(bK(bN))(bL);}catch(bO){bL.k({$:1,$0:bO});}});}else D.scheduler().Fork(function(){bL.k(bM);});},bL.ct));});};D.Zero=function(){H.$cctor();return H.Zero;};D.Return=function(bJ){return function(bK){bK.k({$:0,$0:bJ});};};D.checkCancel=function(bJ){return function(bK){if(bK.ct.c)D.cancel(bK);else bJ(bK);};};D.cancel=function(bJ){bJ.k({$:2,$0:new _2.New(bJ.ct)});};D.defCTS=function(){H.$cctor();return H.defCTS;};D.scheduler=function(){H.$cctor();return H.scheduler;};D.Register=function(bJ,bK){var bL;return bJ===D.noneCT()?{Dispose:function(){return null;}}:(bL=bJ.r.push(bK)-1,{Dispose:function(){return L.set(bJ.r,bL,a.ignore);}});};D.noneCT=function(){H.$cctor();return H.noneCT;};H.$cctor=function(){H.$cctor=a.ignore;H.noneCT=E.New(false,[]);H.scheduler=new G.New();H.defCTS=[new P.New()];H.Zero=D.Return();H.GetCT=function(bJ){bJ.k({$:0,$0:bJ.ct});};};J=I.T=bC.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},j,J);J.New=bC.Ctor(function(bJ,bK,bL,bM){j.New.call(this);this.s=bJ;this.c=bK;this.n=bL;this.d=bM;},J);I.Get0=function(bJ){return bJ instanceof a.Array?I.ArrayEnumerator(bJ):bu.Equals(typeof bJ,"string")?I.StringEnumerator(bJ):"GetEnumerator0"in bJ?bJ.GetEnumerator0():bJ.GetEnumerator();};I.Get=function(bJ){return bJ instanceof a.Array?I.ArrayEnumerator(bJ):bu.Equals(typeof bJ,"string")?I.StringEnumerator(bJ):bJ.GetEnumerator();};I.StringEnumerator=function(bJ){return new J.New(0,null,function(bK){var bL;bL=bK.s;return bL<bJ.length&&(bK.c=bJ[bL],bK.s=bL+1,true);},void 0);};I.ArrayEnumerator=function(bJ){return new J.New(0,null,function(bK){var bL;bL=bK.s;return bL<L.length(bJ)&&(bK.c=L.get(bJ,bL),bK.s=bL+1,true);},void 0);};K.Undefined={$:0};L.splitInto=function(bJ,bK){var bL,bM,bN,bO,bP,bQ,bR,bS,bT;if(bJ<=0)A.FailWith("Count must be positive");bM=L.length(bK);if(bM===0)return[];else{bN=bu.Compare(bJ,bM)===-1?bJ:bM;bO=L.create(bN,null);bP=bM/bN>>0;bL=0;for(bQ=0,bR=bM%bN-1;bQ<=bR;bQ++){bO[bQ]=L.sub(bK,bL,bP+1);bL=bL+bP+1;}for(bS=bM%bN,bT=bN-1;bS<=bT;bS++){bO[bS]=L.sub(bK,bL,bP);bL=bL+bP;}return bO;}};L.contains=function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=L.length(bK);while(bL&&bM<bO)if(bu.Equals(bK[bM],bJ))bL=false;else bM=bM+1;return!bL;};L.tryFindBack=function(bJ,bK){var bL,bM,bN;bL=null;bM=bK.length-1;while(bM>=0&&bL==null){bN=bK[bM];bJ(bN)?bL={$:1,$0:bN}:void 0;bM=bM-1;}return bL;};L.tryFindIndexBack=function(bJ,bK){var bL,bM;bL=null;bM=bK.length-1;while(bM>=0&&bL==null){bJ(L.get(bK,bM))?bL={$:1,$0:bM}:void 0;bM=bM-1;}return bL;};L.mapFold=function(bJ,bK,bL){var bM,bN,bO,bP,bQ;bN=new a.Array(bL.length);bM=bK;for(bO=0,bP=bL.length-1;bO<=bP;bO++){bQ=bJ(bM,bL[bO]);bN[bO]=bQ[0];bM=bQ[1];}return[bN,bM];};L.mapFoldBack=function(bJ,bK,bL){var bM,bN,bO,bP,bQ,bR,bS,bT;bO=new a.Array(bK.length);bM=bL;bP=bK.length;for(bQ=1,bR=bP;bQ<=bR;bQ++){bS=bP-bQ;bT=bJ(bK[bS],bM);bO[bS]=bT[0];bM=bT[1];}return[bO,bM];};L.mapInPlace=function(bJ,bK){var bL,bM;for(bL=0,bM=bK.length-1;bL<=bM;bL++)bK[bL]=bJ(bK[bL]);};L.mapiInPlace=function(bJ,bK){var bL,bM;for(bL=0,bM=bK.length-1;bL<=bM;bL++)bK[bL]=bJ(bL,bK[bL]);return bK;};L.sortInPlaceByDescending=function(bJ,bK){L.mapInPlace(function(bL){return bL[0];},L.mapiInPlace(function(bL,bM){return[bM,[bJ(bM),bL]];},bK).sort(function(bL,bM){return-bu.Compare(bL[1],bM[1]);}));};M.tryHead=function(bJ){var bK;bK=I.Get(bJ);try{return bK.MoveNext()?{$:1,$0:bK.Current()}:null;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.tryItem=function(bJ,bK){var bL,bM,bN;if(bJ<0)return null;else{bL=0;bM=I.Get(bK);try{bN=true;while(bN&&bL<=bJ)if(bM.MoveNext())bL=bL+1;else bN=false;return bN?{$:1,$0:bM.Current()}:null;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}}};M.tryLast=function(bJ){var bK,bL;bK=I.Get(bJ);try{if(bK.MoveNext()){while(bK.MoveNext());bL={$:1,$0:bK.Current()};}else bL=null;return bL;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.chunkBySize=function(bJ,bK){bJ<=0?A.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bL;bL=I.Get(bK);return new J.New(true,null,function(bM){var bN;if(bM.s&&bL.MoveNext()){bN=[bL.Current()];while(bM.s&&L.length(bN)<bJ)if(bL.MoveNext())bN.push(bL.Current());else bM.s=false;bM.c=bN;return true;}else return false;},function(){bL.Dispose();});}};};L.countBy=function(bJ,bK){var bL,bM,bN,bO,bP;bL=new Y.New$5();bM=[];for(bN=0,bO=L.length(bK)-1;bN<=bO;bN++){bP=bJ(bK[bN]);bL.ContainsKey(bP)?bL.set_Item(bP,bL.get_Item(bP)+1):(bM.push(bP),bL.Add(bP,1));}L.mapInPlace(function(bQ){return[bQ,bL.get_Item(bQ)];},bM);return bM;};M.except=function(bJ,bK){return{GetEnumerator:function(){var bL,bM;bL=I.Get(bK);bM=new bd.New$2(bJ);return new J.New(null,null,function(bN){var bO,bP;if(bL.MoveNext()){bO=bL.Current();bP=bM.Add(bO);while(!bP&&bL.MoveNext()){bO=bL.Current();bP=bM.Add(bO);}return bP&&(bN.c=bO,true);}else return false;},function(){bL.Dispose();});}};};N.skip=function(bJ,bK){var bL,bM,bN;bL=bK;for(bM=1,bN=bJ;bM<=bN;bM++)if(bL.$==0)A.FailWith("Input list too short.");else bL=bL.$1;return bL;};L.groupBy=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;bL=new Y.New$5();bM=[];for(bN=0,bO=L.length(bK)-1;bN<=bO;bN++){bP=bK[bN];bQ=bJ(bP);bL.ContainsKey(bQ)?bL.get_Item(bQ).push(bP):(bM.push(bQ),bL.Add(bQ,[bP]));}L.mapInPlace(function(bR){return[bR,bL.get_Item(bR)];},bM);return bM;};M.insufficient=function(){return A.FailWith("The input sequence has an insufficient number of elements.");};M.last=function(bJ){var bK,bL;bK=I.Get(bJ);try{if(!bK.MoveNext())bL=M.insufficient();else{while(bK.MoveNext());bL=bK.Current();}return bL;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.contains=function(bJ,bK){var bL,bM;bL=I.Get(bK);try{bM=false;while(!bM&&bL.MoveNext())bM=bu.Equals(bL.Current(),bJ);return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.skipWhile=function(bJ,bK){var bL;bL=bK;while(!(bL.$==0)&&bJ(N.head(bL)))bL=N.tail(bL);return bL;};M.nonNegative=function(){return A.FailWith("The input must be non-negative.");};L.transposeArray=function(bJ){var bK,bL,bM,bN,bO,bP,bQ,bR,bS;bK=L.length(bJ);if(bK===0)return[];else{bL=L.length(L.get(bJ,0));for(bM=1,bN=bK-1;bM<=bN;bM++)if(bL!==L.length(L.get(bJ,bM)))A.FailWith("The arrays have different lengths.");bO=new a.Array(bL);for(bP=0,bQ=bL-1;bP<=bQ;bP++){bO[bP]=new a.Array(bK);for(bR=0,bS=bK-1;bR<=bS;bR++)bO[bP][bR]=L.get(L.get(bJ,bR),bP);}return bO;}};L.checkBounds=function(bJ,bK){if(bK<0||bK>=bJ.length)A.FailWith("Index was outside the bounds of the array.");};L.checkBounds2D=function(bJ,bK,bL){if(bK<0||bL<0||bK>=bJ.length||bL>=(bJ.length?bJ[0].length:0))throw new _1.New();};L.checkRange=function(bJ,bK,bL){if(bL<0||bK<0||bJ.length<bK+bL)A.FailWith("Index was outside the bounds of the array.");};L.set=function(bJ,bK,bL){L.checkBounds(bJ,bK);bJ[bK]=bL;};L.get=function(bJ,bK){L.checkBounds(bJ,bK);return bJ[bK];};L.sub=function(bJ,bK,bL){L.checkRange(bJ,bK,bL);return bJ.slice(bK,bK+bL);};L.setSub=function(bJ,bK,bL,bM){var bN,bO;for(bN=0,bO=bL-1;bN<=bO;bN++)L.set(bJ,bK+bN,L.get(bM,bN));};L.get2D=function(bJ,bK,bL){L.checkBounds2D(bJ,bK,bL);return bJ[bK][bL];};L.set2D=function(bJ,bK,bL,bM){L.checkBounds2D(bJ,bK,bL);bJ[bK][bL]=bM;};L.zeroCreate2D=function(bJ,bK){var bL;bL=L.init(bJ,function(){return L.create(bK,null);});bL.dims=2;return bL;};L.sub2D=function(bJ,bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT,bU;bO=bM<0?0:bM;bP=bN<0?0:bN;bQ=L.zeroCreate2D(bO,bP);for(bR=0,bS=bO-1;bR<=bS;bR++){for(bT=0,bU=bP-1;bT<=bU;bT++)L.set2D(bQ,bR,bT,L.get2D(bJ,bK+bR,bL+bT));}return bQ;};L.setSub2D=function(bJ,bK,bL,bM,bN,bO){var bP,bQ,bR,bS;for(bP=0,bQ=bM-1;bP<=bQ;bP++){for(bR=0,bS=bN-1;bR<=bS;bR++)L.set2D(bJ,bK+bP,bL+bR,L.get2D(bO,bP,bR));}};L.length=function(bJ){return bJ.dims===2?bJ.length*bJ.length:bJ.length;};b.checkThis=function(bJ){return bu.Equals(bJ,null)?A.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bJ;};L.binarySearch=function(bJ,bK,bL,bM){var bN,bO,bP,bQ;bN=bL;bO=bM-1;if(bL<0)throw new _4.New("index","Non-negative number required.");else null;if(bM>L.length(bJ))throw new _3.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bM<bL)throw new _4.New("length","Non-negative number required.");else null;while(true)if(bN>bO)return~bN;else{bP=(bN+bO)/2>>0;bQ=bK(L.get(bJ,bP));if(bN===bO)return bQ===0?bN:bQ>0?~(bN+1):~bN;else if(bQ<=0)bO=bP;else bN=bP+1;}};L.binarySearchComparer=function(bJ){return bJ.CompareTo0?function(bK){return bJ.CompareTo0(bK);}:function(bK){if(bK.CompareTo0)return-bK.CompareTo0(bJ);else throw new _6.New$2("Failed to compare two elements in the array.",new _3.New$2("At least one object must implement IComparable."));};};L.sortInternal=function(bJ,bK,bL,bM,bN){function bO(bQ,bR){var bS,bT,bU,bV;bT=bJ[bR];bS=bQ-1;for(bU=bQ,bV=bR-1;bU<=bV;bU++)if(bM(bJ[bU],bT)<0){bS=bS+1;bN(bS,bU);}bM(bJ[bR],bJ[bS+1])<0?bN(bS+1,bR):void 0;return bS+1;}function bP(bQ,bR){var bS;return bQ<bR?(bS=bO(bQ,bR),(bP(bQ,bS-1),bP(bS+1,bR))):null;}bP(bK,bK+bL-1);};L.sortSub=function(bJ,bK,bL,bM){L.sortInternal(bJ,bK,bL,bM,function(bN,bO){var bP;bP=bJ[bN];bJ[bN]=bJ[bO];bJ[bO]=bP;});};L.sortByKeys=function(bJ,bK,bL,bM,bN){L.sortInternal(bJ,bL,bM,bN,function(bO,bP){var bQ,bR;bQ=bJ[bO];bJ[bO]=bJ[bP];bJ[bP]=bQ;bR=bK[bO];bK[bO]=bK[bP];bK[bP]=bR;});};L.clear=function(bJ,bK,bL){var bM,bN;if(bJ==null)throw new _5.New$1("array");else void 0;if(bK<0||bL<0||bK+bL>L.length(bJ))throw new _1.New();else void 0;for(bM=bK,bN=bK+bL-1;bM<=bN;bM++)bJ[bM]=typeof bJ[bM]=="number"?0:null;};L.constrainedCopy=function(bJ,bK,bL,bM,bN){if(bJ===bL&&bM<=bK+bN)L.blit(L.init(bN,function(bO){return L.get(bJ,bK+bO);}),0,bL,bM,bN);else L.blit(bJ,bK,bL,bM,bN);};L.findIndexBound=function(bJ,bK,bL,bM){var bN,bO;bN=bK+bL;bO=bK;if(bJ==null)throw new _5.New$1("array");else null;if(bM==null)throw new _5.New$1("match");else null;if(bK<0)throw new _4.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bL<0||bK+bL>L.length(bJ))throw new _4.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bO===bN)return -1;else if(bM(L.get(bJ,bO)))return bO;else bO=bO+1;};L.findLastIndexBound=function(bJ,bK,bL,bM){var bN;bN=bK+bL-1;if(bJ==null)throw new _5.New$1("array");else null;if(bM==null)throw new _5.New$1("match");else null;if(bK<0)throw new _4.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bL<0||bK+bL>L.length(bJ))throw new _4.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bN<bK)return -1;else if(bM(L.get(bJ,bN)))return bN;else bN=bN-1;};L.reverse=function(bJ,bK,bL){var bM;bM=L.sub(bJ,bK,bL).slice().reverse();L.blit(bM,0,bJ,bK,L.length(bM));};L.sum=function(bJ){var bK,bL;bK=0;bL=0;for(;bL<bJ.length;bL++)bK+=bJ[bL];return bK;};L.sumBy=function(bJ,bK){var bL,bM;bL=0;bM=0;for(;bM<bK.length;bM++)bL+=bJ(bK[bM]);return bL;};L.allPairs=function(bJ,bK){var bL,bM,bN,bO,bP,bQ,bR;bL=bJ.length;bM=bK.length;bN=new a.Array(bL*bM);for(bO=0,bP=bL-1;bO<=bP;bO++){for(bQ=0,bR=bM-1;bQ<=bR;bQ++)bN[bO*bM+bQ]=[bJ[bO],bK[bQ]];}return bN;};L.average=function(bJ){return a.Number(L.sum(bJ))/bJ.length;};L.averageBy=function(bJ,bK){return a.Number(L.sumBy(bJ,bK))/bK.length;};L.blit=function(bJ,bK,bL,bM,bN){var bO,bP;L.checkRange(bJ,bK,bN);L.checkRange(bL,bM,bN);for(bO=0,bP=bN-1;bO<=bP;bO++)bL[bM+bO]=bJ[bK+bO];};L.choose=function(bJ,bK){var bL,bM,bN,bO;bL=[];for(bM=0,bN=bK.length-1;bM<=bN;bM++){bO=bJ(bK[bM]);bO==null?void 0:bL.push(bO.$0);}return bL;};L.collect=function(bJ,bK){return a.Array.prototype.concat.apply([],L.map(bJ,bK));};L.concat=function(bJ){return a.Array.prototype.concat.apply([],L.ofSeq(bJ));};L.create=function(bJ,bK){var bL,bM,bN;bL=new a.Array(bJ);for(bM=0,bN=bJ-1;bM<=bN;bM++)bL[bM]=bK;return bL;};L.exists=function(bJ,bK){var bL,bM,bN,bO;bL=false;bM=0;bO=L.length(bK);while(!bL&&bM<bO)if(bJ(bK[bM]))bL=true;else bM=bM+1;return bL;};L.exists2=function(bJ,bK,bL){var bM,bN,bO,bP;L.checkLength(bK,bL);bM=false;bN=0;bP=L.length(bK);while(!bM&&bN<bP)if(bJ(bK[bN],bL[bN]))bM=true;else bN=bN+1;return bM;};L.fill=function(bJ,bK,bL,bM){var bN,bO;L.checkRange(bJ,bK,bL);for(bN=bK,bO=bK+bL-1;bN<=bO;bN++)bJ[bN]=bM;};L.filter=function(bJ,bK){var bL,bM,bN;bL=[];for(bM=0,bN=bK.length-1;bM<=bN;bM++)if(bJ(bK[bM]))bL.push(bK[bM]);return bL;};L.find=function(bJ,bK){var bL;bL=L.tryFind(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};L.findIndex=function(bJ,bK){var bL;bL=L.tryFindIndex(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};L.fold=function(bJ,bK,bL){var bM,bN,bO;bM=bK;for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM=bJ(bM,bL[bN]);return bM;};L.fold2=function(bJ,bK,bL,bM){var bN,bO,bP;L.checkLength(bL,bM);bN=bK;for(bO=0,bP=bL.length-1;bO<=bP;bO++)bN=bJ(bN,bL[bO],bM[bO]);return bN;};L.foldBack=function(bJ,bK,bL){var bM,bN,bO,bP,bQ;bM=bL;bO=bK.length;for(bP=1,bQ=bO;bP<=bQ;bP++)bM=bJ(bK[bO-bP],bM);return bM;};L.foldBack2=function(bJ,bK,bL,bM){var bN,bO,bP,bQ,bR;L.checkLength(bK,bL);bP=bK.length;bO=bM;for(bQ=1,bR=bP;bQ<=bR;bQ++)bO=bJ(bK[bP-bQ],bL[bP-bQ],bO);return bO;};L.forall=function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=L.length(bK);while(bL&&bM<bO)if(bJ(bK[bM]))bM=bM+1;else bL=false;return bL;};L.forall2=function(bJ,bK,bL){var bM,bN,bO,bP;L.checkLength(bK,bL);bM=true;bN=0;bP=L.length(bK);while(bM&&bN<bP)if(bJ(bK[bN],bL[bN]))bN=bN+1;else bM=false;return bM;};L.init=function(bJ,bK){var bL,bM,bN;bJ<0?A.FailWith("Negative size given."):null;bL=new a.Array(bJ);for(bM=0,bN=bJ-1;bM<=bN;bM++)bL[bM]=bK(bM);return bL;};L.iter=function(bJ,bK){var bL,bM;for(bL=0,bM=bK.length-1;bL<=bM;bL++)bJ(bK[bL]);};L.iter2=function(bJ,bK,bL){var bM,bN;L.checkLength(bK,bL);for(bM=0,bN=bK.length-1;bM<=bN;bM++)bJ(bK[bM],bL[bM]);};L.iteri=function(bJ,bK){var bL,bM;for(bL=0,bM=bK.length-1;bL<=bM;bL++)bJ(bL,bK[bL]);};L.iteri2=function(bJ,bK,bL){var bM,bN;L.checkLength(bK,bL);for(bM=0,bN=bK.length-1;bM<=bN;bM++)bJ(bM,bK[bM],bL[bM]);};L.map=function(bJ,bK){var bL,bM,bN;bL=new a.Array(bK.length);for(bM=0,bN=bK.length-1;bM<=bN;bM++)bL[bM]=bJ(bK[bM]);return bL;};L.map2=function(bJ,bK,bL){var bM,bN,bO;L.checkLength(bK,bL);bM=new a.Array(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bN]=bJ(bK[bN],bL[bN]);return bM;};L.mapi=function(bJ,bK){var bL,bM,bN;bL=new a.Array(bK.length);for(bM=0,bN=bK.length-1;bM<=bN;bM++)bL[bM]=bJ(bM,bK[bM]);return bL;};L.mapi2=function(bJ,bK,bL){var bM,bN,bO;L.checkLength(bK,bL);bM=new a.Array(bK.length);for(bN=0,bO=bK.length-1;bN<=bO;bN++)bM[bN]=bJ(bN,bK[bN],bL[bN]);return bM;};L.max=function(bJ){var bK,bL,bM,bN;L.nonEmpty(bJ);bK=bJ[0];for(bL=1,bM=bJ.length-1;bL<=bM;bL++){bN=bJ[bL];bu.Compare(bN,bK)===1?bK=bN:void 0;}return bK;};L.maxBy=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;L.nonEmpty(bK);bL=bK[0];bM=bJ(bL);for(bN=1,bO=bK.length-1;bN<=bO;bN++){bP=bK[bN];bQ=bJ(bP);bu.Compare(bQ,bM)===1?(bL=bP,bM=bQ):void 0;}return bL;};L.min=function(bJ){var bK,bL,bM,bN;L.nonEmpty(bJ);bK=bJ[0];for(bL=1,bM=bJ.length-1;bL<=bM;bL++){bN=bJ[bL];bu.Compare(bN,bK)===-1?bK=bN:void 0;}return bK;};L.minBy=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;L.nonEmpty(bK);bL=bK[0];bM=bJ(bL);for(bN=1,bO=bK.length-1;bN<=bO;bN++){bP=bK[bN];bQ=bJ(bP);bu.Compare(bQ,bM)===-1?(bL=bP,bM=bQ):void 0;}return bL;};L.ofList=function(bJ){var bK,bL;bL=[];bK=bJ;while(!(bK.$==0)){bL.push(N.head(bK));bK=N.tail(bK);}return bL;};L.ofSeq=function(bJ){var bK,bL;if(bJ instanceof a.Array)return bJ.slice();else if(bJ instanceof bh)return L.ofList(bJ);else{bK=[];bL=I.Get(bJ);try{while(bL.MoveNext())bK.push(bL.Current());return bK;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}}};L.partition=function(bJ,bK){var bL,bM,bN,bO;bL=[];bM=[];for(bN=0,bO=bK.length-1;bN<=bO;bN++)if(bJ(bK[bN]))bL.push(bK[bN]);else bM.push(bK[bN]);return[bL,bM];};L.permute=function(bJ,bK){var bL,bM,bN;bL=new a.Array(bK.length);for(bM=0,bN=bK.length-1;bM<=bN;bM++)bL[bJ(bM)]=bK[bM];return bL;};L.pick=function(bJ,bK){var bL;bL=L.tryPick(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};L.reduce=function(bJ,bK){var bL,bM,bN;L.nonEmpty(bK);bL=bK[0];for(bM=1,bN=bK.length-1;bM<=bN;bM++)bL=bJ(bL,bK[bM]);return bL;};L.reduceBack=function(bJ,bK){var bL,bM,bN,bO,bP;L.nonEmpty(bK);bN=bK.length;bM=bK[bN-1];for(bO=2,bP=bN;bO<=bP;bO++)bM=bJ(bK[bN-bO],bM);return bM;};L.scan=function(bJ,bK,bL){var bM,bN,bO;bM=new a.Array(1+bL.length);bM[0]=bK;for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bN+1]=bJ(bM[bN],bL[bN]);return bM;};L.scanBack=function(bJ,bK,bL){var bM,bN,bO,bP;bM=bK.length;bN=new a.Array(1+bM);bN[bM]=bL;for(bO=0,bP=bM-1;bO<=bP;bO++)bN[bM-bO-1]=bJ(bK[bM-bO-1],bN[bM-bO]);return bN;};L.sort=function(bJ){return L.map(function(bK){return bK[0];},L.mapi(function(bK,bL){return[bL,bK];},bJ).sort(bu.Compare));};L.sortBy=function(bJ,bK){return L.map(function(bL){return bL[0];},L.mapi(function(bL,bM){return[bM,[bJ(bM),bL]];},bK).sort(function(bL,bM){return bu.Compare(bL[1],bM[1]);}));};L.sortInPlace=function(bJ){L.mapInPlace(function(bK){return bK[0];},L.mapiInPlace(function(bK,bL){return[bL,bK];},bJ).sort(bu.Compare));};L.sortInPlaceBy=function(bJ,bK){L.mapInPlace(function(bL){return bL[0];},L.mapiInPlace(function(bL,bM){return[bM,[bJ(bM),bL]];},bK).sort(function(bL,bM){return bu.Compare(bL[1],bM[1]);}));};L.sortInPlaceWith=function(bJ,bK){bK.sort(bJ);};L.sortWith=function(bJ,bK){return bK.slice().sort(bJ);};L.sortByDescending=function(bJ,bK){return L.map(function(bL){return bL[0];},L.mapi(function(bL,bM){return[bM,[bJ(bM),bL]];},bK).sort(function(bL,bM){return-bu.Compare(bL[1],bM[1]);}));};L.sortDescending=function(bJ){return L.map(function(bK){return bK[0];},L.mapi(function(bK,bL){return[bL,bK];},bJ).sort(function(bK,bL){return-bu.Compare(bK,bL);}));};L.transpose=function(bJ){return bJ instanceof a.Array?L.transposeArray(bJ):L.transposeArray(L.ofSeq(bJ));};L.tryFind=function(bJ,bK){var bL,bM;bL=null;bM=0;while(bM<bK.length&&bL==null){bJ(bK[bM])?bL={$:1,$0:bK[bM]}:void 0;bM=bM+1;}return bL;};L.tryFindIndex=function(bJ,bK){var bL,bM;bL=null;bM=0;while(bM<bK.length&&bL==null){bJ(bK[bM])?bL={$:1,$0:bM}:void 0;bM=bM+1;}return bL;};L.tryHead=function(bJ){return bJ.length===0?null:{$:1,$0:bJ[0]};};L.tryItem=function(bJ,bK){return bK.length<=bJ||bJ<0?null:{$:1,$0:bK[bJ]};};L.tryLast=function(bJ){var bK;bK=bJ.length;return bK===0?null:{$:1,$0:bJ[bK-1]};};L.tryPick=function(bJ,bK){var bL,bM,bN;bL=null;bM=0;while(bM<bK.length&&bL==null){bN=bJ(bK[bM]);bN!=null&&bN.$==1?bL=bN:void 0;bM=bM+1;}return bL;};L.unzip=function(bJ){var bK,bL,bM,bN,bO;bK=[];bL=[];for(bM=0,bN=bJ.length-1;bM<=bN;bM++){bO=bJ[bM];bK.push(bO[0]);bL.push(bO[1]);}return[bK,bL];};L.unzip3=function(bJ){var bK,bL,bM,bN,bO,bP;bK=[];bL=[];bM=[];for(bN=0,bO=bJ.length-1;bN<=bO;bN++){bP=bJ[bN];bK.push(bP[0]);bL.push(bP[1]);bM.push(bP[2]);}return[bK,bL,bM];};L.zip=function(bJ,bK){var bL,bM,bN;L.checkLength(bJ,bK);bL=L.create(bJ.length,null);for(bM=0,bN=bJ.length-1;bM<=bN;bM++)bL[bM]=[bJ[bM],bK[bM]];return bL;};L.zip3=function(bJ,bK,bL){var bM,bN,bO;L.checkLength(bJ,bK);L.checkLength(bK,bL);bM=L.create(bJ.length,null);for(bN=0,bO=bJ.length-1;bN<=bO;bN++)bM[bN]=[bJ[bN],bK[bN],bL[bN]];return bM;};L.chunkBySize=function(bJ,bK){return L.ofSeq(M.chunkBySize(bJ,bK));};L.compareWith=function(bJ,bK,bL){return M.compareWith(bJ,bK,bL);};L.distinct=function(bJ){return L.ofSeq(M.distinct(bJ));};L.distinctBy=function(bJ,bK){return L.ofSeq(M.distinctBy(bJ,bK));};L.except=function(bJ,bK){return L.ofSeq(M.except(bJ,bK));};L.findBack=function(bJ,bK){var bL;bL=L.tryFindBack(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};L.findIndexBack=function(bJ,bK){var bL;bL=L.tryFindIndexBack(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};L.head=function(bJ){L.nonEmpty(bJ);return bJ[0];};L.last=function(bJ){L.nonEmpty(bJ);return bJ[bJ.length-1];};L.map3=function(bJ,bK,bL,bM){var bN,bO,bP;L.checkLength(bK,bL);L.checkLength(bK,bM);bN=new a.Array(bM.length);for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN[bO]=bJ(bK[bO],bL[bO],bM[bO]);return bN;};L.pairwise=function(bJ){return L.ofSeq(M.pairwise(bJ));};L.replicate=function(bJ,bK){return L.create(bJ,bK);};L.indexed=function(bJ){return L.mapi(function(bK,bL){return[bK,bL];},bJ);};L.skip=function(bJ,bK){return bJ<0?M.nonNegative():bJ>bK.length?M.insufficient():bK.slice(bJ);};L.skipWhile=function(bJ,bK){var bL,bM;bM=bK.length;bL=0;while(bL<bM&&bJ(bK[bL]))bL=bL+1;return bK.slice(bL);};L.tail=function(bJ){return L.skip(1,bJ);};L.take=function(bJ,bK){return bJ<0?M.nonNegative():bJ>bK.length?M.insufficient():bK.slice(0,bJ);};L.takeWhile=function(bJ,bK){var bL,bM;bM=bK.length;bL=0;while(bL<bM&&bJ(bK[bL]))bL=bL+1;return bK.slice(0,bL);};L.exactlyOne=function(bJ){return bJ.length===1?bJ[0]:A.FailWith("The input does not have precisely one element.");};L.tryExactlyOne=function(bJ){return bJ.length===1?{$:1,$0:bJ[0]}:null;};L.unfold=function(bJ,bK){return L.ofSeq(M.unfold(bJ,bK));};L.windowed=function(bJ,bK){return L.ofSeq(M.windowed(bJ,bK));};L.splitAt=function(bJ,bK){return[L.take(bJ,bK),L.skip(bJ,bK)];};L.nonEmpty=function(bJ){if(bJ.length===0)A.FailWith("The input array was empty.");};L.checkLength=function(bJ,bK){if(bJ.length!==bK.length)A.FailWith("The arrays have different lengths.");};O.init=function(bJ,bK,bL){var bM,bN,bO,bP,bQ;bM=L.zeroCreate2D(bJ,bK);for(bN=0,bO=bJ-1;bN<=bO;bN++){for(bP=0,bQ=bK-1;bP<=bQ;bP++)L.set2D(bM,bN,bP,bL(bN,bP));}return bM;};O.iter=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;bL=bK.length;bM=bK.length?bK[0].length:0;for(bN=0,bO=bL-1;bN<=bO;bN++){for(bP=0,bQ=bM-1;bP<=bQ;bP++)bJ(L.get2D(bK,bN,bP));}};O.iteri=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;bL=bK.length;bM=bK.length?bK[0].length:0;for(bN=0,bO=bL-1;bN<=bO;bN++){for(bP=0,bQ=bM-1;bP<=bQ;bP++)bJ(bN,bP,L.get2D(bK,bN,bP));}};O.map=function(bJ,bK){return O.init(bK.length,bK.length?bK[0].length:0,function(bL,bM){return bJ(L.get2D(bK,bL,bM));});};O.mapi=function(bJ,bK){return O.init(bK.length,bK.length?bK[0].length:0,function(bL,bM){return bJ(bL,bM,L.get2D(bK,bL,bM));});};O.copy=function(bJ){return O.init(bJ.length,bJ.length?bJ[0].length:0,function(bK,bL){return L.get2D(bJ,bK,bL);});};P=b.CancellationTokenSource=bC.Class({CancelAfter:function(bJ){var bK,bL;bK=this;!this.c?(bL=this.pending,bL==null?void 0:a.clearTimeout(bL.$0),this.pending={$:1,$0:a.setTimeout(function(){bK.Cancel$1();},bJ)}):void 0;},Cancel:function(bJ){if(!bJ)this.Cancel$1();else if(!this.c){this.c=true;L.iter(function(bK){bK();},this.r);}},Cancel$1:function(){var bJ;if(!this.c){this.c=true;bJ=L.choose(function(bK){try{bK();return null;}catch(bL){return{$:1,$0:bL};}},this.r);if(L.length(bJ)>0)throw new _7.New$3(bJ);else void 0;}}},j,P);P.CreateLinkedTokenSource=function(bJ,bK){return P.CreateLinkedTokenSource$1([bJ,bK]);};P.CreateLinkedTokenSource$1=function(bJ){var bK;bK=new P.New();L.iter(function(bL){function bM(bN){return bK.Cancel$1();}D.Register(bL,function(){bM();});},bJ);return bK;};P.New=bC.Ctor(function(){j.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},P);Q.IsWhiteSpace=function(bJ){return bJ.match(new a.RegExp("\\s"))!==null;};Q.Parse=function(bJ){return bJ.length===1?bJ:A.FailWith("String must be exactly one character long.");};Q.IsUpper=function(bJ){return bJ>="A"&&bJ<="Z";};Q.IsLower=function(bJ){return bJ>="a"&&bJ<="z";};Q.IsLetterOrDigit=function(bJ){return Q.IsLetter(bJ)||Q.IsDigit(bJ);};Q.IsLetter=function(bJ){return bJ>="A"&&bJ<="Z"||bJ>="a"&&bJ<="z";};Q.IsDigit=function(bJ){return bJ>="0"&&bJ<="9";};Q.IsControl=function(bJ){return bJ>="\u0000"&&bJ<="\u001f"||bJ>="\u0080"&&bJ<="\u009f";};Q.GetNumericValue=function(bJ){return bJ>="0"&&bJ<="9"?bJ.charCodeAt()-"0".charCodeAt():-1;};R.observer=function(bJ){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bJ};};S.LongTime=function(bJ){return(new bG(bJ)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};S.ShortTime=function(bJ){return(new bG(bJ)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};S.LongDate=function(bJ){return(new bG(bJ)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};S.Parse=function(bJ){var bK;bK=S.TryParse(bJ);return bK!=null&&bK.$==1?bK.$0:A.FailWith("Failed to parse date string.");};S.TryParse=function(bJ){var bK;bK=bG.parse(bJ);return a.isNaN(bK)?null:{$:1,$0:bK};};S.AddMonths=function(bJ,bK){var bL;bL=new bG(bJ);return(new bG(bL.getFullYear(),bL.getMonth()+bK,bL.getDate(),bL.getHours(),bL.getMinutes(),bL.getSeconds(),bL.getMilliseconds())).getTime();};S.AddYears=function(bJ,bK){var bL;bL=new bG(bJ);return(new bG(bL.getFullYear()+bK,bL.getMonth(),bL.getDate(),bL.getHours(),bL.getMinutes(),bL.getSeconds(),bL.getMilliseconds())).getTime();};S.TimePortion=function(bJ){var bK;bK=new bG(bJ);return(((24*0+bK.getHours())*60+bK.getMinutes())*60+bK.getSeconds())*1000+bK.getMilliseconds();};S.DatePortion=function(bJ){var bK;bK=new bG(bJ);return(new bG(bK.getFullYear(),bK.getMonth(),bK.getDate())).getTime();};T.get_Now=function(){var bJ;bJ=new bG();return{d:bJ.getTime(),o:-bJ.getTimezoneOffset()};};T.get_DateTime=function(bJ){return bJ.d;};U.InvocationList=function(bJ){return bJ.$Invokes||[bJ];};U.RemoveAll=function(bJ,bK){var bL;bL=U.InvocationList(bJ);L.length(U.InvocationList(bK))>1?A.FailWith("TODO: Remove multicast delegates"):void 0;return bC.CreateDelegate(L.filter(function(bM){return!bu.Equals(bM,bK);},bL));};U.Remove=function(bJ,bK){var bL,bM,bN,bO,bP,bQ,bR;bN=U.InvocationList(bJ);if(L.length(U.InvocationList(bK))>1)A.FailWith("TODO: Remove multicast delegates");bO=[];bM=false;for(bP=L.length(bN)-1,bQ=0;bP>=bQ;bP--){bR=L.get(bN,bP);!bM&&bC.DelegateEqual(bR,bK)?bM=true:bO.unshift(bR);}return bC.CreateDelegate(bO);};U.DelegateTarget=function(bJ){var bK;return!bJ?null:"$Target"in bJ?bJ.$Target:"$Invokes"in bJ?(bK=bJ.$Invokes,(L.get(bK,L.length(bK)-1))[1]):null;};V.getHashCode=function(bJ,bK){return bJ.CGetHashCode(bK);};V.equals=function(bJ){return function(bK,bL){return bJ.CEquals(bK,bL);};};V.alreadyAdded=function(){return A.FailWith("An item with the same key has already been added.");};V.notPresent=function(){return A.FailWith("The given key was not present in the dictionary.");};W=s.KeyCollection=bC.Class({GetEnumerator$1:function(){return I.Get(M.map(function(bJ){return bJ.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,W);W.New=bC.Ctor(function(bJ){j.New.call(this);this.d=bJ;},W);X=s.ValueCollection=bC.Class({GetEnumerator$1:function(){return I.Get(M.map(function(bJ){return bJ.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,X);X.New=bC.Ctor(function(bJ){j.New.call(this);this.d=bJ;},X);Y=s.Dictionary=bC.Class({remove:function(bJ){var bK,bL,bM,bN;bK=this;bL=this.hash(bJ);bM=this.data[bL];return bM==null?false:(bN=L.filter(function(bO){return!bK.equals.apply(null,[(A.KeyValue(bO))[0],bJ]);},bM),L.length(bN)<bM.length&&(this.count=this.count-1,this.data[bL]=bN,true));},add:function(bJ,bK){var bL,bM,bN;bL=this;bM=this.hash(bJ);bN=this.data[bM];bN==null?(this.count=this.count+1,this.data[bM]=new a.Array({K:bJ,V:bK})):(L.exists(function(bO){return bL.equals.apply(null,[(A.KeyValue(bO))[0],bJ]);},bN)?V.alreadyAdded():void 0,this.count=this.count+1,bN.push({K:bJ,V:bK}));},set:function(bJ,bK){var bL,bM,bN,bO;bL=this;bM=this.hash(bJ);bN=this.data[bM];bN==null?(this.count=this.count+1,this.data[bM]=new a.Array({K:bJ,V:bK})):(bO=L.tryFindIndex(function(bP){return bL.equals.apply(null,[(A.KeyValue(bP))[0],bJ]);},bN),bO==null?(this.count=this.count+1,bN.push({K:bJ,V:bK})):bN[bO.$0]={K:bJ,V:bK});},get:function(bJ){var bK,bL;bK=this;bL=this.data[this.hash(bJ)];return bL==null?V.notPresent():L.pick(function(bM){var bN;bN=A.KeyValue(bM);return bK.equals.apply(null,[bN[0],bJ])?{$:1,$0:bN[1]}:null;},bL);},get_Keys:function(){return new W.New(this);},get_Values:function(){return new X.New(this);},TryGetValue:function(bJ,bK){var bL,bM,bN;bL=this;bM=this.data[this.hash(bJ)];return bM==null?false:(bN=L.tryPick(function(bO){var bP;bP=A.KeyValue(bO);return bL.equals.apply(null,[bP[0],bJ])?{$:1,$0:bP[1]}:null;},bM),bN!=null&&bN.$==1&&(bK.set(bN.$0),true));},Remove:function(bJ){return this.remove(bJ);},GetEnumerator$1:function(){return I.Get0(this);},set_Item:function(bJ,bK){this.set(bJ,bK);},get_Item:function(bJ){return this.get(bJ);},ContainsKey:function(bJ){var bK,bL;bK=this;bL=this.data[this.hash(bJ)];return bL==null?false:L.exists(function(bM){return bK.equals.apply(null,[(A.KeyValue(bM))[0],bJ]);},bL);},Clear:function(){this.data=[];this.count=0;},Add:function(bJ,bK){this.add(bJ,bK);},GetEnumerator:function(){return I.Get0(this);},GetEnumerator0:function(){return I.Get0(L.concat(d.GetFieldValues(this.data)));}},j,Y);Y.New=bC.Ctor(function(bJ,bK){Y.New$6.call(this,bJ,V.equals(bK),function(bL){return V.getHashCode(bK,bL);});},Y);Y.New$1=bC.Ctor(function(bJ){Y.New$6.call(this,bJ,bu.Equals,bu.Hash);},Y);Y.New$2=bC.Ctor(function(bJ,bK){Y.New$3.call(this,bK);},Y);Y.New$3=bC.Ctor(function(bJ){Y.New$6.call(this,[],V.equals(bJ),function(bK){return V.getHashCode(bJ,bK);});},Y);Y.New$4=bC.Ctor(function(bJ){Y.New$5.call(this);},Y);Y.New$5=bC.Ctor(function(){Y.New$6.call(this,[],bu.Equals,bu.Hash);},Y);Y.New$6=bC.Ctor(function(bJ,bK,bL){var bM,bN;j.New.call(this);this.equals=bK;this.hash=bL;this.count=0;this.data=[];bM=I.Get(bJ);try{while(bM.MoveNext()){bN=bM.Current();this.set(bN.K,bN.V);}}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}},Y);Z.withInner=function(bJ,bK){var bL;bL=new e(bJ);bL.inner=bK;return bL;};_0=b.MatchFailureException=bC.Class({},e,_0);_0.New=bC.Ctor(function(bJ,bK,bL){this.message=bJ+" at "+bF(bK)+":"+bF(bL);a.Object.setPrototypeOf(this,_0.prototype);},_0);_1=b.IndexOutOfRangeException=bC.Class({},e,_1);_1.New=bC.Ctor(function(){_1.New$1.call(this,"Index was outside the bounds of the array.");},_1);_1.New$1=bC.Ctor(function(bJ){this.message=bJ;a.Object.setPrototypeOf(this,_1.prototype);},_1);_2=b.OperationCanceledException=bC.Class({},e,_2);_2.New=bC.Ctor(function(bJ){_2.New$1.call(this,"The operation was canceled.",null,bJ);},_2);_2.New$1=bC.Ctor(function(bJ,bK,bL){this.message=bJ;this.inner=bK;a.Object.setPrototypeOf(this,_2.prototype);this.ct=bL;},_2);_3=b.ArgumentException=bC.Class({},e,_3);_3.New=bC.Ctor(function(bJ,bK){_3.New$2.call(this,bK+"\nParameter name: "+bJ);},_3);_3.New$1=bC.Ctor(function(){_3.New$2.call(this,"Value does not fall within the expected range.");},_3);_3.New$2=bC.Ctor(function(bJ){this.message=bJ;a.Object.setPrototypeOf(this,_3.prototype);},_3);_4=b.ArgumentOutOfRangeException=bC.Class({},e,_4);_4.New=bC.Ctor(function(bJ,bK){this.message=bK+"\nParameter name: "+bJ;a.Object.setPrototypeOf(this,_4.prototype);},_4);_4.New$1=bC.Ctor(function(bJ){_4.New.call(this,bJ,"Specified argument was out of the range of valid values.");},_4);_4.New$2=bC.Ctor(function(){this.message="Specified argument was out of the range of valid values.";a.Object.setPrototypeOf(this,_4.prototype);},_4);_5=b.ArgumentNullException=bC.Class({},e,_5);_5.New=bC.Ctor(function(bJ,bK){this.message=bK+"\nParameter name: "+bJ;a.Object.setPrototypeOf(this,_5.prototype);},_5);_5.New$1=bC.Ctor(function(bJ){_5.New.call(this,bJ,"Value cannot be null.");},_5);_5.New$2=bC.Ctor(function(){this.message="Value cannot be null.";a.Object.setPrototypeOf(this,_5.prototype);},_5);_6=b.InvalidOperationException=bC.Class({},e,_6);_6.New=bC.Ctor(function(bJ){_6.New$2.call(this,bJ,null);},_6);_6.New$1=bC.Ctor(function(){_6.New.call(this,"Operation is not valid due to the current state of the object.");},_6);_6.New$2=bC.Ctor(function(bJ,bK){this.message=bJ;this.inner=bK;a.Object.setPrototypeOf(this,_6.prototype);},_6);_7=b.AggregateException=bC.Class({},e,_7);_7.New=bC.Ctor(function(bJ,bK){_7.New$4.call(this,bJ,[bK]);},_7);_7.New$1=bC.Ctor(function(bJ,bK){_7.New$4.call(this,bJ,L.ofSeq(bK));},_7);_7.New$2=bC.Ctor(function(bJ){_7.New$4.call(this,"One or more errors occurred.",L.ofSeq(bJ));},_7);_7.New$3=bC.Ctor(function(bJ){_7.New$4.call(this,"One or more errors occurred.",bJ);},_7);_7.New$4=bC.Ctor(function(bJ,bK){this.message=bJ;a.Object.setPrototypeOf(this,_7.prototype);this.innerExceptions=bK;},_7);_8=b.TimeoutException=bC.Class({},e,_8);_8.New=bC.Ctor(function(){_8.New$1.call(this,"The operation has timed out.");},_8);_8.New$1=bC.Ctor(function(bJ){this.message=bJ;a.Object.setPrototypeOf(this,_8.prototype);},_8);_9=b.FormatException=bC.Class({},e,_9);_9.New=bC.Ctor(function(){_9.New$1.call(this,"One of the identified items was in an invalid format.");},_9);_9.New$1=bC.Ctor(function(bJ){this.message=bJ;a.Object.setPrototypeOf(this,_9.prototype);},_9);_=b.OverflowException=bC.Class({},e,_);_.New=bC.Ctor(function(){_.New$1.call(this,"Arithmetic operation resulted in an overflow.");},_);_.New$1=bC.Ctor(function(bJ){this.message=bJ;a.Object.setPrototypeOf(this,_.prototype);},_);$=b.TaskCanceledException=bC.Class({},e,$);$.New=bC.Ctor(function(){$.New$1.call(this,"A task was canceled.");},$);$.New$1=bC.Ctor(function(bJ){this.message=bJ;a.Object.setPrototypeOf(this,$.prototype);},$);L.create2D=function(bJ){var bK;bK=L.ofSeq(M.map(L.ofSeq,bJ));bK.dims=2;return bK;};bb.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bJ){var bK,bL;bK=bI.random()*16|0;bL=bJ=="x"?bK:bK&3|8;return bL.toString(16);});};bb.TryParseExact=function(bJ,bK,bL){try{bL.set(bb.ParseExact(bJ,bK));return true;}catch(bM){return false;}};bb.TryParse=function(bJ,bK){try{bK.set(bb.Parse(bJ));return true;}catch(bL){return false;}};bb.ParseExact=function(bJ,bK){var bL,bM,bN,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY;function bO(bZ){var b0,b1,b2,b3;for(b0=0,b1=35;b0<=b1;b0++){b0===8||(b0===13||(b0===18||b0===23))?bZ[b0]!=="-"?bb.ShapeError():void 0:(b3=bZ[b0],!("0"<=b3&&b3<="9"||"a"<=b3&&b3<="f")?bb.ShapeError():void 0);}return bZ;}bP=bK.toUpperCase();if(bP==="N"){bQ=bq.Trim(bJ).toLowerCase();if(bQ.length!==32)bb.ShapeError();for(bR=0,bS=31;bR<=bS;bR++){bT=bQ[bR];!("0"<=bT&&bT<="9"||"a"<=bT&&bT<="f")?bb.ShapeError():void 0;}return bq.Substring(bQ,0,8)+"-"+bq.Substring(bQ,8,4)+"-"+bq.Substring(bQ,12,4)+"-"+bq.Substring(bQ,16,4)+"-"+bQ.substring(20);}else if(bP==="D"){bL=bq.Trim(bJ).toLowerCase();bL.length!==36?bb.ShapeError():void 0;return bO(bL);}else if(bP==="B"){bM=bq.Trim(bJ).toLowerCase();bM.length!==38||bM[0]!=="{"||bM[17]!=="}"?bb.ShapeError():void 0;return bO(bq.Substring(bM,1,36));}else if(bP==="P"){bN=bq.Trim(bJ).toLowerCase();bN.length!==38||bN[0]!=="("||bN[17]!==")"?bb.ShapeError():void 0;return bO(bq.Substring(bN,1,36));}else if(bP==="X"){bU=bq.Trim(bJ).toLowerCase();if(bU.length!==68)bb.ShapeError();for(bV=0,bW=67;bV<=bW;bV++){switch(bV){case 26:case 0:if(bU[bV]!=="{")bb.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bU[bV]!=="0")bb.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bU[bV]!=="x")bb.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bU[bV]!==",")bb.ShapeError();break;case 67:case 66:if(bU[bV]!=="{")bb.ShapeError();break;default:bY=bU[bV];!("0"<=bY&&bY<="9"||"a"<=bY&&bY<="f")?bb.ShapeError():void 0;break;}}return bq.Substring(bU,3,8)+"-"+bq.Substring(bU,14,4)+"-"+bq.Substring(bU,21,4)+"-"+bq.Substring(bU,29,2)+bq.Substring(bU,34,2)+"-"+bq.Substring(bU,39,2)+bq.Substring(bU,44,2)+bq.Substring(bU,49,2)+bq.Substring(bU,54,2)+bq.Substring(bU,59,2)+bq.Substring(bU,64,2);}else return bb.FormatError();};bb.Parse=function(bJ){var bK,bL,bM;try{return bb.ParseExact(bJ,"D");}catch(bN){try{bK=bb.ParseExact(bJ,"B");}catch(bO){try{bL=bb.ParseExact(bJ,"P");}catch(bP){try{bM=bb.ParseExact(bJ,"N");}catch(bQ){bM=bb.ParseExact(bJ,"X");}bL=bM;}bK=bL;}return bK;}};bb.ToString=function(bJ,bK){var bL;bL=bK.toUpperCase();return bL==="N"?bq.Replace(bJ,"-",""):bL==="D"?bJ:bL==="B"?"{"+bJ+"}":bL==="P"?"("+bJ+")":bL==="X"?"{0x"+bq.Substring(bJ,0,8)+",0x"+bq.Substring(bJ,9,4)+",0x"+bq.Substring(bJ,14,4)+",{0x"+bq.Substring(bJ,19,2)+",0x"+bq.Substring(bJ,21,2)+",0x"+bq.Substring(bJ,24,2)+",0x"+bq.Substring(bJ,26,2)+",0x"+bq.Substring(bJ,28,2)+",0x"+bq.Substring(bJ,30,2)+",0x"+bq.Substring(bJ,32,2)+",0x"+bq.Substring(bJ,34,2)+"}}":bb.FormatError();};bb.ParseError=function(){throw new _9.New$1("Unrecognized Guid format.");};bb.ShapeError=function(){throw new _9.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bb.HexaError=function(){throw new _9.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};bb.FormatError=function(){throw new _9.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bc.concat=function(bJ){var bK,bL;bK=[];for(var bM in bJ)bK.push.apply(bK,bJ[bM]);return bK;};bd=s.HashSet=bC.Class({add:function(bJ){var bK,bL;bK=this.hash(bJ);bL=this.data[bK];return bL==null?(this.data[bK]=[bJ],this.count=this.count+1,true):this.arrContains(bJ,bL)?false:(bL.push(bJ),this.count=this.count+1,true);},arrRemove:function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=bK.length;while(bL&&bM<bO)if(this.equals.apply(null,[bK[bM],bJ])){bK.splice.apply(bK,[bM,1]);bL=false;}else bM=bM+1;return!bL;},arrContains:function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=bK.length;while(bL&&bM<bO)if(this.equals.apply(null,[bK[bM],bJ]))bL=false;else bM=bM+1;return!bL;},UnionWith:function(bJ){var bK;bK=I.Get(bJ);try{while(bK.MoveNext())this.Add(bK.Current());}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}},SymmetricExceptWith:function(bJ){var bK,bL;bK=I.Get(bJ);try{while(bK.MoveNext()){bL=bK.Current();this.Contains(bL)?this.Remove(bL):this.Add(bL);}}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}},SetEquals:function(bJ){var bK;bK=new bd.New$4(bJ,this.equals,this.hash);return this.get_Count()===bK.get_Count()&&this.IsSupersetOf(bK);},RemoveWhere:function(bJ){var bK,bL,bM,bN,bO;bL=bc.concat(this.data);bK=0;for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=bL[bM];bJ(bO)?this.Remove(bO)?bK=bK+1:void 0:void 0;}return bK;},Remove:function(bJ){var bK;bK=this.data[this.hash(bJ)];return bK==null?false:this.arrRemove(bJ,bK)&&(this.count=this.count-1,true);},Overlaps:function(bJ){var bK;bK=this;return M.exists(function(bL){return bK.Contains(bL);},bJ);},IsSupersetOf:function(bJ){var bK;bK=this;return M.forall(function(bL){return bK.Contains(bL);},bJ);},IsSubsetOf:function(bJ){var bK;bK=new bd.New$4(bJ,this.equals,this.hash);return L.forall(function(bL){return bK.Contains(bL);},bc.concat(this.data));},IsProperSupersetOf:function(bJ){var bK;bK=L.ofSeq(bJ);return this.count>L.length(bK)&&this.IsSupersetOf(bK);},IsProperSubsetOf:function(bJ){var bK;bK=L.ofSeq(bJ);return this.count<L.length(bK)&&this.IsSubsetOf(bK);},IntersectWith:function(bJ){var bK,bL,bM,bN,bO;bK=new bd.New$4(bJ,this.equals,this.hash);bL=bc.concat(this.data);for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=bL[bM];!bK.Contains(bO)?this.Remove(bO):void 0;}},ExceptWith:function(bJ){var bK;bK=I.Get(bJ);try{while(bK.MoveNext())this.Remove(bK.Current());}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bJ){var bK,bL,bM,bN;bK=0;bL=bc.concat(this.data);for(bM=0,bN=bL.length-1;bM<=bN;bM++)L.set(bJ,bM,bL[bM]);},Contains:function(bJ){var bK;bK=this.data[this.hash(bJ)];return bK==null?false:this.arrContains(bJ,bK);},Clear:function(){this.data=[];this.count=0;},Add:function(bJ){return this.add(bJ);},GetEnumerator:function(){return I.Get(bc.concat(this.data));},GetEnumerator0:function(){return I.Get(bc.concat(this.data));}},j,bd);bd.New=bC.Ctor(function(bJ,bK){bd.New$4.call(this,bJ,V.equals(bK),function(bL){return V.getHashCode(bK,bL);});},bd);bd.New$1=bC.Ctor(function(bJ){bd.New$4.call(this,[],V.equals(bJ),function(bK){return V.getHashCode(bJ,bK);});},bd);bd.New$2=bC.Ctor(function(bJ){bd.New$4.call(this,bJ,bu.Equals,bu.Hash);},bd);bd.New$3=bC.Ctor(function(){bd.New$4.call(this,[],bu.Equals,bu.Hash);},bd);bd.New$4=bC.Ctor(function(bJ,bK,bL){var bM;j.New.call(this);this.equals=bK;this.hash=bL;this.data=[];this.count=0;bM=I.Get(bJ);try{while(bM.MoveNext())this.add(bM.Current());}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}},bd);bf.New=function(bJ,bK,bL){return{c:bJ,v:bK,f:bL};};bg.Force=function(bJ){return bJ.f();};bg.CreateFromValue=function(bJ){return bf.New(true,bJ,bg.cachedLazy);};bg.Create=function(bJ){return bf.New(false,bJ,bg.forceLazy);};bg.forceLazy=function(){var bJ;bJ=this.v();this.c=true;this.v=bJ;this.f=bg.cachedLazy;return bJ;};bg.cachedLazy=function(){return this.v;};bh=N.T=bC.Class({GetSlice:function(bJ,bK){var bL;return bJ!=null&&bJ.$==1?bK!=null&&bK.$==1?(bL=bJ.$0,N.ofSeq(M.take(bK.$0-bL+1,N.skip(bL,this)))):N.skip(bJ.$0,this):bK!=null&&bK.$==1?N.ofSeq(M.take(bK.$0+1,this)):this;},get_Item:function(bJ){return M.nth(bJ,this);},get_Length:function(){return N.length(this);},GetEnumerator:function(){return new J.New(this,null,function(bJ){var bK;bK=bJ.s;return bK.$==0?false:(bJ.c=bK.$0,bJ.s=bK.$1,true);},void 0);},GetEnumerator0:function(){return I.Get(this);}},null,bh);bh.Empty=new bh({$:0});N.allPairs=function(bJ,bK){return N.ofArray(L.allPairs(L.ofList(bJ),L.ofList(bK)));};N.append=function(bJ,bK){var bL,bM,bN,bO,bP;if(bJ.$==0)return bK;else if(bK.$==0)return bJ;else{bO=new bh({$:1});bL=bO;bM=bJ;bN=true;while(bN){bL.$0=bM.$0;bM=bM.$1;bM.$==0?bN=false:bL=(bP=new bh({$:1}),bL.$1=bP,bP);}bL.$1=bK;return bO;}};N.choose=function(bJ,bK){return N.ofSeq(M.choose(bJ,bK));};N.collect=function(bJ,bK){return N.ofSeq(M.collect(bJ,bK));};N.concat=function(bJ){return N.ofSeq(M.concat(bJ));};N.exists=function(bJ,bK){var bL,bM;bL=false;bM=bK;while(!bL&&bM.$==1){bL=bJ(bM.$0);bM=bM.$1;}return bL;};N.exists2=function(bJ,bK,bL){var bM,bN,bO;bM=false;bN=bK;bO=bL;while(!bM&&bN.$==1&&bO.$==1){bM=bJ(bN.$0,bO.$0);bN=bN.$1;bO=bO.$1;}!bM&&(bN.$==1||bO.$==1)?N.badLengths():void 0;return bM;};N.filter=function(bJ,bK){return N.ofSeq(M.filter(bJ,bK));};N.fold2=function(bJ,bK,bL,bM){return L.fold2(bJ,bK,L.ofList(bL),L.ofList(bM));};N.foldBack=function(bJ,bK,bL){return L.foldBack(bJ,L.ofList(bK),bL);};N.foldBack2=function(bJ,bK,bL,bM){return L.foldBack2(bJ,L.ofList(bK),L.ofList(bL),bM);};N.forAll=function(bJ,bK){var bL,bM;bL=true;bM=bK;while(bL&&bM.$==1){bL=bJ(bM.$0);bM=bM.$1;}return bL;};N.forall2=function(bJ,bK,bL){var bM,bN,bO;bM=true;bN=bK;bO=bL;while(bM&&bN.$==1&&bO.$==1){bM=bJ(bN.$0,bO.$0);bN=bN.$1;bO=bO.$1;}bM&&(bN.$==1||bO.$==1)?N.badLengths():void 0;return bM;};N.head=function(bJ){return bJ.$==1?bJ.$0:N.listEmpty();};N.init=function(bJ,bK){return N.ofArray(L.init(bJ,bK));};N.iter=function(bJ,bK){var bL;bL=bK;while(bL.$==1){bJ(N.head(bL));bL=N.tail(bL);}};N.iter2=function(bJ,bK,bL){var bM,bN;bM=bK;bN=bL;while(bM.$==1){bN.$==0?N.badLengths():void 0;bJ(N.head(bM),N.head(bN));bM=N.tail(bM);bN=N.tail(bN);}bN.$==1?N.badLengths():void 0;};N.iteri=function(bJ,bK){var bL,bM;bL=bK;bM=0;while(bL.$==1){bJ(bM,N.head(bL));bL=N.tail(bL);bM=bM+1;}};N.iteri2=function(bJ,bK,bL){var bM,bN,bO;bM=bK;bN=bL;bO=0;while(bM.$==1){bN.$==0?N.badLengths():void 0;bJ(bO,N.head(bM),N.head(bN));bM=N.tail(bM);bN=N.tail(bN);bO=bO+1;}bN.$==1?N.badLengths():void 0;};N.length=function(bJ){var bK,bL;bK=bJ;bL=0;while(bK.$==1){bK=N.tail(bK);bL=bL+1;}return bL;};N.map=function(bJ,bK){var bL,bM,bN,bO,bP;if(bK.$==0)return bK;else{bO=new bh({$:1});bL=bO;bM=bK;bN=true;while(bN){bL.$0=bJ(bM.$0);bM=bM.$1;bM.$==0?bN=false:bL=(bP=new bh({$:1}),bL.$1=bP,bP);}bL.$1=bh.Empty;return bO;}};N.map2=function(bJ,bK,bL){var bM,bN,bO,bP,bQ,bR;bM=bK.$==1&&bL.$==1;if(!bM)return bK.$==1||bL.$==1?N.badLengths():bK;else{bQ=new bh({$:1});bN=bQ;bO=bK;bP=bL;while(bM){bN.$0=bJ(bO.$0,bP.$0);bO=bO.$1;bP=bP.$1;bO.$==1&&bP.$==1?bN=(bR=new bh({$:1}),bN.$1=bR,bR):bM=false;}if(bO.$==1||bP.$==1)N.badLengths();bN.$1=bh.Empty;return bQ;}};N.map3=function(bJ,bK,bL,bM){var bN,bO,bP,bQ,bR,bS,bT;bN=bK.$==1&&bL.$==1&&bM.$==1;if(!bN)return bK.$==1||bL.$==1||bM.$==1?N.badLengths():bK;else{bS=new bh({$:1});bO=bS;bP=bK;bQ=bL;bR=bM;while(bN){bO.$0=bJ(bP.$0,bQ.$0,bR.$0);bP=bP.$1;bQ=bQ.$1;bR=bR.$1;bP.$==1&&bQ.$==1&&bR.$==1?bO=(bT=new bh({$:1}),bO.$1=bT,bT):bN=false;}if(bP.$==1||bQ.$==1||bR.$==1)N.badLengths();bO.$1=bh.Empty;return bS;}};N.mapi=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;if(bK.$==0)return bK;else{bP=new bh({$:1});bL=bP;bM=bK;bN=0;bO=true;while(bO){bL.$0=bJ(bN,bM.$0);bM=bM.$1;bM.$==0?bO=false:(bL=(bQ=new bh({$:1}),bL.$1=bQ,bQ),bN=bN+1);}bL.$1=bh.Empty;return bP;}};N.mapi2=function(bJ,bK,bL){var bM,bN,bO,bP,bQ,bR,bS;bM=bK.$==1&&bL.$==1;if(!bM)return bK.$==1||bL.$==1?N.badLengths():bK;else{bR=new bh({$:1});bN=bR;bO=bK;bP=bL;bQ=0;while(bM){bN.$0=bJ(bQ,bO.$0,bP.$0);bO=bO.$1;bP=bP.$1;bO.$==1&&bP.$==1?(bN=(bS=new bh({$:1}),bN.$1=bS,bS),bQ=bQ+1):bM=false;}if(bO.$==1||bP.$==1)N.badLengths();bN.$1=bh.Empty;return bR;}};N.max=function(bJ){var bK,bL,bM;N.nonEmpty(bJ);bK=bJ.$0;bL=bJ.$1;while(bL.$==1){bM=bL.$0;bu.Compare(bM,bK)===1?bK=bM:void 0;bL=bL.$1;}return bK;};N.maxBy=function(bJ,bK){var bL,bM,bN,bO,bP;N.nonEmpty(bK);bL=bK.$0;bM=bJ(bL);bN=bK.$1;while(bN.$==1){bO=bN.$0;bP=bJ(bO);bu.Compare(bP,bM)===1?(bL=bO,bM=bP):void 0;bN=bN.$1;}return bL;};N.min=function(bJ){var bK,bL,bM;N.nonEmpty(bJ);bK=bJ.$0;bL=bJ.$1;while(bL.$==1){bM=bL.$0;bu.Compare(bM,bK)===-1?bK=bM:void 0;bL=bL.$1;}return bK;};N.minBy=function(bJ,bK){var bL,bM,bN,bO,bP;N.nonEmpty(bK);bL=bK.$0;bM=bJ(bL);bN=bK.$1;while(bN.$==1){bO=bN.$0;bP=bJ(bO);bu.Compare(bP,bM)===-1?(bL=bO,bM=bP):void 0;bN=bN.$1;}return bL;};N.ofArray=function(bJ){var bK,bL,bM;bK=bh.Empty;for(bL=L.length(bJ)-1,bM=0;bL>=bM;bL--)bK=new bh({$:1,$0:L.get(bJ,bL),$1:bK});return bK;};N.ofSeq=function(bJ){var bK,bL,bM,bN,bO,bP;if(bJ instanceof bh)return bJ;else if(bJ instanceof a.Array)return N.ofArray(bJ);else{bK=I.Get(bJ);try{bM=bK.MoveNext();if(!bM)bL=bh.Empty;else{bO=new bh({$:1});bN=bO;while(bM){bN.$0=bK.Current();bK.MoveNext()?bN=(bP=new bh({$:1}),bN.$1=bP,bP):bM=false;}bN.$1=bh.Empty;bL=bO;}return bL;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}}};N.partition=function(bJ,bK){var bL;bL=L.partition(bJ,L.ofList(bK));return[N.ofArray(bL[0]),N.ofArray(bL[1])];};N.permute=function(bJ,bK){return N.ofArray(L.permute(bJ,L.ofList(bK)));};N.reduce=function(bJ,bK){var bL,bM;N.nonEmpty(bK);bL=bK.$0;bM=bK.$1;while(bM.$==1){bL=bJ(bL,bM.$0);bM=bM.$1;}return bL;};N.reduceBack=function(bJ,bK){return L.reduceBack(bJ,L.ofList(bK));};N.replicate=function(bJ,bK){return N.ofArray(L.create(bJ,bK));};N.rev=function(bJ){var bK,bL;bK=bh.Empty;bL=bJ;while(bL.$==1){bK=new bh({$:1,$0:bL.$0,$1:bK});bL=bL.$1;}return bK;};N.scan=function(bJ,bK,bL){return N.ofSeq(M.scan(bJ,bK,bL));};N.scanBack=function(bJ,bK,bL){return N.ofArray(L.scanBack(bJ,L.ofList(bK),bL));};N.sort=function(bJ){var bK;bK=L.ofList(bJ);L.sortInPlace(bK);return N.ofArray(bK);};N.sortBy=function(bJ,bK){var bL;bL=L.ofList(bK);L.sortInPlaceBy(bJ,bL);return N.ofArray(bL);};N.sortByDescending=function(bJ,bK){var bL;bL=L.ofList(bK);L.sortInPlaceByDescending(bJ,bL);return N.ofArray(bL);};N.sortDescending=function(bJ){var bK;bK=L.ofList(bJ);L.sortInPlaceByDescending(a.id,bK);return N.ofArray(bK);};N.sortWith=function(bJ,bK){var bL;bL=L.ofList(bK);L.sortInPlaceWith(bJ,bL);return N.ofArray(bL);};N.tail=function(bJ){return bJ.$==1?bJ.$1:N.listEmpty();};N.transpose=function(bJ){return N.ofSeq(M.map(N.ofArray,L.transposeArray(L.ofSeq(M.map(L.ofList,bJ)))));};N.unzip=function(bJ){var bK,bL,bM,bN;bK=[];bL=[];bM=I.Get(bJ);try{while(bM.MoveNext()){bN=bM.Current();bK.push(bN[0]);bL.push(bN[1]);}}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}return[N.ofArray(bK.slice(0)),N.ofArray(bL.slice(0))];};N.unzip3=function(bJ){var bK,bL,bM,bN,bO;bK=[];bL=[];bM=[];bN=I.Get(bJ);try{while(bN.MoveNext()){bO=bN.Current();bK.push(bO[0]);bL.push(bO[1]);bM.push(bO[2]);}}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}return[N.ofArray(bK.slice(0)),N.ofArray(bL.slice(0)),N.ofArray(bM.slice(0))];};N.zip=function(bJ,bK){return N.map2(function(bL,bM){return[bL,bM];},bJ,bK);};N.zip3=function(bJ,bK,bL){return N.map3(function(bM,bN,bO){return[bM,bN,bO];},bJ,bK,bL);};N.chunkBySize=function(bJ,bK){return N.map(N.ofArray,N.ofSeq(M.chunkBySize(bJ,bK)));};N.compareWith=function(bJ,bK,bL){return M.compareWith(bJ,bK,bL);};N.countBy=function(bJ,bK){return N.ofArray(L.countBy(bJ,L.ofList(bK)));};N.distinct=function(bJ){return N.ofSeq(M.distinct(bJ));};N.distinctBy=function(bJ,bK){return N.ofSeq(M.distinctBy(bJ,bK));};N.splitInto=function(bJ,bK){return N.map(N.ofArray,N.ofArray(L.splitInto(bJ,L.ofList(bK))));};N.except=function(bJ,bK){return N.ofSeq(M.except(bJ,bK));};N.tryFindBack=function(bJ,bK){return L.tryFindBack(bJ,L.ofList(bK));};N.findBack=function(bJ,bK){var bL;bL=N.tryFindBack(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};N.findIndexBack=function(bJ,bK){var bL;bL=L.tryFindIndexBack(bJ,L.ofList(bK));return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};N.groupBy=function(bJ,bK){var bL;function bM(bN,bO){return[bN,N.ofArray(bO)];}bL=L.groupBy(bJ,L.ofList(bK));L.mapInPlace(function(bN){return bM(bN[0],bN[1]);},bL);return N.ofArray(bL);};N.last=function(bJ){var bK,bL;N.nonEmpty(bJ);bK=bJ;bL=bK.$1;while(bL.$==1){bK=bL;bL=bK.$1;}return bK.$0;};N.contains=function(bJ,bK){var bL,bM;bL=false;bM=bK;while(!bL&&bM.$==1){bL=bu.Equals(bJ,bM.$0);bM=bM.$1;}return bL;};N.mapFold=function(bJ,bK,bL){var bM;bM=L.mapFold(bJ,bK,L.ofList(bL));return[N.ofArray(bM[0]),bM[1]];};N.mapFoldBack=function(bJ,bK,bL){var bM;bM=L.mapFoldBack(bJ,L.ofList(bK),bL);return[N.ofArray(bM[0]),bM[1]];};N.pairwise=function(bJ){return N.ofSeq(M.pairwise(bJ));};N.indexed=function(bJ){return N.mapi(function(bK,bL){return[bK,bL];},bJ);};N.tryHead=function(bJ){return bJ.$==0?null:{$:1,$0:bJ.$0};};N.exactlyOne=function(bJ){var bK;return bJ.$==1&&(bJ.$1.$==0&&(bK=bJ.$0,true))?bK:A.FailWith("The input does not have precisely one element.");};N.tryExactlyOne=function(bJ){var bK;return bJ.$==1&&(bJ.$1.$==0&&(bK=bJ.$0,true))?{$:1,$0:bK}:null;};N.unfold=function(bJ,bK){return N.ofSeq(M.unfold(bJ,bK));};N.windowed=function(bJ,bK){return N.ofSeq(M.map(N.ofArray,M.windowed(bJ,bK)));};N.splitAt=function(bJ,bK){return[N.ofSeq(M.take(bJ,bK)),N.skip(bJ,bK)];};N.nonEmpty=function(bJ){if(bJ.$==0)N.listEmpty();};N.listEmpty=function(){return A.FailWith("The input list was empty.");};N.badLengths=function(){return A.FailWith("The lists have different lengths.");};B.getOrValue=function(bJ,bK){return bJ===null?bK:bJ;};B.get=function(bJ){return bJ===null?A.FailWith("Nullable object must have a value."):bJ;};A.range=function(bJ,bK){var bL;bL=1+bK-bJ;return bL<=0?[]:M.init(bL,function(bM){return bM+bJ;});};A.step=function(bJ,bK,bL){var bM;bM=A.Sign(bK);return M.takeWhile(function(bN){return bM*(bL-bN)>=0;},M.initInfinite(function(bN){return bJ+bN*bK;}));};A.KeyValue=function(bJ){return[bJ.K,bJ.V];};A.Truncate=function(bJ){return bJ<0?bI.ceil(bJ):bI.floor(bJ);};A.Sign=function(bJ){return bJ===0?0:bJ<0?-1:1;};A.Pown=function(bJ,bK){function bL(bM){var bN;return bM===1?bJ:bM%2===0?(bN=bL(bM/2>>0),bN*bN):bJ*bL(bM-1);}return bL(bK);};A.toInt=function(bJ){var bK;bK=A.toUInt(bJ);return bK>=2147483648?bK-4294967296:bK;};A.toUInt=function(bJ){return(bJ<0?bI.ceil(bJ):bI.floor(bJ))>>>0;};A.InvalidArg=function(bJ,bK){throw new _3.New(bJ,bK);};A.InvalidOp=function(bJ){throw new _6.New(bJ);};A.FailWith=function(bJ){throw new e(bJ);};bi.string=function(bJ,bK,bL){return bK==null?bL!=null&&bL.$==1?bJ.slice(0,bL.$0+1):"":bL==null?bJ.slice(bK.$0):bJ.slice(bK.$0,bL.$0+1);};bi.array=function(bJ,bK,bL){return bK==null?bL!=null&&bL.$==1?bJ.slice(0,bL.$0+1):[]:bL==null?bJ.slice(bK.$0):bJ.slice(bK.$0,bL.$0+1);};bi.setArray=function(bJ,bK,bL,bM){var bN;bN=bK!=null&&bK.$==1?bK.$0:0;L.setSub(bJ,bN,(bL!=null&&bL.$==1?bL.$0:bJ.length-1)-bN+1,bM);};bi.array2D=function(bJ,bK,bL,bM,bN){var bO,bP;bO=bK!=null&&bK.$==1?bK.$0:0;bP=bM!=null&&bM.$==1?bM.$0:0;return L.sub2D(bJ,bO,bP,(bL!=null&&bL.$==1?bL.$0:bJ.length-1)-bO+1,(bN!=null&&bN.$==1?bN.$0:(bJ.length?bJ[0].length:0)-1)-bP+1);};bi.array2Dfix1=function(bJ,bK,bL,bM){var bN,bO,bP,bQ,bR,bS;bN=bL!=null&&bL.$==1?bL.$0:0;bO=bM!=null&&bM.$==1?bM.$0:(bJ.length?bJ[0].length:0)-1;bP=bO-bN+1;bQ=new a.Array(bP);for(bR=0,bS=bP-1;bR<=bS;bR++)L.set(bQ,bR,L.get2D(bJ,bK,bN+bR));return bQ;};bi.array2Dfix2=function(bJ,bK,bL,bM){var bN,bO,bP,bQ,bR,bS;bN=bK!=null&&bK.$==1?bK.$0:0;bO=bL!=null&&bL.$==1?bL.$0:bJ.length-1;bP=bO-bN+1;bQ=new a.Array(bP);for(bR=0,bS=bP-1;bR<=bS;bR++)L.set(bQ,bR,L.get2D(bJ,bN+bR,bM));return bQ;};bi.setArray2Dfix1=function(bJ,bK,bL,bM,bN){var bO,bP,bQ,bR;bO=bL!=null&&bL.$==1?bL.$0:0;bP=bM!=null&&bM.$==1?bM.$0:(bJ.length?bJ[0].length:0)-1;for(bQ=0,bR=bP-bO+1-1;bQ<=bR;bQ++)L.set2D(bJ,bK,bO+bQ,L.get(bN,bQ));};bi.setArray2Dfix2=function(bJ,bK,bL,bM,bN){var bO,bP,bQ,bR;bO=bK!=null&&bK.$==1?bK.$0:0;bP=bL!=null&&bL.$==1?bL.$0:bJ.length-1;for(bQ=0,bR=bP-bO+1-1;bQ<=bR;bQ++)L.set2D(bJ,bO+bQ,bM,L.get(bN,bQ));};bi.setArray2D=function(bJ,bK,bL,bM,bN,bO){var bP,bQ;bP=bK!=null&&bK.$==1?bK.$0:0;bQ=bM!=null&&bM.$==1?bM.$0:0;L.setSub2D(bJ,bP,bQ,(bL!=null&&bL.$==1?bL.$0:bJ.length-1)-bP+1,(bN!=null&&bN.$==1?bN.$0:(bJ.length?bJ[0].length:0)-1)-bQ+1,bO);};bj.filter=function(bJ,bK){var bL;return bK!=null&&bK.$==1&&(bJ(bK.$0)&&(bL=bK.$0,true))?bK:null;};bj.fold=function(bJ,bK,bL){return bL==null?bK:bJ(bK,bL.$0);};bj.foldBack=function(bJ,bK,bL){return bK==null?bL:bJ(bK.$0,bL);};bj.ofNullable=function(bJ){return bJ==null?null:{$:1,$0:B.get(bJ)};};bj.ofObj=function(bJ){return bJ==null?null:{$:1,$0:bJ};};bj.toArray=function(bJ){return bJ==null?[]:[bJ.$0];};bj.toList=function(bJ){return bJ==null?bh.Empty:N.ofArray([bJ.$0]);};bj.toNullable=function(bJ){return bJ!=null&&bJ.$==1?bJ.$0:null;};bj.toObj=function(bJ){return bJ==null?null:bJ.$0;};bk.CopyTo=function(bJ,bK,bL){L.blit(bJ,0,bK,bL,L.length(bJ));};bk.Contains=function(bJ,bK){return M.exists(function(bL){return bu.Equals(bK,bL);},bJ);};bk.Clear=function(bJ){bJ.splice(0,L.length(bJ));};bl=b.Random=bC.Class({NextBytes:function(bJ){var bK,bL;for(bK=0,bL=L.length(bJ)-1;bK<=bL;bK++)L.set(bJ,bK,bI.floor(bI.random()*256));},Next:function(bJ,bK){return bJ>bK?A.FailWith("'minValue' cannot be greater than maxValue."):bJ+bI.floor(bI.random()*(bK-bJ));},Next$1:function(bJ){return bJ<0?A.FailWith("'maxValue' must be greater than zero."):bI.floor(bI.random()*bJ);},Next$2:function(){return bI.floor(bI.random()*2147483648);}},j,bl);bl.New=bC.Ctor(function(){j.New.call(this);},bl);bm.New=function(bJ){return[bJ];};bn.MapError=function(bJ,bK){return bK.$==1?{$:1,$0:bJ(bK.$0)}:{$:0,$0:bK.$0};};bn.Map=function(bJ,bK){return bK.$==1?{$:1,$0:bK.$0}:{$:0,$0:bJ(bK.$0)};};bn.Bind=function(bJ,bK){return bK.$==1?{$:1,$0:bK.$0}:bJ(bK.$0);};M.enumFinally=function(bJ,bK){return{GetEnumerator:function(){var bL;try{bL=I.Get(bJ);}catch(bM){bK();throw bM;}return new J.New(null,null,function(bN){return bL.MoveNext()&&(bN.c=bL.Current(),true);},function(){bL.Dispose();bK();});}};};M.enumUsing=function(bJ,bK){return{GetEnumerator:function(){var bL,bM;try{bL=I.Get(bK(bJ));}catch(bN){bM=bJ;bM.Dispose();throw bN;}return new J.New(null,null,function(bO){return bL.MoveNext()&&(bO.c=bL.Current(),true);},function(){var bO;bL.Dispose();bO=bJ;bO.Dispose();});}};};M.enumWhile=function(bJ,bK){return{GetEnumerator:function(){return new J.New(null,null,function(bL){var bM;while(true){bM=bL.s;if(bu.Equals(bM,null)){if(bJ()){bL.s=I.Get(bK);bL=bL;}else return false;}else if(bM.MoveNext()){bL.c=bM.Current();return true;}else{bM.Dispose();bL.s=null;bL=bL;}}},function(bL){var bM;bM=bL.s;!bu.Equals(bM,null)?bM.Dispose():void 0;});}};};bo.createEvent=function(bJ,bK,bL){var bM;bM={AddHandler:bJ,RemoveHandler:bK,Subscribe:function(bN){var bO;bO=bL(function(){return function(bP){return bN.OnNext(bP);};});bJ(bO);return{Dispose:function(){return bK(bO);}};}};j.New.call(bM);return bM;};M.allPairs=function(bJ,bK){var bL;bL=M.cache(bK);return M.collect(function(bM){return M.map(function(bN){return[bM,bN];},bL);},bJ);};M.append=function(bJ,bK){return{GetEnumerator:function(){var bL,bM;bL=I.Get(bJ);bM=[true];return new J.New(bL,null,function(bN){var bO;return bN.s.MoveNext()?(bN.c=bN.s.Current(),true):(bO=bN.s,!bu.Equals(bO,null)?bO.Dispose():void 0,bN.s=null,bM[0]&&(bM[0]=false,bN.s=I.Get(bK),bN.s.MoveNext()?(bN.c=bN.s.Current(),true):(bN.s.Dispose(),bN.s=null,false)));},function(bN){var bO;bO=bN.s;!bu.Equals(bO,null)?bO.Dispose():void 0;});}};};M.average=function(bJ){var bK,bL;bK=M.fold(function(bM,bN){return(function(bO){var bP,bQ;bP=bO[0];bQ=bO[1];return function(bR){return[bP+1,bQ+bR];};}(bM))(bN);},[0,0],bJ);bL=bK[0];return bL===0?M.seqEmpty():bK[1]/bL;};M.averageBy=function(bJ,bK){var bL,bM;bL=M.fold(function(bN,bO){return(function(bP){var bQ,bR;bQ=bP[0];bR=bP[1];return function(bS){return[bQ+1,bR+bJ(bS)];};}(bN))(bO);},[0,0],bK);bM=bL[0];return bM===0?M.seqEmpty():bL[1]/bM;};M.cache=function(bJ){var bK,bL;bK=[];bL=[I.Get(bJ)];return{GetEnumerator:function(){return new J.New(0,null,function(bM){var bN;return bM.s<bK.length?(bM.c=bK[bM.s],bM.s=bM.s+1,true):(bN=bL[0],bu.Equals(bN,null)?false:bN.MoveNext()?(bM.s=bM.s+1,bM.c=bN.Current(),bK.push(bM.c),true):(bN.Dispose(),bL[0]=null,false));},void 0);}};};M.choose=function(bJ,bK){return M.collect(function(bL){var bM;bM=bJ(bL);return bM==null?bh.Empty:N.ofArray([bM.$0]);},bK);};M.collect=function(bJ,bK){return M.concat(M.map(bJ,bK));};M.compareWith=function(bJ,bK,bL){var bM,bN,bO,bP,bQ;bM=I.Get(bK);try{bO=I.Get(bL);try{bP=0;bQ=true;while(bQ&&bP===0)if(bM.MoveNext())bP=bO.MoveNext()?bJ(bM.Current(),bO.Current()):1;else if(bO.MoveNext())bP=-1;else bQ=false;bN=bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};M.concat=function(bJ){return{GetEnumerator:function(){var bK;bK=I.Get(bJ);return new J.New(null,null,function(bL){var bM;while(true){bM=bL.s;if(bu.Equals(bM,null)){if(bK.MoveNext()){bL.s=I.Get(bK.Current());bL=bL;}else{bK.Dispose();return false;}}else if(bM.MoveNext()){bL.c=bM.Current();return true;}else{bL.Dispose();bL.s=null;bL=bL;}}},function(bL){var bM;bM=bL.s;!bu.Equals(bM,null)?bM.Dispose():void 0;!bu.Equals(bK,null)?bK.Dispose():void 0;});}};};M.countBy=function(bJ,bK){return M.delay(function(){return L.countBy(bJ,L.ofSeq(bK));});};M.delay=function(bJ){return{GetEnumerator:function(){return I.Get(bJ());}};};M.distinct=function(bJ){return M.distinctBy(a.id,bJ);};M.distinctBy=function(bJ,bK){return{GetEnumerator:function(){var bL,bM;bL=I.Get(bK);bM=new bd.New$3();return new J.New(null,null,function(bN){var bO,bP;if(bL.MoveNext()){bO=bL.Current();bP=bM.Add(bJ(bO));while(!bP&&bL.MoveNext()){bO=bL.Current();bP=bM.Add(bJ(bO));}return bP&&(bN.c=bO,true);}else return false;},function(){bL.Dispose();});}};};M.splitInto=function(bJ,bK){bJ<=0?A.FailWith("Count must be positive"):void 0;return M.delay(function(){return L.splitInto(bJ,L.ofSeq(bK));});};M.exactlyOne=function(bJ){var bK,bL;bK=I.Get(bJ);try{return bK.MoveNext()?(bL=bK.Current(),bK.MoveNext()?A.InvalidOp("Sequence contains more than one element"):bL):A.InvalidOp("Sequence contains no elements");}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.tryExactlyOne=function(bJ){var bK,bL;bK=I.Get(bJ);try{return bK.MoveNext()?(bL=bK.Current(),bK.MoveNext()?null:{$:1,$0:bL}):null;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.exists=function(bJ,bK){var bL,bM;bL=I.Get(bK);try{bM=false;while(!bM&&bL.MoveNext())bM=bJ(bL.Current());return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.exists2=function(bJ,bK,bL){var bM,bN,bO,bP;bM=I.Get(bK);try{bO=I.Get(bL);try{bP=false;while(!bP&&bM.MoveNext()&&bO.MoveNext())bP=bJ(bM.Current(),bO.Current());bN=bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};M.filter=function(bJ,bK){return{GetEnumerator:function(){var bL;bL=I.Get(bK);return new J.New(null,null,function(bM){var bN,bO,bP;bN=bL.MoveNext();bO=bL.Current();bP=false;while(bN)if(bJ(bO)){bM.c=bO;bP=true;bN=false;}else if(bL.MoveNext())bO=bL.Current();else bN=false;return bP;},function(){bL.Dispose();});}};};M.find=function(bJ,bK){var bL;bL=M.tryFind(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};M.findIndex=function(bJ,bK){var bL;bL=M.tryFindIndex(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};M.fold=function(bJ,bK,bL){var bM,bN;bM=bK;bN=I.Get(bL);try{while(bN.MoveNext())bM=bJ(bM,bN.Current());return bM;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};M.forall=function(bJ,bK){return!M.exists(function(bL){return!bJ(bL);},bK);};M.forall2=function(bJ,bK,bL){return!M.exists2(function(bM,bN){return!bJ(bM,bN);},bK,bL);};M.groupBy=function(bJ,bK){return M.delay(function(){return L.groupBy(bJ,L.ofSeq(bK));});};M.head=function(bJ){var bK;bK=I.Get(bJ);try{return bK.MoveNext()?bK.Current():M.insufficient();}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.init=function(bJ,bK){return M.take(bJ,M.initInfinite(bK));};M.initInfinite=function(bJ){return{GetEnumerator:function(){return new J.New(0,null,function(bK){bK.c=bJ(bK.s);bK.s=bK.s+1;return true;},void 0);}};};M.isEmpty=function(bJ){var bK;bK=I.Get(bJ);try{return!bK.MoveNext();}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.iter=function(bJ,bK){var bL;bL=I.Get(bK);try{while(bL.MoveNext())bJ(bL.Current());}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.iter2=function(bJ,bK,bL){var bM,bN,bO;bM=I.Get(bK);try{bO=I.Get(bL);try{while(bM.MoveNext()&&bO.MoveNext())bJ(bM.Current(),bO.Current());bN=void 0;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};M.iteri=function(bJ,bK){var bL,bM;bL=0;bM=I.Get(bK);try{while(bM.MoveNext()){bJ(bL,bM.Current());bL=bL+1;}}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};M.length=function(bJ){var bK,bL;bK=0;bL=I.Get(bJ);try{while(bL.MoveNext())bK=bK+1;return bK;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.map=function(bJ,bK){return{GetEnumerator:function(){var bL;bL=I.Get(bK);return new J.New(null,null,function(bM){return bL.MoveNext()&&(bM.c=bJ(bL.Current()),true);},function(){bL.Dispose();});}};};M.mapi=function(bJ,bK){return M.map2(bJ,M.initInfinite(a.id),bK);};M.map2=function(bJ,bK,bL){return{GetEnumerator:function(){var bM,bN;bM=I.Get(bK);bN=I.Get(bL);return new J.New(null,null,function(bO){return bM.MoveNext()&&bN.MoveNext()&&(bO.c=bJ(bM.Current(),bN.Current()),true);},function(){bM.Dispose();bN.Dispose();});}};};M.maxBy=function(bJ,bK){var bL,bM,bN,bO,bP;bL=I.Get(bK);try{if(!bL.MoveNext())M.seqEmpty();bM=bL.Current();bN=bJ(bM);while(bL.MoveNext()){bO=bL.Current();bP=bJ(bO);bu.Compare(bP,bN)===1?(bM=bO,bN=bP):void 0;}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.minBy=function(bJ,bK){var bL,bM,bN,bO,bP;bL=I.Get(bK);try{if(!bL.MoveNext())M.seqEmpty();bM=bL.Current();bN=bJ(bM);while(bL.MoveNext()){bO=bL.Current();bP=bJ(bO);bu.Compare(bP,bN)===-1?(bM=bO,bN=bP):void 0;}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.max=function(bJ){var bK,bL,bM;bK=I.Get(bJ);try{if(!bK.MoveNext())M.seqEmpty();bL=bK.Current();while(bK.MoveNext()){bM=bK.Current();bu.Compare(bM,bL)===1?bL=bM:void 0;}return bL;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.min=function(bJ){var bK,bL,bM;bK=I.Get(bJ);try{if(!bK.MoveNext())M.seqEmpty();bL=bK.Current();while(bK.MoveNext()){bM=bK.Current();bu.Compare(bM,bL)===-1?bL=bM:void 0;}return bL;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};M.nth=function(bJ,bK){var bL,bM;if(bJ<0)A.FailWith("negative index requested");bL=-1;bM=I.Get(bK);try{while(bL<bJ){!bM.MoveNext()?M.insufficient():void 0;bL=bL+1;}return bM.Current();}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};M.pairwise=function(bJ){return M.map(function(bK){return[L.get(bK,0),L.get(bK,1)];},M.windowed(2,bJ));};M.pick=function(bJ,bK){var bL;bL=M.tryPick(bJ,bK);return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};M.readOnly=function(bJ){return{GetEnumerator:function(){return I.Get(bJ);}};};M.reduce=function(bJ,bK){var bL,bM;bL=I.Get(bK);try{if(!bL.MoveNext())M.seqEmpty();bM=bL.Current();while(bL.MoveNext())bM=bJ(bM,bL.Current());return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.scan=function(bJ,bK,bL){return{GetEnumerator:function(){var bM;bM=I.Get(bL);return new J.New(false,null,function(bN){return bN.s?bM.MoveNext()&&(bN.c=bJ(bN.c,bM.Current()),true):(bN.c=bK,bN.s=true,true);},function(){bM.Dispose();});}};};M.skip=function(bJ,bK){return{GetEnumerator:function(){var bL;bL=I.Get(bK);return new J.New(true,null,function(bM){var bN,bO;if(bM.s){for(bN=1,bO=bJ;bN<=bO;bN++)if(!bL.MoveNext())M.insufficient();bM.s=false;}else null;return bL.MoveNext()&&(bM.c=bL.Current(),true);},function(){bL.Dispose();});}};};M.skipWhile=function(bJ,bK){return{GetEnumerator:function(){var bL;bL=I.Get(bK);return new J.New(true,null,function(bM){var bN,bO;if(bM.s){bN=true;bO=false;while(bN)if(bL.MoveNext()){if(!bJ(bL.Current()))bN=false;}else{bN=false;bO=true;}bM.s=false;return bO?false:(bM.c=bL.Current(),true);}else return bL.MoveNext()&&(bM.c=bL.Current(),true);},function(){bL.Dispose();});}};};M.sort=function(bJ){return M.sortBy(a.id,bJ);};M.sortBy=function(bJ,bK){return M.delay(function(){var bL;bL=L.ofSeq(bK);L.sortInPlaceBy(bJ,bL);return bL;});};M.sortByDescending=function(bJ,bK){return M.delay(function(){var bL;bL=L.ofSeq(bK);L.sortInPlaceByDescending(bJ,bL);return bL;});};M.sortDescending=function(bJ){return M.sortByDescending(a.id,bJ);};M.sum=function(bJ){return M.fold(function(bK,bL){return bK+bL;},0,bJ);};M.sumBy=function(bJ,bK){return M.fold(function(bL,bM){return bL+bJ(bM);},0,bK);};M.take=function(bJ,bK){bJ<0?M.nonNegative():void 0;return{GetEnumerator:function(){var bL;bL=[I.Get(bK)];return new J.New(0,null,function(bM){var bN;bM.s=bM.s+1;return bM.s>bJ?false:(bN=bL[0],bu.Equals(bN,null)?M.insufficient():bN.MoveNext()?(bM.c=bN.Current(),bM.s===bJ?(bN.Dispose(),bL[0]=null):void 0,true):(bN.Dispose(),bL[0]=null,M.insufficient()));},function(){var bM;bM=bL[0];!bu.Equals(bM,null)?bM.Dispose():void 0;});}};};M.takeWhile=function(bJ,bK){return M.delay(function(){return M.enumUsing(I.Get(bK),function(bL){return M.enumWhile(function(){return bL.MoveNext()&&bJ(bL.Current());},M.delay(function(){return[bL.Current()];}));});});};M.transpose=function(bJ){return M.delay(function(){return L.transposeArray(L.ofSeq(M.map(L.ofSeq,bJ)));});};M.truncate=function(bJ,bK){return M.delay(function(){return M.enumUsing(I.Get(bK),function(bL){var bM;bM=[0];return M.enumWhile(function(){return bL.MoveNext()&&bM[0]<bJ;},M.delay(function(){bM[0]++;return[bL.Current()];}));});});};M.tryFind=function(bJ,bK){var bL,bM,bN;bL=I.Get(bK);try{bM=null;while(bM==null&&bL.MoveNext()){bN=bL.Current();bJ(bN)?bM={$:1,$0:bN}:void 0;}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.findBack=function(bJ,bK){var bL;bL=L.tryFindBack(bJ,L.ofSeq(bK));return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};M.tryFindIndex=function(bJ,bK){var bL,bM,bN;bL=I.Get(bK);try{bM=true;bN=0;while(bM&&bL.MoveNext())if(bJ(bL.Current()))bM=false;else bN=bN+1;return bM?null:{$:1,$0:bN};}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.findIndexBack=function(bJ,bK){var bL;bL=L.tryFindIndexBack(bJ,L.ofSeq(bK));return bL==null?A.FailWith("KeyNotFoundException"):bL.$0;};M.tryPick=function(bJ,bK){var bL,bM;bL=I.Get(bK);try{bM=null;while(bu.Equals(bM,null)&&bL.MoveNext())bM=bJ(bL.Current());return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};M.unfold=function(bJ,bK){return{GetEnumerator:function(){return new J.New(bK,null,function(bL){var bM;bM=bJ(bL.s);return bM==null?false:(bL.c=bM.$0[0],bL.s=bM.$0[1],true);},void 0);}};};M.windowed=function(bJ,bK){bJ<=0?A.FailWith("The input must be positive."):void 0;return M.delay(function(){return M.enumUsing(I.Get(bK),function(bL){var bM;bM=[];return M.append(M.enumWhile(function(){return bM.length<bJ&&bL.MoveNext();},M.delay(function(){bM.push(bL.Current());return[];})),M.delay(function(){return bM.length===bJ?M.append([bM.slice(0)],M.delay(function(){return M.enumWhile(function(){return bL.MoveNext();},M.delay(function(){bM.shift();bM.push(bL.Current());return[bM.slice(0)];}));})):[];}));});});};M.zip=function(bJ,bK){return M.map2(function(bL,bM){return[bL,bM];},bJ,bK);};M.map3=function(bJ,bK,bL,bM){return{GetEnumerator:function(){var bN,bO,bP;bN=I.Get(bK);bO=I.Get(bL);bP=I.Get(bM);return new J.New(null,null,function(bQ){return bN.MoveNext()&&bO.MoveNext()&&bP.MoveNext()&&(bQ.c=bJ(bN.Current(),bO.Current(),bP.Current()),true);},function(){bN.Dispose();bO.Dispose();bP.Dispose();});}};};M.zip3=function(bJ,bK,bL){return M.map3(function(bM,bN,bO){return[bM,bN,bO];},bJ,bK,bL);};M.fold2=function(bJ,bK,bL,bM){return L.fold2(bJ,bK,L.ofSeq(bL),L.ofSeq(bM));};M.foldBack=function(bJ,bK,bL){return L.foldBack(bJ,L.ofSeq(bK),bL);};M.foldBack2=function(bJ,bK,bL,bM){return L.foldBack2(bJ,L.ofSeq(bK),L.ofSeq(bL),bM);};M.iteri2=function(bJ,bK,bL){var bM,bN,bO,bP;bM=0;bN=I.Get(bK);try{bP=I.Get(bL);try{while(bN.MoveNext()&&bP.MoveNext()){bJ(bM,bN.Current(),bP.Current());bM=bM+1;}bO=void 0;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}bO;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};M.mapi2=function(bJ,bK,bL){return M.map3(bJ,M.initInfinite(a.id),bK,bL);};M.mapFold=function(bJ,bK,bL){return L.mapFold(bJ,bK,L.ofSeq(bL));};M.mapFoldBack=function(bJ,bK,bL){return L.mapFoldBack(bJ,L.ofSeq(bK),bL);};M.permute=function(bJ,bK){return M.delay(function(){return L.permute(bJ,L.ofSeq(bK));});};M.reduceBack=function(bJ,bK){return L.reduceBack(bJ,L.ofSeq(bK));};M.replicate=function(bJ,bK){bJ<0?M.nonNegative():void 0;return M.delay(function(){return M.map(function(){return bK;},A.range(0,bJ-1));});};M.rev=function(bJ){return M.delay(function(){return L.ofSeq(bJ).slice().reverse();});};M.scanBack=function(bJ,bK,bL){return M.delay(function(){return L.scanBack(bJ,L.ofSeq(bK),bL);});};M.indexed=function(bJ){return M.mapi(function(bK,bL){return[bK,bL];},bJ);};M.sortWith=function(bJ,bK){return M.delay(function(){var bL;bL=L.ofSeq(bK);L.sortInPlaceWith(bJ,bL);return bL;});};M.tail=function(bJ){return M.skip(1,bJ);};M.seqEmpty=function(){return A.FailWith("The input sequence was empty.");};bp.CopyTo=function(bJ,bK,bL){L.blit(bK,0,bK,bL,L.length(bJ));};bp.Contains=function(bJ,bK){return M.exists(function(bL){return bu.Equals(bK,bL);},bJ);};bp.Clear=function(bJ){bJ.splice(0,L.length(bJ));};bq.RegexEscape=function(bJ){return bJ.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bq.SplitWith=function(bJ,bK){return bJ.split(bK);};bq.Join=function(bJ,bK){return bK.join(bJ);};bq.TrimEndWS=function(bJ){return bJ.replace(new a.RegExp("\\s+$"),"");};bq.TrimStartWS=function(bJ){return bJ.replace(new a.RegExp("^\\s+"),"");};bq.Trim=function(bJ){return bJ.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bq.StartsWith=function(bJ,bK){return bJ.substring(0,bK.length)==bK;};bq.Substring=function(bJ,bK,bL){return bJ.substr(bK,bL);};bq.ReplaceOnce=function(bJ,bK,bL){return bJ.replace(bK,bL);};bq.Remove=function(bJ,bK,bL){return bJ.substring(0,bK)+bJ.substring(bK+bL);};bq.PadRightWith=function(bJ,bK,bL){return bK>bJ.length?bJ+a.Array(bK-bJ.length+1).join(bL):bJ;};bq.PadLeftWith=function(bJ,bK,bL){return bK>bJ.length?a.Array(bK-bJ.length+1).join(bL)+bJ:bJ;};bq.LastIndexOf=function(bJ,bK,bL){return bJ.lastIndexOf(bK,bL);};bq.IsNullOrWhiteSpace=function(bJ){return bJ==null||(new a.RegExp("^\\s*$")).test(bJ);};bq.IsNullOrEmpty=function(bJ){return bJ==null||bJ=="";};bq.Insert=function(bJ,bK,bL){return bJ.substring(0,bK-1)+bL+bJ.substring(bK);};bq.IndexOf=function(bJ,bK,bL){return bJ.indexOf(bK,bL);};bq.EndsWith=function(bJ,bK){return bJ.substring(bJ.length-bK.length)==bK;};bq.collect=function(bJ,bK){return L.init(bK.length,function(bL){return bJ(bK[bL]);}).join("");};bq.concat=function(bJ,bK){return L.ofSeq(bK).join(bJ);};bq.exists=function(bJ,bK){return M.exists(bJ,bq.protect(bK));};bq.forall=function(bJ,bK){return M.forall(bJ,bq.protect(bK));};bq.init=function(bJ,bK){return L.init(bJ,bK).join("");};bq.iter=function(bJ,bK){M.iter(bJ,bq.protect(bK));};bq.iteri=function(bJ,bK){M.iteri(bJ,bq.protect(bK));};bq.length=function(bJ){return bq.protect(bJ).length;};bq.map=function(bJ,bK){return bq.collect(bJ,bq.protect(bK));};bq.mapi=function(bJ,bK){return L.ofSeq(M.mapi(bJ,bK)).join("");};bq.replicate=function(bJ,bK){return L.create(bJ,bK).join("");};bq.protect=function(bJ){return bJ===null?"":bJ;};bq.SFormat=function(bJ,bK){return bJ.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bL,bM,bN){var bO,bP,bQ;bO=bF(L.get(bK,+bM));return!bu.Equals(bN,void 0)?(bP=+bN,(bQ=bI.abs(bP),bQ>bO.length?bP>0?bq.PadLeft(bO,bQ):bq.PadRight(bO,bQ):bO)):bO;});};bq.Filter=function(bJ,bK){return L.ofSeq(M.choose(function(bL){return bJ(bL)?{$:1,$0:bL}:null;},bK)).join("");};bq.SplitStrings=function(bJ,bK,bL){return bq.Split(bJ,new a.RegExp(bq.concat("|",L.map(bq.RegexEscape,bK))),bL);};bq.SplitChars=function(bJ,bK,bL){return bq.Split(bJ,new a.RegExp("["+bq.RegexEscape(bK.join(""))+"]"),bL);};bq.Split=function(bJ,bK,bL){return bL===1?L.filter(function(bM){return bM!=="";},bq.SplitWith(bJ,bK)):bq.SplitWith(bJ,bK);};bq.TrimEnd=function(bJ,bK){var bL,bM;if(bu.Equals(bK,null)||bK.length==0)return bq.TrimEndWS(bJ);else{bL=bJ.length-1;bM=true;while(bL>=0&&bM)(function(){var bN;bN=bJ[bL];return L.exists(function(bO){return bN===bO;},bK)?void(bL=bL-1):void(bM=false);}());return bq.Substring(bJ,0,bL+1);}};bq.TrimStart=function(bJ,bK){var bL,bM;if(bu.Equals(bK,null)||bK.length==0)return bq.TrimStartWS(bJ);else{bL=0;bM=true;while(bL<bJ.length&&bM)(function(){var bN;bN=bJ[bL];return L.exists(function(bO){return bN===bO;},bK)?void(bL=bL+1):void(bM=false);}());return bJ.substring(bL);}};bq.ToCharArrayRange=function(bJ,bK,bL){return L.init(bL,function(bM){return bJ[bK+bM];});};bq.ToCharArray=function(bJ){return L.init(bJ.length,function(bK){return bJ[bK];});};bq.ReplaceChar=function(bJ,bK,bL){return bq.Replace(bJ,bK,bL);};bq.Replace=function(bJ,bK,bL){function bM(bN){var bO,bP,bQ;bO=bN.indexOf(bK);return bO!==-1?(bP=bq.ReplaceOnce(bN,bK,bL),(bQ=bO+bL.length,bq.Substring(bP,0,bO+bL.length)+bM(bP.substring(bQ)))):bN;}return bM(bJ);};bq.PadRight=function(bJ,bK){return bq.PadRightWith(bJ,bK," ");};bq.PadLeft=function(bJ,bK){return bq.PadLeftWith(bJ,bK," ");};bq.CopyTo=function(bJ,bK,bL,bM,bN){L.blit(bq.ToCharArray(bJ),bK,bL,bM,bN);};bq.Compare=function(bJ,bK){return bu.Compare(bJ,bK);};br=b.Task=bC.Class({Start:function(){var bJ;bJ=this;this.status===0?(this.status=2,D.scheduler().Fork(function(){var bK;bJ.status=3;try{bJ.Execute();bJ.status=5;}catch(bL){bL instanceof _2&&(bu.Equals(bL.ct,bJ.token)&&(bK=bL,true))?(bH.log("Task cancellation caught:",bK),bJ.exc=new _7.New$3([bK]),bJ.status=6):(bH.log("Task error caught:",bL),bJ.exc=new _7.New$3([bL]),bJ.status=7);}bJ.RunContinuations();})):A.InvalidOp("Task not in initial state");},StartContinuation:function(){var bJ;bJ=this;this.status===1?(this.status=2,D.scheduler().Fork(function(){if(bJ.status===2){bJ.status=3;try{bJ.Execute();bJ.status=5;}catch(bK){bJ.exc=new _7.New$3([bK]);bJ.status=7;}bJ.RunContinuations();}})):void 0;},ContinueWith:function(bJ,bK){var bL,bM;bL=this;bM=new bs.New$4(function(){return bJ(bL);},bK,1,null,void 0);this.get_IsCompleted()?bM.StartContinuation():this.continuations.push(bM);return bM;},ContinueWith$1:function(bJ,bK){var bL,bM;bL=this;bM=new br.New$4(function(){return bJ(bL);},bK,1,null);this.get_IsCompleted()?bM.StartContinuation():this.continuations.push(bM);return bM;},RunContinuations:function(){var bJ,bK,bL;bJ=this.continuations;for(bK=0,bL=bJ.length-1;bK<=bL;bK++)L.get(bJ,bK).StartContinuation();},OnCompleted:function(bJ){if(this.get_IsCompleted())bJ();else{this.get_Status()===0?this.Start():void 0;this.ContinueWith$1(function(){return bJ();},D.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return this.status===7;},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},get_IsCanceled:function(){return this.status===6;},get_Exception:function(){return this.exc;},Execute:function(){this.action();}},j,br);br.Yield=function(){return new br.New$3(function(){return null;});};br.WhenAll=function(bJ){var bK,bL,bM,bN,bO,bP;bK=L.length(bJ);bL=[0];bM=new a.Array(bK);bN=new bt.New();for(bO=0,bP=bK-1;bO<=bP;bO++)(function(bQ){L.get(bJ,bO).ContinueWith$1(function(bR){return bR.get_IsFaulted()?void bN.TrySetException$1(bR.get_Exception()):bR.get_IsCanceled()?void bN.TrySetCanceled$1():(bL[0]++,bM[bQ]=bR.get_Result(),bL[0]===bK?bN.SetResult(bM):null);},D.noneCT());}(bO));return bN.get_Task();};br.WhenAll$1=function(bJ){var bK,bL,bM,bN,bO;bK=L.length(bJ);bL=[0];bM=new bt.New();for(bN=0,bO=bK-1;bN<=bO;bN++)L.get(bJ,bN).ContinueWith$1(function(bP){return bP.get_IsFaulted()?void bM.TrySetException$1(bP.get_Exception()):bP.get_IsCanceled()?void bM.TrySetCanceled$1():(bL[0]++,bL[0]===bK?void bM.TrySetResult():null);},D.noneCT());return bM.get_Task();};br.WhenAny=function(bJ){var bK,bL,bM;bK=new bt.New();for(bL=0,bM=bJ.length-1;bL<=bM;bL++)L.get(bJ,bL).ContinueWith(function(bN){bK.TrySetResult(bN);},D.noneCT());return bK.get_Task();};br.WhenAny$1=function(bJ){var bK,bL,bM;bK=new bt.New();for(bL=0,bM=bJ.length-1;bL<=bM;bL++)L.get(bJ,bL).ContinueWith$1(function(bN){bK.TrySetResult(bN);},D.noneCT());return bK.get_Task();};br.Delay=function(bJ,bK){return D.StartAsTask(D.Sleep(bJ),{$:1,$0:bK});};br.Delay$1=function(bJ){return D.StartAsTask(D.Sleep(bJ),null);};br.Run=function(bJ,bK){var bL;bL=bJ();return bK.c?br.FromCanceled(bK):(bL.get_Status()===0?bL.Start():void 0,bL);};br.Run$1=function(bJ,bK){var bL;bL=new bs.New$4(bJ,bK,0,null,void 0);bL.Start();return bL;};br.Run$2=function(bJ,bK){var bL;bL=bJ();return bK.c?br.FromCanceled$1(bK):(bL.get_Status()===0?bL.Start():void 0,bL);};br.Run$3=function(bJ,bK){var bL;bL=new br.New$4(bJ,bK,0,null);bL.Start();return bL;};br.FromResult=function(bJ){return new bs.New$4(null,D.noneCT(),5,null,bJ);};br.FromException=function(bJ){return new bs.New$4(null,D.noneCT(),7,new _7.New$3([bJ]),null);};br.FromException$1=function(bJ){return new br.New$4(null,D.noneCT(),7,new _7.New$3([bJ]));};br.FromCanceled=function(bJ){return new bs.New$4(null,bJ,6,new _7.New$3([new $.New()]),null);};br.FromCanceled$1=function(bJ){return new br.New$4(null,bJ,6,new _7.New$3([new $.New()]));};br.New=bC.Ctor(function(bJ,bK,bL){br.New$4.call(this,function(){return bJ(bK);},bL,0,null);},br);br.New$1=bC.Ctor(function(bJ,bK){br.New$4.call(this,function(){return bJ(bK);},D.noneCT(),0,null);},br);br.New$2=bC.Ctor(function(bJ,bK){br.New$4.call(this,bJ,bK,0,null);},br);br.New$3=bC.Ctor(function(bJ){br.New$4.call(this,bJ,D.noneCT(),0,null);},br);br.New$4=bC.Ctor(function(bJ,bK,bL,bM){j.New.call(this);this.action=bJ;this.token=bK;this.status=bL;this.continuations=[];this.exc=bM;},br);bs=b.Task1=bC.Class({Execute:function(){this.result=this.func();},get_Result:function(){var bJ;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return A.InvalidOp("Task has not been completed, has no Result");}}},br,bs);bs.New=bC.Ctor(function(bJ,bK,bL){bs.New$4.call(this,function(){return bJ(bK);},bL,0,null,void 0);},bs);bs.New$1=bC.Ctor(function(bJ,bK){bs.New$4.call(this,function(){return bJ(bK);},D.noneCT(),0,null,void 0);},bs);bs.New$2=bC.Ctor(function(bJ,bK){bs.New$4.call(this,bJ,bK,0,null,void 0);},bs);bs.New$3=bC.Ctor(function(bJ){bs.New$4.call(this,bJ,D.noneCT(),0,null,void 0);},bs);bs.New$4=bC.Ctor(function(bJ,bK,bL,bM,bN){br.New$4.call(this,null,bK,bL,bM);this.func=bJ;this.result=bN;},bs);bt=b.TaskCompletionSource=bC.Class({TrySetResult:function(bJ){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bJ,this.task.RunContinuations(),true);},TrySetException:function(bJ){return this.TrySetException$1(new _7.New$2(bJ));},TrySetException$1:function(bJ){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _7.New$3([bJ]),this.task.RunContinuations(),true);},TrySetCanceled:function(bJ){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=bJ,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bJ){this.task.get_IsCompleted()?A.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bJ;this.task.RunContinuations();},SetException:function(bJ){this.SetException$1(new _7.New$2(bJ));},SetException$1:function(bJ){this.task.get_IsCompleted()?A.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _7.New$3([bJ]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?A.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},j,bt);bt.New=bC.Ctor(function(){j.New.call(this);this.task=new bs.New$4(null,D.noneCT(),1,null,void 0);},bt);bu.Hash=function(bJ){var bK;bK=typeof bJ;return bK=="function"?0:bK=="boolean"?bJ?1:0:bK=="number"?bJ:bK=="string"?bu.hashString(bJ):bK=="object"?bJ==null?0:bJ instanceof a.Array?bu.hashArray(bJ):bu.hashObject(bJ):0;};bu.hashObject=function(bJ){var bK,bL;if("GetHashCode"in bJ)return bJ.GetHashCode();else{bK=[0];for(var bM in bJ)if(function(bN){bK[0]=bu.hashMix(bu.hashMix(bK[0],bu.hashString(bN)),bu.Hash(bJ[bN]));return false;}(bM))break;return bK[0];}};bu.hashString=function(bJ){var bK,bL,bM;if(bJ===null)return 0;else{bK=5381;for(bL=0,bM=bJ.length-1;bL<=bM;bL++)bK=bu.hashMix(bK,bJ[bL].charCodeAt());return bK;}};bu.hashArray=function(bJ){var bK,bL,bM;bK=-34948909;for(bL=0,bM=L.length(bJ)-1;bL<=bM;bL++)bK=bu.hashMix(bK,bu.Hash(L.get(bJ,bL)));return bK;};bu.hashMix=function(bJ,bK){return(bJ<<5)+bJ+bK;};bu.Equals=function(bJ,bK){var bL,bM,bN,bO;if(bJ===bK)return true;else{bL=typeof bJ;if(bL=="object"){if(bJ===null||bJ===void 0||bK===null||bK===void 0)return false;else if("Equals"in bJ)return bJ.Equals(bK);else if(bJ instanceof a.Array&&bK instanceof a.Array)return bu.arrayEquals(bJ,bK);else if(bJ instanceof bG&&bK instanceof bG)return bu.dateEquals(bJ,bK);else{bM=[true];for(var bP in bJ)if(function(bQ){bM[0]=!bJ.hasOwnProperty(bQ)||bK.hasOwnProperty(bQ)&&bu.Equals(bJ[bQ],bK[bQ]);return!bM[0];}(bP))break;if(bM[0]){for(var bQ in bK)if(function(bR){bM[0]=!bK.hasOwnProperty(bR)||bJ.hasOwnProperty(bR);return!bM[0];}(bQ))break;}return bM[0];}}else return bL=="function"&&("$Func"in bJ?bJ.$Func===bK.$Func&&bJ.$Target===bK.$Target:"$Invokes"in bJ&&"$Invokes"in bK&&bu.arrayEquals(bJ.$Invokes,bK.$Invokes));}};bu.dateEquals=function(bJ,bK){return bJ.getTime()===bK.getTime();};bu.arrayEquals=function(bJ,bK){var bL,bM;if(L.length(bJ)===L.length(bK)){bL=true;bM=0;while(bL&&bM<L.length(bJ)){!bu.Equals(L.get(bJ,bM),L.get(bK,bM))?bL=false:void 0;bM=bM+1;}return bL;}else return false;};bu.Compare=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;if(bJ===bK)return 0;else{bM=typeof bJ;switch(bM=="function"?1:bM=="boolean"?2:bM=="number"?2:bM=="string"?2:bM=="object"?3:0){case 0:return typeof bK=="undefined"?0:-1;case 1:return A.FailWith("Cannot compare function values.");case 2:return bJ<bK?-1:1;case 3:if(bJ===null)bN=-1;else if(bK===null)bN=1;else if("CompareTo"in bJ)bN=bJ.CompareTo(bK);else if("CompareTo0"in bJ)bN=bJ.CompareTo0(bK);else if(bJ instanceof a.Array&&bK instanceof a.Array)bN=bu.compareArrays(bJ,bK);else if(bJ instanceof bG&&bK instanceof bG)bN=bu.compareDates(bJ,bK);else{bO=[0];for(var bR in bJ)if(function(bS){return!bJ.hasOwnProperty(bS)?false:!bK.hasOwnProperty(bS)?(bO[0]=1,true):(bO[0]=bu.Compare(bJ[bS],bK[bS]),bO[0]!==0);}(bR))break;if(bO[0]===0){for(var bS in bK)if(function(bT){return!bK.hasOwnProperty(bT)?false:!bJ.hasOwnProperty(bT)&&(bO[0]=-1,true);}(bS))break;}bN=bO[0];}return bN;}}};bu.compareDates=function(bJ,bK){return bu.Compare(bJ.getTime(),bK.getTime());};bu.compareArrays=function(bJ,bK){var bL,bM;if(L.length(bJ)<L.length(bK))return -1;else if(L.length(bJ)>L.length(bK))return 1;else{bL=0;bM=0;while(bL===0&&bM<L.length(bJ)){bL=bu.Compare(L.get(bJ,bM),L.get(bK,bM));bM=bM+1;}return bL;}};by.ValueNone={$:0};by.get_Value=function(bJ){return bJ.$==1?bJ.$0:A.InvalidOp("ValueOption.Value");};bz.filter=function(bJ,bK){var bL;return bK.$==1&&bJ(bK.$0)?bK:by.ValueNone;};bz.fold=function(bJ,bK,bL){return bL.$==0?bK:bJ(bK,bL.$0);};bz.foldBack=function(bJ,bK,bL){return bK.$==0?bL:bJ(bK.$0,bL);};bz.ofNullable=function(bJ){return bJ==null?by.ValueNone:{$:1,$0:B.get(bJ)};};bz.ofObj=function(bJ){return bJ==null?by.ValueNone:{$:1,$0:bJ};};bz.toArray=function(bJ){return bJ.$==0?[]:[bJ.$0];};bz.toList=function(bJ){return bJ.$==0?bh.Empty:N.ofArray([bJ.$0]);};bz.toNullable=function(bJ){return bJ.$==1?bJ.$0:null;};bz.toObj=function(bJ){return bJ.$==0?null:bJ.$0;};bA.TryParseBool=function(bJ,bK){var bL;bL=bJ.toLowerCase();return bL==="true"?(bK.set(true),true):bL==="false"&&(bK.set(false),true);};bA.ParseBool=function(bJ){var bK;bK=bJ.toLowerCase();if(bK==="true")return true;else if(bK==="false")return false;else throw new _9.New$1("String was not recognized as a valid Boolean.");};bA.TryParse=function(bJ,bK,bL,bM){var bN,bO;bN=+bJ;bO=bN===bN-bN%1&&bN>=bK&&bN<=bL;bO?bM.set(bN):void 0;return bO;};bA.Parse=function(bJ,bK,bL,bM){var bN;bN=+bJ;if(bN!==bN-bN%1)throw new _9.New$1("Input string was not in a correct format.");else if(bN<bK||bN>bL)throw new _.New$1(bM);else return bN;};bA.ParseByte=function(bJ){return bA.Parse(bJ,0,255,"Value was either too large or too small for an unsigned byte.");};bA.TryParseByte=function(bJ,bK){return bA.TryParse(bJ,0,255,bK);};bA.ParseSByte=function(bJ){return bA.Parse(bJ,-128,127,"Value was either too large or too small for a signed byte.");};bA.TryParseSByte=function(bJ,bK){return bA.TryParse(bJ,-128,127,bK);};bA.ParseInt16=function(bJ){return bA.Parse(bJ,-32768,32767,"Value was either too large or too small for an Int16.");};bA.TryParseInt16=function(bJ,bK){return bA.TryParse(bJ,-32768,32767,bK);};bA.ParseInt32=function(bJ){return bA.Parse(bJ,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bA.TryParseInt32=function(bJ,bK){return bA.TryParse(bJ,-2147483648,2147483647,bK);};bA.ParseUInt16=function(bJ){return bA.Parse(bJ,0,65535,"Value was either too large or too small for an UInt16.");};bA.TryParseUInt16=function(bJ,bK){return bA.TryParse(bJ,0,65535,bK);};bA.ParseUInt32=function(bJ){return bA.Parse(bJ,0,4294967295,"Value was either too large or too small for an UInt32.");};bA.TryParseUInt32=function(bJ,bK){return bA.TryParse(bJ,0,4294967295,bK);};bA.ParseInt64=function(bJ){return bA.Parse(bJ,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bA.TryParseInt64=function(bJ,bK){return bA.TryParse(bJ,-9223372036854775808,9223372036854775807,bK);};bA.ParseUInt64=function(bJ){return bA.Parse(bJ,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bA.TryParseUInt64=function(bJ,bK){return bA.TryParse(bJ,0,18446744073709551615,bK);};}());
