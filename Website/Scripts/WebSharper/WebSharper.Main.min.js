(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw;a=window;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JSModule=c.JSModule||{};e=c.Pervasives=c.Pervasives||{};f=b.Json=b.Json||{};g=b.Obj=b.Obj||{};h=b.Remoting=b.Remoting||{};i=h.XhrProvider=h.XhrProvider||{};j=h.AjaxRemotingProvider=h.AjaxRemotingProvider||{};k=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};l=b.HtmlContentExtensions=b.HtmlContentExtensions||{};m=l.SingleNode=l.SingleNode||{};n=b.Activator=b.Activator||{};o=b.Collections=b.Collections||{};p=o.EqualityComparer=o.EqualityComparer||{};q=b.Comparers=b.Comparers||{};r=q.EquatableEqualityComparer=q.EquatableEqualityComparer||{};s=q.BaseEqualityComparer=q.BaseEqualityComparer||{};t=o.Comparer=o.Comparer||{};u=q.ComparableComparer=q.ComparableComparer||{};v=q.BaseComparer=q.BaseComparer||{};w=b.Operators=b.Operators||{};x=b.Nullable=b.Nullable||{};y=b.Utils=b.Utils||{};z=b.Concurrency=b.Concurrency||{};A=z.CT=z.CT||{};B=z.AsyncBody=z.AsyncBody||{};C=z.Scheduler=z.Scheduler||{};D=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};E=b.Enumerator=b.Enumerator||{};F=E.T=E.T||{};G=c.Optional=c.Optional||{};H=b.Arrays=b.Arrays||{};I=b.Seq=b.Seq||{};J=b.List=b.List||{};K=b.Arrays2D=b.Arrays2D||{};L=b.CancellationTokenSource=b.CancellationTokenSource||{};M=b.Char=b.Char||{};N=b.Util=b.Util||{};O=b.DateUtil=b.DateUtil||{};P=b.DateTimeOffset=b.DateTimeOffset||{};Q=b.Delegate=b.Delegate||{};R=o.DictionaryUtil=o.DictionaryUtil||{};S=o.KeyCollection=o.KeyCollection||{};T=o.ValueCollection=o.ValueCollection||{};U=o.Dictionary=o.Dictionary||{};V=b.MatchFailureException=b.MatchFailureException||{};W=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};X=b.OperationCanceledException=b.OperationCanceledException||{};Y=b.ArgumentException=b.ArgumentException||{};Z=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_0=b.ArgumentNullException=b.ArgumentNullException||{};_1=b.InvalidOperationException=b.InvalidOperationException||{};_2=b.AggregateException=b.AggregateException||{};_3=b.TimeoutException=b.TimeoutException||{};_4=b.FormatException=b.FormatException||{};_5=b.OverflowException=b.OverflowException||{};_6=a.System=a.System||{};_7=_6.Guid=_6.Guid||{};_8=o.HashSetUtil=o.HashSetUtil||{};_9=o.HashSet=o.HashSet||{};_=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};$=_.LazyRecord=_.LazyRecord||{};ba=b.Lazy=b.Lazy||{};bb=J.T=J.T||{};bc=b.Slice=b.Slice||{};bd=b.Option=b.Option||{};be=b.Queue=b.Queue||{};bf=b.Random=b.Random||{};bg=b.Ref=b.Ref||{};bh=b.Result=b.Result||{};bi=b.Control=b.Control||{};bj=b.Stack=b.Stack||{};bk=b.Strings=b.Strings||{};bl=b.Task=b.Task||{};bm=b.Task1=b.Task1||{};bn=b.TaskCompletionSource=b.TaskCompletionSource||{};bo=b.Unchecked=b.Unchecked||{};bp=b.Numeric=b.Numeric||{};bq=a.IntelliFactory;br=bq&&bq.Runtime;bs=a.JSON;bt=a.String;bu=a.Date;bv=a.console;bw=a.Math;d.GetFieldValues=function(bx){var by,bz;by=[];for(var bA in bx)by.push(bx[bA]);return by;};d.GetFieldNames=function(bx){var by,bz;by=[];for(var bA in bx)by.push(bA);return by;};d.GetFields=function(bx){var by,bz;by=[];for(var bA in bx)by.push([bA,bx[bA]]);return by;};e.GetJS=function(bx,by){var bz,bA;bz=bx;bA=E.Get(by);try{while(bA.MoveNext())bz=bz[bA.Current()];}finally{if("Dispose"in bA)bA.Dispose();}return bz;};e.NewFromSeq=function(bx){var by,bz,bA;by={};bz=E.Get(bx);try{while(bz.MoveNext()){bA=bz.Current();by[bA[0]]=bA[1];}}finally{if("Dispose"in bz)bz.Dispose();}return by;};f.Activate=function(bx){var bz,bA,bB;function by(bC){var bD,bE,bF,bG,bH;if(bo.Equals(bC,null))return bC;else if(typeof bC=="object"){if(bC instanceof a.Array)return f.shallowMap(by,bC);else{bD=f.shallowMap(by,bC.$V);bE=bC.$T;if(bo.Equals(typeof bE,"undefined"))return bD;else{bF=H.get(bz,bE);if(bF===window.WebSharper.List.T)return J.ofArray(bD);else{bG=new(H.get(bz,bE))();for(var bI in bD)if(function(bJ){bG[bJ]=bD[bJ];return false;}(bI))break;return bG;}}}}else return bC;}bz=bx.$TYPES;for(bA=0,bB=H.length(bz)-1;bA<=bB;bA++)H.set(bz,bA,f.lookup(H.get(bz,bA)));return by(bx.$DATA);};f.shallowMap=function(bx,by){var bz,bA;if(by instanceof a.Array)return H.map(bx,by);else if(typeof by=="object"){bz={};for(var bB in by)if(function(bC){bz[bC]=bx(by[bC]);return false;}(bB))break;return bz;}else return by;};f.lookup=function(bx){var by,bz,bA,bB,bC;bA=H.length(bx);by=window;bz=0;while(bz<bA){bB=H.get(bx,bz);bC=by[bB];!bo.Equals(typeof bC,void 0)?(by=bC,bz=bz+1):w.FailWith("Invalid server reply. Failed to find type: "+bB);}return by;};g=b.Obj=br.Class({Equals:function(bx){return this===bx;},GetHashCode:function(){return -1;}},null,g);g.New=br.Ctor(function(){},g);i=h.XhrProvider=br.Class({Sync:function(bx,by,bz){var bA;bA=[null];h.ajax(false,bx,by,bz,function(bB){bA[0]=bB;},function(bB){throw bB;},function(){h.ajax(false,bx,by,bz,function(bB){bA[0]=bB;},function(bB){throw bB;},void 0);});return bA[0];},Async:function(bx,by,bz,bA,bB){h.ajax(true,bx,by,bz,bA,bB,function(){h.ajax(true,bx,by,bz,bA,bB,void 0);});}},g,i);i.New=br.Ctor(function(){},i);j=h.AjaxRemotingProvider=br.Class({get_EndPoint:function(){return h.EndPoint();},AsyncBase:function(bx,by){var bz,bA;bz=this;bA=null;return z.Delay(function(){var bB,bC;bB=h.makeHeaders(bx);bC=h.makePayload(by);return z.Bind(z.GetCT(),function(bD){return z.FromContinuations(function(bE,bF,bG){var bH,bI,bJ;function bK(bL){return bH[0]?(bH[0]=false,bG(new X.New(bD))):null;}bH=[true];bI=z.Register(bD,function(){bK();});bJ=bz.get_EndPoint();return h.AjaxProvider().Async(bJ,bB,bC,function(bL){if(bH[0]){bH[0]=false;bI.Dispose();bE(f.Activate(bs.parse(bL)));}},function(bL){if(bH[0]){bH[0]=false;bI.Dispose();bF(bL);}});});});});},Send:function(bx,by){z.Start(this.AsyncBase(bx,by),null);},Task:function(bx,by){return z.StartAsTask(this.AsyncBase(bx,by),null);},Async:function(bx,by){return this.AsyncBase(bx,by);},Sync:function(bx,by){var bz,bA,bB;return f.Activate(bs.parse((bz=this.get_EndPoint(),(bA=h.makeHeaders(bx),(bB=h.makePayload(by),h.AjaxProvider().Sync(bz,bA,bB))))));}},g,j);j.New=br.Ctor(function(){},j);h.ajax=function(bx,by,bz,bA,bB,bC,bD){var bE,bF,bG;bE=new a.XMLHttpRequest();bF=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bE.open("POST",by,bx);if(bx==true)bE.withCredentials=true;for(var bI in bz)bE.setRequestHeader(bI,bz[bI]);if(bF)bE.setRequestHeader("x-csrftoken",bF);function bH(){var bJ;if(bE.status==200)bB(bE.responseText);else if(bD&&bE.status==403&&bE.responseText=="CSRF")bD();else{bJ="Response status is not 200: ";bC(new a.Error(bJ+bE.status));}}if("onload"in bE)bE.onload=bE.onerror=bE.onabort=bH;else bE.onreadystatechange=function(){if(bE.readyState==4)bH();};bE.send(bA);};h.makePayload=function(bx){return bs.stringify(bx);};h.makeHeaders=function(bx){return{"content-type":"application/json","x-websharper-rpc":bx};};h.AjaxProvider=function(){k.$cctor();return k.AjaxProvider;};h.set_AjaxProvider=function(bx){k.$cctor();k.AjaxProvider=bx;};h.UseHttps=function(){try{return!bk.StartsWith(a.location.href,"https://")&&(h.set_EndPoint(bk.Replace(a.location.href,"http://","https://")),true);}catch(bx){return false;}};h.EndPoint=function(){k.$cctor();return k.EndPoint;};h.set_EndPoint=function(bx){k.$cctor();k.EndPoint=bx;};k.$cctor=function(){k.$cctor=a.ignore;k.EndPoint="?";k.AjaxProvider=new i.New();};m=l.SingleNode=br.Class({ReplaceInDom:function(bx){this.node.parentNode.replaceChild(this.node,bx);}},g,m);m.New=br.Ctor(function(bx){this.node=bx;},m);n.hasDocument=function(){return typeof a.document!=="undefined";};n.Activate=function(){var bx;if(n.hasDocument()){bx=a.document.getElementById("websharper-data");bx?a.jQuery(a.document).ready(function(){function by(bz,bA){bA.Body().ReplaceInDom(a.document.getElementById(bz));}return H.iter(function(bz){return by(bz[0],bz[1]);},d.GetFields(f.Activate(bs.parse(bx.getAttribute("content")))));}):void 0;}};p=o.EqualityComparer=br.Class({CGetHashCode0:function(bx){return this.GetHashCode$1(bx);},CEquals0:function(bx,by){return this.Equals$1(bx,by);},CGetHashCode:function(bx){return this.GetHashCode$1(bx);},CEquals:function(bx,by){return this.Equals$1(bx,by);}},g,p);p.New=br.Ctor(function(){},p);r=q.EquatableEqualityComparer=br.Class({GetHashCode$1:function(bx){return bo.Hash(bx);},Equals$1:function(bx,by){return bx.EEquals(by);}},p,r);r.New=br.Ctor(function(){p.New.call(this);},r);s=q.BaseEqualityComparer=br.Class({GetHashCode$1:function(bx){return bo.Hash(bx);},Equals$1:function(bx,by){return bo.Equals(bx,by);}},p,s);s.New=br.Ctor(function(){p.New.call(this);},s);t=o.Comparer=br.Class({Compare0:function(bx,by){return this.Compare$1(bx,by);},Compare:function(bx,by){return this.Compare$1(bx,by);}},g,t);t.New=br.Ctor(function(){},t);u=q.ComparableComparer=br.Class({Compare$1:function(bx,by){return bx.CompareTo(by);}},t,u);u.New=br.Ctor(function(){t.New.call(this);},u);v=q.BaseComparer=br.Class({Compare$1:function(bx,by){return bo.Compare(bx,by);}},t,v);v.New=br.Ctor(function(){t.New.call(this);},v);w.charRange=function(bx,by){var bz,bA;bz=bx.charCodeAt();bA=1+by.charCodeAt()-bz;return bA<=0?[]:I.init(bA,function(bB){return bt.fromCharCode(bB+bz);});};x.op=function(bx,by,bz){return bx==null||by==null?null:bz(bx,by);};x.opL=function(bx,by,bz){return bx==null?null:bz(bx,by);};x.opR=function(bx,by,bz){return by==null?null:bz(bx,by);};x.cmp=function(bx,by,bz){return bx==null||by==null?false:bz(bx,by);};x.cmpE=function(bx,by,bz){return bx==null?by==null:by==null?false:bz(bx,by);};x.cmpL=function(bx,by,bz){return bx==null?false:bz(bx,by);};x.cmpR=function(bx,by,bz){return by==null?false:bz(bx,by);};x.conv=function(bx,by){return bx==null?null:by(bx);};y.prettyPrint=function(bx){var by,bz;function bA(bB,bC){return bB+" = "+y.prettyPrint(bC);}return bx===null?"null":(by=typeof bx,by=="string"?"\""+bx+"\"":by=="object"?bx instanceof a.Array?"[|"+bk.concat("; ",H.map(y.prettyPrint,bx))+"|]":(bz=bt(bx),bz==="[object Object]"?"{"+bk.concat("; ",H.map(function(bB){return bA(bB[0],bB[1]);},d.GetFields(bx)))+"}":bz):bt(bx));};y.printArray2D=function(bx,by){return by===null?"null":"[["+bk.concat("][",I.delay(function(){var bz;bz=by.length?by[0].length:0;return I.map(function(bA){return bk.concat("; ",I.delay(function(){return I.map(function(bB){return bx(H.get2D(by,bA,bB));},w.range(0,bz-1));}));},w.range(0,by.length-1));}))+"]]";};y.printArray=function(bx,by){return by===null?"null":"[|"+bk.concat("; ",H.map(bx,by))+"|]";};y.printList=function(bx,by){return"["+bk.concat("; ",I.map(bx,by))+"]";};y.padNumLeft=function(bx,by){var bz;bz=H.get(bx,0);return bz===" "||bz==="+"||bz==="-"?bz+bk.PadLeftWith(bx.substr(1),by-1,"0"):bk.PadLeftWith(bx,by,"0");};y.spaceForPos=function(bx,by){return 0<=bx?" "+by:by;};y.plusForPos=function(bx,by){return 0<=bx?"+"+by:by;};y.toSafe=function(bx){return bx==null?"":bx;};A.New=function(bx,by){return{c:bx,r:by};};B.New=function(bx,by){return{k:bx,ct:by};};C=z.Scheduler=br.Class({tick:function(){var bx,by,bz;by=this;bz=bu.now();bx=true;while(bx)if(this.robin.length===0){this.idle=true;bx=false;}else{(this.robin.shift())();bu.now()-bz>40?(a.setTimeout(function(){by.tick();},0),bx=false):void 0;}},Fork:function(bx){var by;by=this;this.robin.push(bx);this.idle?(this.idle=false,a.setTimeout(function(){by.tick();},0)):void 0;}},g,C);C.New=br.Ctor(function(){this.idle=true;this.robin=[];},C);z.For=function(bx,by){return z.Using(E.Get(bx),function(bz){return z.While(function(){return bz.MoveNext();},z.Delay(function(){return by(bz.Current());}));});};z.While=function(bx,by){return bx()?z.Bind(by,function(){return z.While(bx,by);}):z.Return();};z.Using=function(bx,by){return z.TryFinally(by(bx),function(){bx.Dispose();});};z.TryCancelled=function(bx,by){return function(bz){bx(B.New(function(bA){if(bA.$==2){by(bA.$0);bz.k(bA);}else bz.k(bA);},bz.ct));};};z.OnCancel=function(bx){return function(by){by.k({$:0,$0:z.Register(by.ct,bx)});};};z.StartChild=function(bx,by){return function(bz){var bA,bB,bC,bD;bA=[true];bB=[null];bC=[];bD=by!=null&&by.$==1?{$:1,$0:a.setTimeout(function(){var bE;bA[0]=false;bE={$:1,$0:new _3.New()};while(bC.length>0)(bC.shift())(bE);},by.$0)}:null;z.scheduler().Fork(function(){if(!bz.ct.c)bx(B.New(function(bE){if(bA[0]){bB[0]={$:1,$0:bE};bD!=null&&bD.$==1?a.clearTimeout(bD.$0):void 0;while(bC.length>0)(bC.shift())(bE);}},bz.ct));});bz.k({$:0,$0:function(bE){var bF;if(bA[0]){bF=bB[0];bF==null?bC.push(bE.k):bE.k(bF.$0);}else bE.k({$:1,$0:new _3.New()});}});};};z.Parallel=function(bx){var by;by=H.ofSeq(bx);return H.length(by)===0?z.Return([]):function(bz){var bA,bB,bC;function bD(bE,bF){var bG,bH;bH=bB[0];switch(bH===0?0:bH===1?bF.$==0?1:(bG=[bH,bF],3):bF.$==0?2:(bG=[bH,bF],3)){case 0:return null;break;case 1:H.set(bC,bE,bF.$0);bB[0]=0;return bz.k({$:0,$0:bC});break;case 2:H.set(bC,bE,bF.$0);{bB[0]=bH-1;return;}break;case 3:bB[0]=0;return bz.k(bG[1]);break;}}bA=by.length;bB=[bA];bC=new a.Array(bA);H.iteri(function(bE,bF){return z.scheduler().Fork(function(){bF(B.New(function(bG){return bD(bE,bG);},bz.ct));});},by);};};z.Sleep=function(bx){return function(by){var bz,bA;bz=void 0;bA=void 0;bz=a.setTimeout(function(){bA.Dispose();z.scheduler().Fork(function(){by.k({$:0,$0:null});});},bx);bA=z.Register(by.ct,function(){a.clearTimeout(bz);z.scheduler().Fork(function(){z.cancel(by);});});};};z.StartAsTask=function(bx,by){var bz;bz=new bn.New();z.StartWithContinuations(bx,function(bA){bz.SetResult(bA);},function(bA){bz.SetException$1(bA);},function(){bz.SetCanceled();},by);return bz.get_Task();};z.AwaitTask1=function(bx){return z.FromContinuations(function(by,bz,bA){bx.get_Status()===0?bx.Start():void 0;bx.ContinueWith$1(function(bB){return bB.get_IsCanceled()?bA(new X.New(z.noneCT())):bB.get_IsFaulted()?bz(bB.get_Exception()):by(bB.get_Result());},z.noneCT());});};z.AwaitTask=function(bx){return z.FromContinuations(function(by,bz,bA){bx.get_Status()===0?bx.Start():void 0;bx.ContinueWith$1(function(bB){return bB.get_IsCanceled()?bA(new X.New(z.noneCT())):bB.get_IsFaulted()?bz(bB.get_Exception()):by();},z.noneCT());});};z.AwaitEvent=function(bx,by){return function(bz){var bA,bB;bA=void 0;bB=void 0;bA=bx.Subscribe(N.observer(function(bC){bA.Dispose();bB.Dispose();z.scheduler().Fork(function(){bz.k({$:0,$0:bC});});}));bB=z.Register(bz.ct,function(){if(by!=null&&by.$==1)by.$0();else{bA.Dispose();z.scheduler().Fork(function(){z.cancel(bz);});}});};};z.StartImmediate=function(bx,by){var bz,bA;bz=(bA=(z.defCTS())[0],by==null?bA:by.$0);!bz.c?bx(B.New(function(bB){if(bB.$==1)z.UncaughtAsyncError(bB.$0);},bz)):void 0;};z.Start=function(bx,by){var bz,bA;bz=(bA=(z.defCTS())[0],by==null?bA:by.$0);z.scheduler().Fork(function(){if(!bz.c)bx(B.New(function(bB){if(bB.$==1)z.UncaughtAsyncError(bB.$0);},bz));});};z.UncaughtAsyncError=function(bx){bv.log("WebSharper: Uncaught asynchronous exception",bx);};z.StartWithContinuations=function(bx,by,bz,bA,bB){var bC,bD;bC=(bD=(z.defCTS())[0],bB==null?bD:bB.$0);!bC.c?bx(B.New(function(bE){if(bE.$==1)bz(bE.$0);else if(bE.$==2)bA(bE.$0);else by(bE.$0);},bC)):void 0;};z.FromContinuations=function(bx){return function(by){var bz;function bA(bB){if(bz[0])w.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bz[0]=true;z.scheduler().Fork(bB);}}bz=[false];bx(function(bB){bA(function(){by.k({$:0,$0:bB});});},function(bB){bA(function(){by.k({$:1,$0:bB});});},function(bB){bA(function(){by.k({$:2,$0:bB});});});};};z.GetCT=function(){D.$cctor();return D.GetCT;};z.Catch=function(bx){return function(by){try{bx(B.New(function(bz){if(bz.$==0)by.k({$:0,$0:{$:0,$0:bz.$0}});else if(bz.$==1)by.k({$:0,$0:{$:1,$0:bz.$0}});else by.k(bz);},by.ct));}catch(bz){by.k({$:0,$0:{$:1,$0:bz}});}};};z.TryWith=function(bx,by){return function(bz){bx(B.New(function(bA){if(bA.$==0)bz.k({$:0,$0:bA.$0});else if(bA.$==1)try{(by(bA.$0))(bz);}catch(bB){bz.k(bA);}else bz.k(bA);},bz.ct));};};z.TryFinally=function(bx,by){return function(bz){bx(B.New(function(bA){try{by();bz.k(bA);}catch(bB){bz.k({$:1,$0:bB});}},bz.ct));};};z.Delay=function(bx){return function(by){try{(bx(null))(by);}catch(bz){by.k({$:1,$0:bz});}};};z.Combine=function(bx,by){return z.Bind(bx,function(){return by;});};z.Bind=function(bx,by){return z.checkCancel(function(bz){bx(B.New(function(bA){var bB;if(bA.$==0){bB=bA.$0;z.scheduler().Fork(function(){try{(by(bB))(bz);}catch(bC){bz.k({$:1,$0:bC});}});}else z.scheduler().Fork(function(){bz.k(bA);});},bz.ct));});};z.Zero=function(){D.$cctor();return D.Zero;};z.Return=function(bx){return function(by){by.k({$:0,$0:bx});};};z.checkCancel=function(bx){return function(by){if(by.ct.c)z.cancel(by);else bx(by);};};z.cancel=function(bx){bx.k({$:2,$0:new X.New(bx.ct)});};z.defCTS=function(){D.$cctor();return D.defCTS;};z.scheduler=function(){D.$cctor();return D.scheduler;};z.Register=function(bx,by){var bz;return bx===z.noneCT()?{Dispose:function(){return null;}}:(bz=bx.r.push(by)-1,{Dispose:function(){return H.set(bx.r,bz,a.ignore);}});};z.noneCT=function(){D.$cctor();return D.noneCT;};D.$cctor=function(){D.$cctor=a.ignore;D.noneCT=A.New(false,[]);D.scheduler=new C.New();D.defCTS=[new L.New()];D.Zero=z.Return();D.GetCT=function(bx){bx.k({$:0,$0:bx.ct});};};F=E.T=br.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},g,F);F.New=br.Ctor(function(bx,by,bz,bA){this.s=bx;this.c=by;this.n=bz;this.d=bA;},F);E.Get0=function(bx){return bx instanceof a.Array?E.ArrayEnumerator(bx):bo.Equals(typeof bx,"string")?E.StringEnumerator(bx):"GetEnumerator0"in bx?bx.GetEnumerator0():bx.GetEnumerator();};E.Get=function(bx){return bx instanceof a.Array?E.ArrayEnumerator(bx):bo.Equals(typeof bx,"string")?E.StringEnumerator(bx):bx.GetEnumerator();};E.StringEnumerator=function(bx){return new F.New(0,null,function(by){var bz;bz=by.s;return bz<bx.length&&(by.c=bx[bz],by.s=bz+1,true);},void 0);};E.ArrayEnumerator=function(bx){return new F.New(0,null,function(by){var bz;bz=by.s;return bz<H.length(bx)&&(by.c=H.get(bx,bz),by.s=bz+1,true);},void 0);};G.Undefined={$:0};H.splitInto=function(bx,by){var bz,bA,bB,bC,bD,bE,bF,bG,bH;if(bx<=0)w.FailWith("Count must be positive");bA=H.length(by);if(bA===0)return[];else{bB=bo.Compare(bx,bA)===-1?bx:bA;bC=H.create(bB,null);bD=bA/bB>>0;bz=0;for(bE=0,bF=bA%bB-1;bE<=bF;bE++){bC[bE]=H.sub(by,bz,bD+1);bz=bz+bD+1;}for(bG=bA%bB,bH=bB-1;bG<=bH;bG++){bC[bG]=H.sub(by,bz,bD);bz=bz+bD;}return bC;}};H.contains=function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=H.length(by);while(bz&&bA<bC)if(bo.Equals(by[bA],bx))bz=false;else bA=bA+1;return!bz;};H.tryFindBack=function(bx,by){var bz,bA,bB;bz=null;bA=by.length-1;while(bA>=0&&bz==null){bB=by[bA];bx(bB)?bz={$:1,$0:bB}:void 0;bA=bA-1;}return bz;};H.tryFindIndexBack=function(bx,by){var bz,bA;bz=null;bA=by.length-1;while(bA>=0&&bz==null){bx(H.get(by,bA))?bz={$:1,$0:bA}:void 0;bA=bA-1;}return bz;};H.mapFold=function(bx,by,bz){var bA,bB,bC,bD,bE;bB=new a.Array(bz.length);bA=by;for(bC=0,bD=bz.length-1;bC<=bD;bC++){bE=bx(bA,bz[bC]);bB[bC]=bE[0];bA=bE[1];}return[bB,bA];};H.mapFoldBack=function(bx,by,bz){var bA,bB,bC,bD,bE,bF,bG,bH;bC=new a.Array(by.length);bA=bz;bD=by.length;for(bE=1,bF=bD;bE<=bF;bE++){bG=bD-bE;bH=bx(by[bG],bA);bC[bG]=bH[0];bA=bH[1];}return[bC,bA];};H.mapInPlace=function(bx,by){var bz,bA;for(bz=0,bA=by.length-1;bz<=bA;bz++)by[bz]=bx(by[bz]);};H.mapiInPlace=function(bx,by){var bz,bA;for(bz=0,bA=by.length-1;bz<=bA;bz++)by[bz]=bx(bz,by[bz]);return by;};H.sortInPlaceByDescending=function(bx,by){H.mapInPlace(function(bz){return bz[0];},H.mapiInPlace(function(bz,bA){return[bA,[bx(bA),bz]];},by).sort(function(bz,bA){return-bo.Compare(bz[1],bA[1]);}));};I.tryHead=function(bx){var by;by=E.Get(bx);try{return by.MoveNext()?{$:1,$0:by.Current()}:null;}finally{if("Dispose"in by)by.Dispose();}};I.tryItem=function(bx,by){var bz,bA,bB;if(bx<0)return null;else{bz=0;bA=E.Get(by);try{bB=true;while(bB&&bz<=bx)if(bA.MoveNext())bz=bz+1;else bB=false;return bB?{$:1,$0:bA.Current()}:null;}finally{if("Dispose"in bA)bA.Dispose();}}};I.tryLast=function(bx){var by,bz;by=E.Get(bx);try{if(by.MoveNext()){while(by.MoveNext());bz={$:1,$0:by.Current()};}else bz=null;return bz;}finally{if("Dispose"in by)by.Dispose();}};I.chunkBySize=function(bx,by){bx<=0?w.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bz;bz=E.Get(by);return new F.New(null,null,function(bA){var bB;if(bz.MoveNext()){bB=[bz.Current()];while(H.length(bB)<bx&&bz.MoveNext())bB.push(bz.Current());bA.c=bB;return true;}else return false;},function(){bz.Dispose();});}};};H.countBy=function(bx,by){var bz,bA,bB,bC,bD;bz=new U.New$5();bA=[];for(bB=0,bC=H.length(by)-1;bB<=bC;bB++){bD=bx(by[bB]);bz.ContainsKey(bD)?bz.set_Item(bD,bz.get_Item(bD)+1):(bA.push(bD),bz.Add(bD,1));}H.mapInPlace(function(bE){return[bE,bz.get_Item(bE)];},bA);return bA;};I.except=function(bx,by){return{GetEnumerator:function(){var bz,bA;bz=E.Get(by);bA=new _9.New$2(bx);return new F.New(null,null,function(bB){var bC,bD;if(bz.MoveNext()){bC=bz.Current();bD=bA.Add(bC);while(!bD&&bz.MoveNext()){bC=bz.Current();bD=bA.Add(bC);}return bD&&(bB.c=bC,true);}else return false;},function(){bz.Dispose();});}};};J.skip=function(bx,by){var bz,bA,bB;bz=by;for(bA=1,bB=bx;bA<=bB;bA++)if(bz.$==0)w.FailWith("Input list too short.");else bz=bz.$1;return bz;};H.groupBy=function(bx,by){var bz,bA,bB,bC,bD,bE;bz=new U.New$5();bA=[];for(bB=0,bC=H.length(by)-1;bB<=bC;bB++){bD=by[bB];bE=bx(bD);bz.ContainsKey(bE)?bz.get_Item(bE).push(bD):(bA.push(bE),bz.Add(bE,[bD]));}H.mapInPlace(function(bF){return[bF,bz.get_Item(bF)];},bA);return bA;};I.insufficient=function(){return w.FailWith("The input sequence has an insufficient number of elements.");};I.last=function(bx){var by,bz;by=E.Get(bx);try{if(!by.MoveNext())bz=I.insufficient();else{while(by.MoveNext());bz=by.Current();}return bz;}finally{if("Dispose"in by)by.Dispose();}};I.contains=function(bx,by){var bz,bA;bz=E.Get(by);try{bA=false;while(!bA&&bz.MoveNext())bA=bo.Equals(bz.Current(),bx);return bA;}finally{if("Dispose"in bz)bz.Dispose();}};J.skipWhile=function(bx,by){var bz;bz=by;while(!(bz.$==0)&&bx(J.head(bz)))bz=J.tail(bz);return bz;};I.nonNegative=function(){return w.FailWith("The input must be non-negative.");};H.checkBounds=function(bx,by){if(by<0||by>=bx.length)w.FailWith("Index was outside the bounds of the array.");};H.checkBounds2D=function(bx,by,bz){if(by<0||bz<0||by>=bx.length||bz>=(bx.length?bx[0].length:0))throw new W.New();};H.checkRange=function(bx,by,bz){if(bz<0||by<0||bx.length<by+bz)w.FailWith("Index was outside the bounds of the array.");};H.set=function(bx,by,bz){H.checkBounds(bx,by);bx[by]=bz;};H.get=function(bx,by){H.checkBounds(bx,by);return bx[by];};H.sub=function(bx,by,bz){H.checkRange(bx,by,bz);return bx.slice(by,by+bz);};H.setSub=function(bx,by,bz,bA){var bB,bC;for(bB=0,bC=bz-1;bB<=bC;bB++)H.set(bx,by+bB,H.get(bA,bB));};H.get2D=function(bx,by,bz){H.checkBounds2D(bx,by,bz);return bx[by][bz];};H.set2D=function(bx,by,bz,bA){H.checkBounds2D(bx,by,bz);bx[by][bz]=bA;};H.zeroCreate2D=function(bx,by){var bz;bz=H.init(bx,function(){return H.create(by,null);});bz.dims=2;return bz;};H.sub2D=function(bx,by,bz,bA,bB){var bC,bD,bE,bF,bG,bH,bI;bC=bA<0?0:bA;bD=bB<0?0:bB;bE=H.zeroCreate2D(bC,bD);for(bF=0,bG=bC-1;bF<=bG;bF++){for(bH=0,bI=bD-1;bH<=bI;bH++)H.set2D(bE,bF,bH,H.get2D(bx,by+bF,bz+bH));}return bE;};H.setSub2D=function(bx,by,bz,bA,bB,bC){var bD,bE,bF,bG;for(bD=0,bE=bA-1;bD<=bE;bD++){for(bF=0,bG=bB-1;bF<=bG;bF++)H.set2D(bx,by+bD,bz+bF,H.get2D(bC,bD,bF));}};H.length=function(bx){return bx.dims===2?bx.length*bx.length:bx.length;};b.checkThis=function(bx){return bo.Equals(bx,null)?w.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bx;};H.binarySearch=function(bx,by,bz,bA){var bB,bC,bD,bE;bB=bz;bC=bA-1;if(bz<0)throw new Z.New("index","Non-negative number required.");else null;if(bA>H.length(bx))throw new Y.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bA<bz)throw new Z.New("length","Non-negative number required.");else null;while(true)if(bB>bC)return~bB;else{bD=(bB+bC)/2>>0;bE=by(H.get(bx,bD));if(bB===bC)return bE===0?bB:bE>0?~(bB+1):~bB;else if(bE<=0)bC=bD;else bB=bD+1;}};H.binarySearchComparer=function(bx){return bx.CompareTo0?function(by){return bx.CompareTo0(by);}:function(by){if(by.CompareTo0)return-by.CompareTo0(bx);else throw new _1.New$2("Failed to compare two elements in the array.",new Y.New$2("At least one object must implement IComparable."));};};H.sortInternal=function(bx,by,bz,bA,bB){function bC(bE,bF){var bG,bH,bI,bJ;bH=bx[bF];bG=bE-1;for(bI=bE,bJ=bF-1;bI<=bJ;bI++)if(bA(bx[bI],bH)<0){bG=bG+1;bB(bG,bI);}bA(bx[bF],bx[bG+1])<0?bB(bG+1,bF):void 0;return bG+1;}function bD(bE,bF){var bG;return bE<bF?(bG=bC(bE,bF),(bD(bE,bG-1),bD(bG+1,bF))):null;}bD(by,by+bz-1);};H.sortSub=function(bx,by,bz,bA){H.sortInternal(bx,by,bz,bA,function(bB,bC){var bD;bD=bx[bB];bx[bB]=bx[bC];bx[bC]=bD;});};H.sortByKeys=function(bx,by,bz,bA,bB){H.sortInternal(bx,bz,bA,bB,function(bC,bD){var bE,bF;bE=bx[bC];bx[bC]=bx[bD];bx[bD]=bE;bF=by[bC];by[bC]=by[bD];by[bD]=bF;});};H.clear=function(bx,by,bz){var bA,bB;if(bx==null)throw new _0.New$1(bx);else void 0;if(by<0||bz<0||by+bz>H.length(bx))throw new W.New();else void 0;for(bA=by,bB=by+bz-1;bA<=bB;bA++)H.set(bx,bA,typeof H.get(bx,bA)=="number"?0:null);};H.constrainedCopy=function(bx,by,bz,bA,bB){if(bx===bz&&bA<=by+bB)H.blit(H.init(bB,function(bC){return H.get(bx,by+bC);}),0,bz,bA,bB);else H.blit(bx,by,bz,bA,bB);};H.findIndexBound=function(bx,by,bz,bA){var bB,bC;bB=by+bz;bC=by;if(bx==null)throw new _0.New$1("array");else null;if(bA==null)throw new _0.New$1("match");else null;if(by<0)throw new Z.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bz<0||by+bz>H.length(bx))throw new Z.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bC===bB)return -1;else if(bA(H.get(bx,bC)))return bC;else bC=bC+1;};H.findLastIndexBound=function(bx,by,bz,bA){var bB;bB=by+bz-1;if(bx==null)throw new _0.New$1("array");else null;if(bA==null)throw new _0.New$1("match");else null;if(by<0)throw new Z.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bz<0||by+bz>H.length(bx))throw new Z.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bB<by)return -1;else if(bA(H.get(bx,bB)))return bB;else bB=bB-1;};H.reverse=function(bx,by,bz){var bA;bA=H.sub(bx,by,bz).slice().reverse();H.blit(bA,0,bx,by,H.length(bA));};H.sum=function(bx){var by,bz;by=0;bz=0;for(;bz<bx.length;bz++)by+=bx[bz];return by;};H.sumBy=function(bx,by){var bz,bA;bz=0;bA=0;for(;bA<by.length;bA++)bz+=bx(by[bA]);return bz;};H.allPairs=function(bx,by){var bz,bA,bB,bC,bD,bE,bF;bz=bx.length;bA=by.length;bB=new a.Array(bz*bA);for(bC=0,bD=bz-1;bC<=bD;bC++){for(bE=0,bF=bA-1;bE<=bF;bE++)bB[bC*bA+bE]=[bx[bC],by[bE]];}return bB;};H.average=function(bx){return a.Number(H.sum(bx))/bx.length;};H.averageBy=function(bx,by){return a.Number(H.sumBy(bx,by))/by.length;};H.blit=function(bx,by,bz,bA,bB){var bC,bD;H.checkRange(bx,by,bB);H.checkRange(bz,bA,bB);for(bC=0,bD=bB-1;bC<=bD;bC++)bz[bA+bC]=bx[by+bC];};H.choose=function(bx,by){var bz,bA,bB,bC;bz=[];for(bA=0,bB=by.length-1;bA<=bB;bA++){bC=bx(by[bA]);bC==null?void 0:bz.push(bC.$0);}return bz;};H.collect=function(bx,by){return a.Array.prototype.concat.apply([],H.map(bx,by));};H.concat=function(bx){return a.Array.prototype.concat.apply([],H.ofSeq(bx));};H.create=function(bx,by){var bz,bA,bB;bz=new a.Array(bx);for(bA=0,bB=bx-1;bA<=bB;bA++)bz[bA]=by;return bz;};H.exists=function(bx,by){var bz,bA,bB,bC;bz=false;bA=0;bC=H.length(by);while(!bz&&bA<bC)if(bx(by[bA]))bz=true;else bA=bA+1;return bz;};H.exists2=function(bx,by,bz){var bA,bB,bC,bD;H.checkLength(by,bz);bA=false;bB=0;bD=H.length(by);while(!bA&&bB<bD)if(bx(by[bB],bz[bB]))bA=true;else bB=bB+1;return bA;};H.fill=function(bx,by,bz,bA){var bB,bC;H.checkRange(bx,by,bz);for(bB=by,bC=by+bz-1;bB<=bC;bB++)bx[bB]=bA;};H.filter=function(bx,by){var bz,bA,bB;bz=[];for(bA=0,bB=by.length-1;bA<=bB;bA++)if(bx(by[bA]))bz.push(by[bA]);return bz;};H.find=function(bx,by){var bz;bz=H.tryFind(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};H.findIndex=function(bx,by){var bz;bz=H.tryFindIndex(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};H.fold=function(bx,by,bz){var bA,bB,bC;bA=by;for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA=bx(bA,bz[bB]);return bA;};H.fold2=function(bx,by,bz,bA){var bB,bC,bD;H.checkLength(bz,bA);bB=by;for(bC=0,bD=bz.length-1;bC<=bD;bC++)bB=bx(bB,bz[bC],bA[bC]);return bB;};H.foldBack=function(bx,by,bz){var bA,bB,bC,bD,bE;bA=bz;bC=by.length;for(bD=1,bE=bC;bD<=bE;bD++)bA=bx(by[bC-bD],bA);return bA;};H.foldBack2=function(bx,by,bz,bA){var bB,bC,bD,bE,bF;H.checkLength(by,bz);bD=by.length;bC=bA;for(bE=1,bF=bD;bE<=bF;bE++)bC=bx(by[bD-bE],bz[bD-bE],bC);return bC;};H.forall=function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=H.length(by);while(bz&&bA<bC)if(bx(by[bA]))bA=bA+1;else bz=false;return bz;};H.forall2=function(bx,by,bz){var bA,bB,bC,bD;H.checkLength(by,bz);bA=true;bB=0;bD=H.length(by);while(bA&&bB<bD)if(bx(by[bB],bz[bB]))bB=bB+1;else bA=false;return bA;};H.init=function(bx,by){var bz,bA,bB;bx<0?w.FailWith("Negative size given."):null;bz=new a.Array(bx);for(bA=0,bB=bx-1;bA<=bB;bA++)bz[bA]=by(bA);return bz;};H.iter=function(bx,by){var bz,bA;for(bz=0,bA=by.length-1;bz<=bA;bz++)bx(by[bz]);};H.iter2=function(bx,by,bz){var bA,bB;H.checkLength(by,bz);for(bA=0,bB=by.length-1;bA<=bB;bA++)bx(by[bA],bz[bA]);};H.iteri=function(bx,by){var bz,bA;for(bz=0,bA=by.length-1;bz<=bA;bz++)bx(bz,by[bz]);};H.iteri2=function(bx,by,bz){var bA,bB;H.checkLength(by,bz);for(bA=0,bB=by.length-1;bA<=bB;bA++)bx(bA,by[bA],bz[bA]);};H.map=function(bx,by){var bz,bA,bB;bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bA]=bx(by[bA]);return bz;};H.map2=function(bx,by,bz){var bA,bB,bC;H.checkLength(by,bz);bA=new a.Array(bz.length);for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[bB]=bx(by[bB],bz[bB]);return bA;};H.mapi=function(bx,by){var bz,bA,bB;bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bA]=bx(bA,by[bA]);return bz;};H.mapi2=function(bx,by,bz){var bA,bB,bC;H.checkLength(by,bz);bA=new a.Array(by.length);for(bB=0,bC=by.length-1;bB<=bC;bB++)bA[bB]=bx(bB,by[bB],bz[bB]);return bA;};H.max=function(bx){return H.reduce(function(by,bz){return bo.Compare(by,bz)===1?by:bz;},bx);};H.maxBy=function(bx,by){return H.reduce(function(bz,bA){return bo.Compare(bx(bz),bx(bA))===1?bz:bA;},by);};H.min=function(bx){return H.reduce(function(by,bz){return bo.Compare(by,bz)===-1?by:bz;},bx);};H.minBy=function(bx,by){return H.reduce(function(bz,bA){return bo.Compare(bx(bz),bx(bA))===-1?bz:bA;},by);};H.ofList=function(bx){var by,bz;bz=[];by=bx;while(!(by.$==0)){bz.push(J.head(by));by=J.tail(by);}return bz;};H.ofSeq=function(bx){var by,bz;if(bx instanceof a.Array)return bx.slice();else if(bx instanceof bb)return H.ofList(bx);else{by=[];bz=E.Get(bx);try{while(bz.MoveNext())by.push(bz.Current());return by;}finally{if("Dispose"in bz)bz.Dispose();}}};H.partition=function(bx,by){var bz,bA,bB,bC;bz=[];bA=[];for(bB=0,bC=by.length-1;bB<=bC;bB++)if(bx(by[bB]))bz.push(by[bB]);else bA.push(by[bB]);return[bz,bA];};H.permute=function(bx,by){var bz,bA,bB;bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bx(bA)]=by[bA];return bz;};H.pick=function(bx,by){var bz;bz=H.tryPick(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};H.reduce=function(bx,by){var bz,bA,bB;H.nonEmpty(by);bz=by[0];for(bA=1,bB=by.length-1;bA<=bB;bA++)bz=bx(bz,by[bA]);return bz;};H.reduceBack=function(bx,by){var bz,bA,bB,bC,bD;H.nonEmpty(by);bB=by.length;bA=by[bB-1];for(bC=2,bD=bB;bC<=bD;bC++)bA=bx(by[bB-bC],bA);return bA;};H.scan=function(bx,by,bz){var bA,bB,bC;bA=new a.Array(1+bz.length);bA[0]=by;for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[bB+1]=bx(bA[bB],bz[bB]);return bA;};H.scanBack=function(bx,by,bz){var bA,bB,bC,bD;bA=by.length;bB=new a.Array(1+bA);bB[bA]=bz;for(bC=0,bD=bA-1;bC<=bD;bC++)bB[bA-bC-1]=bx(by[bA-bC-1],bB[bA-bC]);return bB;};H.sort=function(bx){return H.map(function(by){return by[0];},H.mapi(function(by,bz){return[bz,by];},bx).sort(bo.Compare));};H.sortBy=function(bx,by){return H.map(function(bz){return bz[0];},H.mapi(function(bz,bA){return[bA,[bx(bA),bz]];},by).sort(function(bz,bA){return bo.Compare(bz[1],bA[1]);}));};H.sortInPlace=function(bx){H.mapInPlace(function(by){return by[0];},H.mapiInPlace(function(by,bz){return[bz,by];},bx).sort(bo.Compare));};H.sortInPlaceBy=function(bx,by){H.mapInPlace(function(bz){return bz[0];},H.mapiInPlace(function(bz,bA){return[bA,[bx(bA),bz]];},by).sort(function(bz,bA){return bo.Compare(bz[1],bA[1]);}));};H.sortInPlaceWith=function(bx,by){by.sort(bx);};H.sortWith=function(bx,by){return by.slice().sort(bx);};H.sortByDescending=function(bx,by){return H.map(function(bz){return bz[0];},H.mapi(function(bz,bA){return[bA,[bx(bA),bz]];},by).sort(function(bz,bA){return-bo.Compare(bz[1],bA[1]);}));};H.sortDescending=function(bx){return H.map(function(by){return by[0];},H.mapi(function(by,bz){return[bz,by];},bx).sort(function(by,bz){return-bo.Compare(by,bz);}));};H.tryFind=function(bx,by){var bz,bA;bz=null;bA=0;while(bA<by.length&&bz==null){bx(by[bA])?bz={$:1,$0:by[bA]}:void 0;bA=bA+1;}return bz;};H.tryFindIndex=function(bx,by){var bz,bA;bz=null;bA=0;while(bA<by.length&&bz==null){bx(by[bA])?bz={$:1,$0:bA}:void 0;bA=bA+1;}return bz;};H.tryHead=function(bx){return bx.length===0?null:{$:1,$0:bx[0]};};H.tryItem=function(bx,by){return by.length<=bx||bx<0?null:{$:1,$0:by[bx]};};H.tryLast=function(bx){var by;by=bx.length;return by===0?null:{$:1,$0:bx[by-1]};};H.tryPick=function(bx,by){var bz,bA,bB;bz=null;bA=0;while(bA<by.length&&bz==null){bB=bx(by[bA]);bB!=null&&bB.$==1?bz=bB:void 0;bA=bA+1;}return bz;};H.unzip=function(bx){var by,bz,bA,bB,bC;by=[];bz=[];for(bA=0,bB=bx.length-1;bA<=bB;bA++){bC=bx[bA];by.push(bC[0]);bz.push(bC[1]);}return[by,bz];};H.unzip3=function(bx){var by,bz,bA,bB,bC,bD;by=[];bz=[];bA=[];for(bB=0,bC=bx.length-1;bB<=bC;bB++){bD=bx[bB];by.push(bD[0]);bz.push(bD[1]);bA.push(bD[2]);}return[by,bz,bA];};H.zip=function(bx,by){var bz,bA,bB;H.checkLength(bx,by);bz=H.create(bx.length,null);for(bA=0,bB=bx.length-1;bA<=bB;bA++)bz[bA]=[bx[bA],by[bA]];return bz;};H.zip3=function(bx,by,bz){var bA,bB,bC;H.checkLength(bx,by);H.checkLength(by,bz);bA=H.create(bx.length,null);for(bB=0,bC=bx.length-1;bB<=bC;bB++)bA[bB]=[bx[bB],by[bB],bz[bB]];return bA;};H.chunkBySize=function(bx,by){return H.ofSeq(I.chunkBySize(bx,by));};H.compareWith=function(bx,by,bz){return I.compareWith(bx,by,bz);};H.distinct=function(bx){return H.ofSeq(I.distinct(bx));};H.distinctBy=function(bx,by){return H.ofSeq(I.distinctBy(bx,by));};H.except=function(bx,by){return H.ofSeq(I.except(bx,by));};H.findBack=function(bx,by){var bz;bz=H.tryFindBack(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};H.findIndexBack=function(bx,by){var bz;bz=H.tryFindIndexBack(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};H.head=function(bx){H.nonEmpty(bx);return bx[0];};H.last=function(bx){H.nonEmpty(bx);return bx[bx.length-1];};H.map3=function(bx,by,bz,bA){var bB,bC,bD;H.checkLength(by,bz);H.checkLength(by,bA);bB=new a.Array(bA.length);for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB[bC]=bx(by[bC],bz[bC],bA[bC]);return bB;};H.pairwise=function(bx){return H.ofSeq(I.pairwise(bx));};H.replicate=function(bx,by){return H.create(bx,by);};H.indexed=function(bx){return H.mapi(function(by,bz){return[by,bz];},bx);};H.skip=function(bx,by){return bx<0?I.nonNegative():bx>by.length?I.insufficient():by.slice(bx);};H.skipWhile=function(bx,by){var bz,bA;bA=by.length;bz=0;while(bz<bA&&bx(by[bz]))bz=bz+1;return by.slice(bz);};H.tail=function(bx){return H.skip(1,bx);};H.take=function(bx,by){return bx<0?I.nonNegative():bx>by.length?I.insufficient():by.slice(0,bx);};H.takeWhile=function(bx,by){var bz,bA;bA=by.length;bz=0;while(bz<bA&&bx(by[bz]))bz=bz+1;return by.slice(0,bz);};H.exactlyOne=function(bx){return bx.length===1?bx[0]:w.FailWith("The input does not have precisely one element.");};H.unfold=function(bx,by){return H.ofSeq(I.unfold(bx,by));};H.windowed=function(bx,by){return H.ofSeq(I.windowed(bx,by));};H.splitAt=function(bx,by){return[H.take(bx,by),H.skip(bx,by)];};H.nonEmpty=function(bx){if(bx.length===0)w.FailWith("The input array was empty.");};H.checkLength=function(bx,by){if(bx.length!==by.length)w.FailWith("The arrays have different lengths.");};K.init=function(bx,by,bz){var bA,bB,bC,bD,bE;bA=H.zeroCreate2D(bx,by);for(bB=0,bC=bx-1;bB<=bC;bB++){for(bD=0,bE=by-1;bD<=bE;bD++)H.set2D(bA,bB,bD,bz(bB,bD));}return bA;};K.iter=function(bx,by){var bz,bA,bB,bC,bD,bE;bz=by.length;bA=by.length?by[0].length:0;for(bB=0,bC=bz-1;bB<=bC;bB++){for(bD=0,bE=bA-1;bD<=bE;bD++)bx(H.get2D(by,bB,bD));}};K.iteri=function(bx,by){var bz,bA,bB,bC,bD,bE;bz=by.length;bA=by.length?by[0].length:0;for(bB=0,bC=bz-1;bB<=bC;bB++){for(bD=0,bE=bA-1;bD<=bE;bD++)bx(bB,bD,H.get2D(by,bB,bD));}};K.map=function(bx,by){return K.init(by.length,by.length?by[0].length:0,function(bz,bA){return bx(H.get2D(by,bz,bA));});};K.mapi=function(bx,by){return K.init(by.length,by.length?by[0].length:0,function(bz,bA){return bx(bz,bA,H.get2D(by,bz,bA));});};K.copy=function(bx){return K.init(bx.length,bx.length?bx[0].length:0,function(by,bz){return H.get2D(bx,by,bz);});};L=b.CancellationTokenSource=br.Class({CancelAfter:function(bx){var by,bz;by=this;!this.c?(bz=this.pending,bz==null?void 0:a.clearTimeout(bz.$0),this.pending={$:1,$0:a.setTimeout(function(){by.Cancel$1();},bx)}):void 0;},Cancel:function(bx){if(!bx)this.Cancel$1();else if(!this.c){this.c=true;H.iter(function(by){by();},this.r);}},Cancel$1:function(){var bx;if(!this.c){this.c=true;bx=H.choose(function(by){try{by();return null;}catch(bz){return{$:1,$0:bz};}},this.r);if(H.length(bx)>0)throw new _2.New$3(bx);else void 0;}}},g,L);L.CreateLinkedTokenSource=function(bx,by){return L.CreateLinkedTokenSource$1([bx,by]);};L.CreateLinkedTokenSource$1=function(bx){var by;by=new L.New();H.iter(function(bz){function bA(bB){return by.Cancel$1();}z.Register(bz,function(){bA();});},bx);return by;};L.New=br.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},L);M.IsWhiteSpace=function(bx){return bx.match(new a.RegExp("\\s"))!==null;};M.Parse=function(bx){return bx.length===1?bx:w.FailWith("String must be exactly one character long.");};M.IsUpper=function(bx){return bx>="A"&&bx<="Z";};M.IsLower=function(bx){return bx>="a"&&bx<="z";};M.IsLetterOrDigit=function(bx){return M.IsLetter(bx)||M.IsDigit(bx);};M.IsLetter=function(bx){return bx>="A"&&bx<="Z"||bx>="a"&&bx<="z";};M.IsDigit=function(bx){return bx>="0"&&bx<="9";};M.IsControl=function(bx){return bx>="\u0000"&&bx<="\u001f"||bx>="\u0080"&&bx<="\u009f";};M.GetNumericValue=function(bx){return bx>="0"&&bx<="9"?bx.charCodeAt()-"0".charCodeAt():-1;};N.observer=function(bx){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bx};};O.LongTime=function(bx){return(new bu(bx)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};O.ShortTime=function(bx){return(new bu(bx)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};O.LongDate=function(bx){return(new bu(bx)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};O.Parse=function(bx){var by;by=O.TryParse(bx);return by!=null&&by.$==1?by.$0:w.FailWith("Failed to parse date string.");};O.TryParse=function(bx){var by;by=bu.parse(bx);return a.isNaN(by)?null:{$:1,$0:by};};O.AddMonths=function(bx,by){var bz;bz=new bu(bx);return(new bu(bz.getFullYear(),bz.getMonth()+by,bz.getDate(),bz.getHours(),bz.getMinutes(),bz.getSeconds(),bz.getMilliseconds())).getTime();};O.AddYears=function(bx,by){var bz;bz=new bu(bx);return(new bu(bz.getFullYear()+by,bz.getMonth(),bz.getDate(),bz.getHours(),bz.getMinutes(),bz.getSeconds(),bz.getMilliseconds())).getTime();};O.TimePortion=function(bx){var by;by=new bu(bx);return(((24*0+by.getHours())*60+by.getMinutes())*60+by.getSeconds())*1000+by.getMilliseconds();};O.DatePortion=function(bx){var by;by=new bu(bx);return(new bu(by.getFullYear(),by.getMonth(),by.getDate())).getTime();};P=b.DateTimeOffset=br.Class({ToUniversalTime:function(){return new P.New(this.d,0);},ToLocalTime:function(){return new P.New(this.d,(new bu()).getTimezoneOffset());}},g,P);P.New=br.Ctor(function(bx,by){this.d=bx;},P);Q.InvocationList=function(bx){return bx.$Invokes||[bx];};Q.RemoveAll=function(bx,by){var bz;bz=Q.InvocationList(bx);H.length(Q.InvocationList(by))>1?w.FailWith("TODO: Remove multicast delegates"):void 0;return br.CreateDelegate(H.filter(function(bA){return!bo.Equals(bA,by);},bz));};Q.Remove=function(bx,by){var bz,bA,bB,bC,bD,bE,bF;bB=Q.InvocationList(bx);if(H.length(Q.InvocationList(by))>1)w.FailWith("TODO: Remove multicast delegates");bC=[];bA=false;for(bD=H.length(bB)-1,bE=0;bD>=bE;bD--){bF=H.get(bB,bD);!bA&&br.DelegateEqual(bF,by)?bA=true:bC.unshift(bF);}return br.CreateDelegate(bC);};Q.DelegateTarget=function(bx){var by;return!bx?null:"$Target"in bx?bx.$Target:"$Invokes"in bx?(by=bx.$Invokes,(H.get(by,H.length(by)-1))[1]):null;};R.getHashCode=function(bx,by){return bx.CGetHashCode(by);};R.equals=function(bx){return function(by,bz){return bx.CEquals(by,bz);};};R.alreadyAdded=function(){return w.FailWith("An item with the same key has already been added.");};R.notPresent=function(){return w.FailWith("The given key was not present in the dictionary.");};S=o.KeyCollection=br.Class({GetEnumerator$1:function(){return E.Get(I.map(function(bx){return bx.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},g,S);S.New=br.Ctor(function(bx){this.d=bx;},S);T=o.ValueCollection=br.Class({GetEnumerator$1:function(){return E.Get(I.map(function(bx){return bx.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},g,T);T.New=br.Ctor(function(bx){this.d=bx;},T);U=o.Dictionary=br.Class({remove:function(bx){var by,bz,bA,bB;by=this;bz=this.hash(bx);bA=this.data[bz];return bA&&(bB=H.filter(function(bC){return!by.equals.apply(null,[(w.KeyValue(bC))[0],bx]);},bA),H.length(bB)<bA.length&&(this.count=this.count-1,this.data[bz]=bB,true));},add:function(bx,by){var bz,bA,bB;bz=this;bA=this.hash(bx);bB=this.data[bA];bB?(H.exists(function(bC){return bz.equals.apply(null,[(w.KeyValue(bC))[0],bx]);},bB)?R.alreadyAdded():void 0,this.count=this.count+1,bB.push({K:bx,V:by})):(this.count=this.count+1,this.data[bA]=new a.Array({K:bx,V:by}));},set:function(bx,by){var bz,bA,bB,bC;bz=this;bA=this.hash(bx);bB=this.data[bA];bB?(bC=H.tryFindIndex(function(bD){return bz.equals.apply(null,[(w.KeyValue(bD))[0],bx]);},bB),bC==null?(this.count=this.count+1,bB.push({K:bx,V:by})):bB[bC.$0]={K:bx,V:by}):(this.count=this.count+1,this.data[bA]=new a.Array({K:bx,V:by}));},get:function(bx){var by,bz;by=this;bz=this.data[this.hash(bx)];return bz?H.pick(function(bA){var bB;bB=w.KeyValue(bA);return by.equals.apply(null,[bB[0],bx])?{$:1,$0:bB[1]}:null;},bz):R.notPresent();},get_Keys:function(){return new S.New(this);},get_Values:function(){return new T.New(this);},TryGetValue:function(bx,by){var bz,bA,bB;bz=this;bA=this.data[this.hash(bx)];return bA&&(bB=H.tryPick(function(bC){var bD;bD=w.KeyValue(bC);return bz.equals.apply(null,[bD[0],bx])?{$:1,$0:bD[1]}:null;},bA),bB!=null&&bB.$==1&&(by.set(bB.$0),true));},Remove:function(bx){return this.remove(bx);},GetEnumerator$1:function(){return E.Get0(this);},set_Item:function(bx,by){this.set(bx,by);},get_Item:function(bx){return this.get(bx);},ContainsKey:function(bx){var by,bz;by=this;bz=this.data[this.hash(bx)];return bz&&H.exists(function(bA){return by.equals.apply(null,[(w.KeyValue(bA))[0],bx]);},bz);},Clear:function(){this.data=[];this.count=0;},Add:function(bx,by){this.add(bx,by);},GetEnumerator:function(){return E.Get0(this);},GetEnumerator0:function(){return E.Get0(H.concat(d.GetFieldValues(this.data)));}},g,U);U.New=br.Ctor(function(bx,by){U.New$6.call(this,bx,R.equals(by),function(bz){return R.getHashCode(by,bz);});},U);U.New$1=br.Ctor(function(bx){U.New$6.call(this,bx,bo.Equals,bo.Hash);},U);U.New$2=br.Ctor(function(bx,by){U.New$3.call(this,by);},U);U.New$3=br.Ctor(function(bx){U.New$6.call(this,[],R.equals(bx),function(by){return R.getHashCode(bx,by);});},U);U.New$4=br.Ctor(function(bx){U.New$5.call(this);},U);U.New$5=br.Ctor(function(){U.New$6.call(this,[],bo.Equals,bo.Hash);},U);U.New$6=br.Ctor(function(bx,by,bz){var bA,bB;this.equals=by;this.hash=bz;this.count=0;this.data=[];bA=E.Get(bx);try{while(bA.MoveNext()){bB=bA.Current();this.set(bB.K,bB.V);}}finally{if("Dispose"in bA)bA.Dispose();}},U);V=b.MatchFailureException=br.Class({},null,V);V.New=br.Ctor(function(bx,by,bz){this.message=bx+" at "+bt(by)+":"+bt(bz);},V);W=b.IndexOutOfRangeException=br.Class({},null,W);W.New=br.Ctor(function(){W.New$1.call(this,"Index was outside the bounds of the array.");},W);W.New$1=br.Ctor(function(bx){this.message=bx;},W);X=b.OperationCanceledException=br.Class({},null,X);X.New=br.Ctor(function(bx){X.New$1.call(this,"The operation was canceled.",null,bx);},X);X.New$1=br.Ctor(function(bx,by,bz){this.message=bx;this.inner=by;this.ct=bz;},X);Y=b.ArgumentException=br.Class({},null,Y);Y.New=br.Ctor(function(bx,by){Y.New$2.call(this,by+"\nParameter name: "+bx);},Y);Y.New$1=br.Ctor(function(){Y.New$2.call(this,"Value does not fall within the expected range.");},Y);Y.New$2=br.Ctor(function(bx){this.message=bx;},Y);Z=b.ArgumentOutOfRangeException=br.Class({},null,Z);Z.New=br.Ctor(function(bx,by){this.message=by+"\nParameter name: "+bx;},Z);Z.New$1=br.Ctor(function(bx){Z.New.call(this,bx,"Specified argument was out of the range of valid values.");},Z);Z.New$2=br.Ctor(function(){this.message="Specified argument was out of the range of valid values.";},Z);_0=b.ArgumentNullException=br.Class({},null,_0);_0.New=br.Ctor(function(bx,by){this.message=by+"\nParameter name: "+bx;},_0);_0.New$1=br.Ctor(function(bx){_0.New.call(this,bx,"Value cannot be null.");},_0);_0.New$2=br.Ctor(function(){this.message="Value cannot be null.";},_0);_1=b.InvalidOperationException=br.Class({},null,_1);_1.New=br.Ctor(function(bx){_1.New$2.call(this,bx,null);},_1);_1.New$1=br.Ctor(function(){_1.New.call(this,"Operation is not valid due to the current state of the object.");},_1);_1.New$2=br.Ctor(function(bx,by){this.message=bx;this.inner=by;},_1);_2=b.AggregateException=br.Class({},null,_2);_2.New=br.Ctor(function(bx,by){_2.New$4.call(this,bx,[by]);},_2);_2.New$1=br.Ctor(function(bx,by){_2.New$4.call(this,bx,H.ofSeq(by));},_2);_2.New$2=br.Ctor(function(bx){_2.New$4.call(this,"One or more errors occurred.",H.ofSeq(bx));},_2);_2.New$3=br.Ctor(function(bx){_2.New$4.call(this,"One or more errors occurred.",bx);},_2);_2.New$4=br.Ctor(function(bx,by){this.message=bx;this.innerExceptions=by;},_2);_3=b.TimeoutException=br.Class({},null,_3);_3.New=br.Ctor(function(){_3.New$1.call(this,"The operation has timed out.");},_3);_3.New$1=br.Ctor(function(bx){this.message=bx;},_3);_4=b.FormatException=br.Class({},null,_4);_4.New=br.Ctor(function(){_4.New$1.call(this,"One of the identified items was in an invalid format.");},_4);_4.New$1=br.Ctor(function(bx){this.message=bx;},_4);_5=b.OverflowException=br.Class({},null,_5);_5.New=br.Ctor(function(){_5.New$1.call(this,"Arithmetic operation resulted in an overflow.");},_5);_5.New$1=br.Ctor(function(bx){this.message=bx;},_5);H.create2D=function(bx){var by;by=H.ofSeq(I.map(H.ofSeq,bx));by.dims=2;return by;};_7.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bx){var by,bz;by=bw.random()*16|0;bz=bx=="x"?by:by&3|8;return bz.toString(16);});};_7.TryParseExact=function(bx,by,bz){try{bz.set(_7.ParseExact(bx,by));return true;}catch(bA){return false;}};_7.TryParse=function(bx,by){try{by.set(_7.Parse(bx));return true;}catch(bz){return false;}};_7.ParseExact=function(bx,by){var bz,bA,bB,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;function bC(bN){var bO,bP,bQ,bR;for(bO=0,bP=35;bO<=bP;bO++){bO===8||(bO===13||(bO===18||bO===23&&true))?bN[bO]!=="-"?_7.ShapeError():void 0:(bR=bN[bO],!("0"<=bR&&bR<="9"||"a"<=bR&&bR<="f")?_7.ShapeError():void 0);}return bN;}bD=by.toUpperCase();if(bD==="N"){bE=bk.Trim(bx).toLowerCase();if(bE.length!==32)_7.ShapeError();for(bF=0,bG=31;bF<=bG;bF++){bH=bE[bF];!("0"<=bH&&bH<="9"||"a"<=bH&&bH<="f")?_7.ShapeError():void 0;}return bk.Substring(bE,0,8)+"-"+bk.Substring(bE,8,4)+"-"+bk.Substring(bE,12,4)+"-"+bk.Substring(bE,16,4)+"-"+bE.substring(20);}else if(bD==="D"){bz=bk.Trim(bx).toLowerCase();bz.length!==36?_7.ShapeError():void 0;return bC(bz);}else if(bD==="B"){bA=bk.Trim(bx).toLowerCase();bA.length!==38||bA[0]!=="{"||bA[17]!=="}"?_7.ShapeError():void 0;return bC(bk.Substring(bA,1,36));}else if(bD==="P"){bB=bk.Trim(bx).toLowerCase();bB.length!==38||bB[0]!=="("||bB[17]!==")"?_7.ShapeError():void 0;return bC(bk.Substring(bB,1,36));}else if(bD==="X"){bI=bk.Trim(bx).toLowerCase();if(bI.length!==68)_7.ShapeError();for(bJ=0,bK=67;bJ<=bK;bJ++){switch(bJ){case 26:case 0:if(bI[bJ]!=="{")_7.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bI[bJ]!=="0")_7.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bI[bJ]!=="x")_7.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bI[bJ]!==",")_7.ShapeError();break;case 67:case 66:if(bI[bJ]!=="{")_7.ShapeError();break;default:bM=bI[bJ];!("0"<=bM&&bM<="9"||"a"<=bM&&bM<="f")?_7.ShapeError():void 0;break;}}return bk.Substring(bI,3,8)+"-"+bk.Substring(bI,14,4)+"-"+bk.Substring(bI,21,4)+"-"+bk.Substring(bI,29,2)+bk.Substring(bI,34,2)+"-"+bk.Substring(bI,39,2)+bk.Substring(bI,44,2)+bk.Substring(bI,49,2)+bk.Substring(bI,54,2)+bk.Substring(bI,59,2)+bk.Substring(bI,64,2);}else return _7.FormatError();};_7.Parse=function(bx){var by,bz,bA;try{return _7.ParseExact(bx,"D");}catch(bB){try{by=_7.ParseExact(bx,"B");}catch(bC){try{bz=_7.ParseExact(bx,"P");}catch(bD){try{bA=_7.ParseExact(bx,"N");}catch(bE){bA=_7.ParseExact(bx,"X");}bz=bA;}by=bz;}return by;}};_7.ToString=function(bx,by){var bz;bz=by.toUpperCase();return bz==="N"?bk.Replace(bx,"-",""):bz==="D"?bx:bz==="B"?"{"+bx+"}":bz==="P"?"("+bx+")":bz==="X"?"{0x"+bk.Substring(bx,0,8)+",0x"+bk.Substring(bx,9,4)+",0x"+bk.Substring(bx,14,4)+",{0x"+bk.Substring(bx,19,2)+",0x"+bk.Substring(bx,21,2)+",0x"+bk.Substring(bx,24,2)+",0x"+bk.Substring(bx,26,2)+",0x"+bk.Substring(bx,28,2)+",0x"+bk.Substring(bx,30,2)+",0x"+bk.Substring(bx,32,2)+",0x"+bk.Substring(bx,34,2)+"}}":_7.FormatError();};_7.ParseError=function(){throw new _4.New$1("Unrecognized Guid format.");};_7.ShapeError=function(){throw new _4.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_7.HexaError=function(){throw new _4.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};_7.FormatError=function(){throw new _4.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_8.concat=function(bx){var by,bz;by=[];for(var bA in bx)by.push.apply(by,bx[bA]);return by;};_9=o.HashSet=br.Class({add:function(bx){var by,bz;by=this.hash(bx);bz=this.data[by];return bz==null?(this.data[by]=[bx],this.count=this.count+1,true):this.arrContains(bx,bz)?false:(bz.push(bx),this.count=this.count+1,true);},arrRemove:function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=by.length;while(bz&&bA<bC)if(this.equals.apply(null,[by[bA],bx])){by.splice.apply(by,[bA,1]);bz=false;}else bA=bA+1;return!bz;},arrContains:function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=by.length;while(bz&&bA<bC)if(this.equals.apply(null,[by[bA],bx]))bz=false;else bA=bA+1;return!bz;},UnionWith:function(bx){var by;by=E.Get(bx);try{while(by.MoveNext())this.Add(by.Current());}finally{if("Dispose"in by)by.Dispose();}},SymmetricExceptWith:function(bx){var by,bz;by=E.Get(bx);try{while(by.MoveNext()){bz=by.Current();this.Contains(bz)?this.Remove(bz):this.Add(bz);}}finally{if("Dispose"in by)by.Dispose();}},SetEquals:function(bx){var by;by=new _9.New$4(bx,this.equals,this.hash);return this.get_Count()===by.get_Count()&&this.IsSupersetOf(by);},RemoveWhere:function(bx){var by,bz,bA,bB,bC;bz=_8.concat(this.data);by=0;for(bA=0,bB=bz.length-1;bA<=bB;bA++){bC=bz[bA];bx(bC)?this.Remove(bC)?by=by+1:void 0:void 0;}return by;},Remove:function(bx){var by;by=this.data[this.hash(bx)];return by==null?false:this.arrRemove(bx,by)&&(this.count=this.count-1,true);},Overlaps:function(bx){var by;by=this;return I.exists(function(bz){return by.Contains(bz);},bx);},IsSupersetOf:function(bx){var by;by=this;return I.forall(function(bz){return by.Contains(bz);},bx);},IsSubsetOf:function(bx){var by;by=new _9.New$4(bx,this.equals,this.hash);return H.forall(function(bz){return by.Contains(bz);},_8.concat(this.data));},IsProperSupersetOf:function(bx){var by;by=H.ofSeq(bx);return this.count>H.length(by)&&this.IsSupersetOf(by);},IsProperSubsetOf:function(bx){var by;by=H.ofSeq(bx);return this.count<H.length(by)&&this.IsSubsetOf(by);},IntersectWith:function(bx){var by,bz,bA,bB,bC;by=new _9.New$4(bx,this.equals,this.hash);bz=_8.concat(this.data);for(bA=0,bB=bz.length-1;bA<=bB;bA++){bC=bz[bA];!by.Contains(bC)?this.Remove(bC):void 0;}},ExceptWith:function(bx){var by;by=E.Get(bx);try{while(by.MoveNext())this.Remove(by.Current());}finally{if("Dispose"in by)by.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bx){var by,bz,bA,bB;by=0;bz=_8.concat(this.data);for(bA=0,bB=bz.length-1;bA<=bB;bA++)H.set(bx,bA,bz[bA]);},Contains:function(bx){var by;by=this.data[this.hash(bx)];return by==null?false:this.arrContains(bx,by);},Clear:function(){this.data=[];this.count=0;},Add:function(bx){return this.add(bx);},GetEnumerator:function(){return E.Get(_8.concat(this.data));},GetEnumerator0:function(){return E.Get(_8.concat(this.data));}},g,_9);_9.New=br.Ctor(function(bx,by){_9.New$4.call(this,bx,R.equals(by),function(bz){return R.getHashCode(by,bz);});},_9);_9.New$1=br.Ctor(function(bx){_9.New$4.call(this,[],R.equals(bx),function(by){return R.getHashCode(bx,by);});},_9);_9.New$2=br.Ctor(function(bx){_9.New$4.call(this,bx,bo.Equals,bo.Hash);},_9);_9.New$3=br.Ctor(function(){_9.New$4.call(this,[],bo.Equals,bo.Hash);},_9);_9.New$4=br.Ctor(function(bx,by,bz){var bA;this.equals=by;this.hash=bz;this.data=[];this.count=0;bA=E.Get(bx);try{while(bA.MoveNext())this.add(bA.Current());}finally{if("Dispose"in bA)bA.Dispose();}},_9);$.New=function(bx,by,bz){return{c:bx,v:by,f:bz};};ba.Force=function(bx){return bx.f();};ba.CreateFromValue=function(bx){return $.New(true,bx,ba.cachedLazy);};ba.Create=function(bx){return $.New(false,bx,ba.forceLazy);};ba.forceLazy=function(){var bx;bx=this.v();this.c=true;this.v=bx;this.f=ba.cachedLazy;return bx;};ba.cachedLazy=function(){return this.v;};bb=J.T=br.Class({GetSlice:function(bx,by){var bz;return bx!=null&&bx.$==1?by!=null&&by.$==1?(bz=bx.$0,J.ofSeq(I.take(by.$0-bz+1,J.skip(bz,this)))):J.skip(bx.$0,this):by!=null&&by.$==1?J.ofSeq(I.take(by.$0+1,this)):this;},get_Item:function(bx){return I.nth(bx,this);},get_Length:function(){return J.length(this);},GetEnumerator:function(){return new F.New(this,null,function(bx){var by;by=bx.s;return by.$==0?false:(bx.c=by.$0,bx.s=by.$1,true);},void 0);},GetEnumerator0:function(){return E.Get(this);}},null,bb);bb.Empty=new bb({$:0});J.allPairs=function(bx,by){return J.ofArray(H.allPairs(H.ofList(bx),H.ofList(by)));};J.append=function(bx,by){var bz,bA,bB,bC,bD;if(bx.$==0)return by;else if(by.$==0)return bx;else{bC=new bb({$:1});bz=bC;bA=bx;bB=true;while(bB){bz.$0=bA.$0;bA=bA.$1;bA.$==0?bB=false:bz=(bD=new bb({$:1}),bz.$1=bD,bD);}bz.$1=by;return bC;}};J.choose=function(bx,by){return J.ofSeq(I.choose(bx,by));};J.collect=function(bx,by){return J.ofSeq(I.collect(bx,by));};J.concat=function(bx){return J.ofSeq(I.concat(bx));};J.exists=function(bx,by){var bz,bA;bz=false;bA=by;while(!bz&&bA.$==1){bz=bx(bA.$0);bA=bA.$1;}return bz;};J.exists2=function(bx,by,bz){var bA,bB,bC;bA=false;bB=by;bC=bz;while(!bA&&bB.$==1&&bC.$==1){bA=bx(bB.$0,bC.$0);bB=bB.$1;bC=bC.$1;}!bA&&(bB.$==1||bC.$==1)?J.badLengths():void 0;return bA;};J.filter=function(bx,by){return J.ofSeq(I.filter(bx,by));};J.fold2=function(bx,by,bz,bA){return H.fold2(bx,by,H.ofList(bz),H.ofList(bA));};J.foldBack=function(bx,by,bz){return H.foldBack(bx,H.ofList(by),bz);};J.foldBack2=function(bx,by,bz,bA){return H.foldBack2(bx,H.ofList(by),H.ofList(bz),bA);};J.forAll=function(bx,by){var bz,bA;bz=true;bA=by;while(bz&&bA.$==1){bz=bx(bA.$0);bA=bA.$1;}return bz;};J.forall2=function(bx,by,bz){var bA,bB,bC;bA=true;bB=by;bC=bz;while(bA&&bB.$==1&&bC.$==1){bA=bx(bB.$0,bC.$0);bB=bB.$1;bC=bC.$1;}bA&&(bB.$==1||bC.$==1)?J.badLengths():void 0;return bA;};J.head=function(bx){return bx.$==1?bx.$0:J.listEmpty();};J.init=function(bx,by){return J.ofArray(H.init(bx,by));};J.iter=function(bx,by){var bz;bz=by;while(bz.$==1){bx(J.head(bz));bz=J.tail(bz);}};J.iter2=function(bx,by,bz){var bA,bB;bA=by;bB=bz;while(bA.$==1){bB.$==0?J.badLengths():void 0;bx(J.head(bA),J.head(bB));bA=J.tail(bA);bB=J.tail(bB);}bB.$==1?J.badLengths():void 0;};J.iteri=function(bx,by){var bz,bA;bz=by;bA=0;while(bz.$==1){bx(bA,J.head(bz));bz=J.tail(bz);bA=bA+1;}};J.iteri2=function(bx,by,bz){var bA,bB,bC;bA=by;bB=bz;bC=0;while(bA.$==1){bB.$==0?J.badLengths():void 0;bx(bC,J.head(bA),J.head(bB));bA=J.tail(bA);bB=J.tail(bB);bC=bC+1;}bB.$==1?J.badLengths():void 0;};J.length=function(bx){var by,bz;by=bx;bz=0;while(by.$==1){by=J.tail(by);bz=bz+1;}return bz;};J.map=function(bx,by){var bz,bA,bB,bC,bD;if(by.$==0)return by;else{bC=new bb({$:1});bz=bC;bA=by;bB=true;while(bB){bz.$0=bx(bA.$0);bA=bA.$1;bA.$==0?bB=false:bz=(bD=new bb({$:1}),bz.$1=bD,bD);}bz.$1=bb.Empty;return bC;}};J.map2=function(bx,by,bz){var bA,bB,bC,bD,bE,bF;bA=by.$==1&&bz.$==1;if(!bA)return by.$==1||bz.$==1?J.badLengths():by;else{bE=new bb({$:1});bB=bE;bC=by;bD=bz;while(bA){bB.$0=bx(bC.$0,bD.$0);bC=bC.$1;bD=bD.$1;bC.$==1&&bD.$==1?bB=(bF=new bb({$:1}),bB.$1=bF,bF):bA=false;}if(bC.$==1||bD.$==1)J.badLengths();bB.$1=bb.Empty;return bE;}};J.map3=function(bx,by,bz,bA){var bB,bC,bD,bE,bF,bG,bH;bB=by.$==1&&bz.$==1&&bA.$==1;if(!bB)return by.$==1||bz.$==1||bA.$==1?J.badLengths():by;else{bG=new bb({$:1});bC=bG;bD=by;bE=bz;bF=bA;while(bB){bC.$0=bx(bD.$0,bE.$0,bF.$0);bD=bD.$1;bE=bE.$1;bF=bF.$1;bD.$==1&&bE.$==1&&bF.$==1?bC=(bH=new bb({$:1}),bC.$1=bH,bH):bB=false;}if(bD.$==1||bE.$==1||bF.$==1)J.badLengths();bC.$1=bb.Empty;return bG;}};J.mapi=function(bx,by){var bz,bA,bB,bC,bD,bE;if(by.$==0)return by;else{bD=new bb({$:1});bz=bD;bA=by;bB=0;bC=true;while(bC){bz.$0=bx(bB,bA.$0);bA=bA.$1;bA.$==0?bC=false:(bz=(bE=new bb({$:1}),bz.$1=bE,bE),bB=bB+1);}bz.$1=bb.Empty;return bD;}};J.mapi2=function(bx,by,bz){var bA,bB,bC,bD,bE,bF,bG;bA=by.$==1&&bz.$==1;if(!bA)return by.$==1||bz.$==1?J.badLengths():by;else{bF=new bb({$:1});bB=bF;bC=by;bD=bz;bE=0;while(bA){bB.$0=bx(bE,bC.$0,bD.$0);bC=bC.$1;bD=bD.$1;bC.$==1&&bD.$==1?(bB=(bG=new bb({$:1}),bB.$1=bG,bG),bE=bE+1):bA=false;}if(bC.$==1||bD.$==1)J.badLengths();bB.$1=bb.Empty;return bF;}};J.max=function(bx){return I.reduce(function(by,bz){return bo.Compare(by,bz)===1?by:bz;},bx);};J.maxBy=function(bx,by){return I.reduce(function(bz,bA){return bo.Compare(bx(bz),bx(bA))===1?bz:bA;},by);};J.min=function(bx){return I.reduce(function(by,bz){return bo.Compare(by,bz)===-1?by:bz;},bx);};J.minBy=function(bx,by){return I.reduce(function(bz,bA){return bo.Compare(bx(bz),bx(bA))===-1?bz:bA;},by);};J.ofArray=function(bx){var by,bz,bA;by=bb.Empty;for(bz=H.length(bx)-1,bA=0;bz>=bA;bz--)by=new bb({$:1,$0:H.get(bx,bz),$1:by});return by;};J.ofSeq=function(bx){var by,bz,bA,bB,bC,bD;if(bx instanceof bb)return bx;else if(bx instanceof a.Array)return J.ofArray(bx);else{by=E.Get(bx);try{bA=by.MoveNext();if(!bA)bz=bb.Empty;else{bC=new bb({$:1});bB=bC;while(bA){bB.$0=by.Current();by.MoveNext()?bB=(bD=new bb({$:1}),bB.$1=bD,bD):bA=false;}bB.$1=bb.Empty;bz=bC;}return bz;}finally{if("Dispose"in by)by.Dispose();}}};J.partition=function(bx,by){var bz;bz=H.partition(bx,H.ofList(by));return[J.ofArray(bz[0]),J.ofArray(bz[1])];};J.permute=function(bx,by){return J.ofArray(H.permute(bx,H.ofList(by)));};J.reduceBack=function(bx,by){return H.reduceBack(bx,H.ofList(by));};J.replicate=function(bx,by){return J.ofArray(H.create(bx,by));};J.rev=function(bx){var by,bz;by=bb.Empty;bz=bx;while(bz.$==1){by=new bb({$:1,$0:bz.$0,$1:by});bz=bz.$1;}return by;};J.scan=function(bx,by,bz){return J.ofSeq(I.scan(bx,by,bz));};J.scanBack=function(bx,by,bz){return J.ofArray(H.scanBack(bx,H.ofList(by),bz));};J.sort=function(bx){var by;by=H.ofList(bx);H.sortInPlace(by);return J.ofArray(by);};J.sortBy=function(bx,by){return J.sortWith(function(bz,bA){return bo.Compare(bx(bz),bx(bA));},by);};J.sortByDescending=function(bx,by){return J.sortWith(function(bz,bA){return-bo.Compare(bx(bz),bx(bA));},by);};J.sortDescending=function(bx){var by;by=H.ofList(bx);H.sortInPlaceByDescending(a.id,by);return J.ofArray(by);};J.sortWith=function(bx,by){var bz;bz=H.ofList(by);H.sortInPlaceWith(bx,bz);return J.ofArray(bz);};J.tail=function(bx){return bx.$==1?bx.$1:J.listEmpty();};J.unzip=function(bx){var by,bz,bA,bB;by=[];bz=[];bA=E.Get(bx);try{while(bA.MoveNext()){bB=bA.Current();by.push(bB[0]);bz.push(bB[1]);}}finally{if("Dispose"in bA)bA.Dispose();}return[J.ofArray(by.slice(0)),J.ofArray(bz.slice(0))];};J.unzip3=function(bx){var by,bz,bA,bB,bC;by=[];bz=[];bA=[];bB=E.Get(bx);try{while(bB.MoveNext()){bC=bB.Current();by.push(bC[0]);bz.push(bC[1]);bA.push(bC[2]);}}finally{if("Dispose"in bB)bB.Dispose();}return[J.ofArray(by.slice(0)),J.ofArray(bz.slice(0)),J.ofArray(bA.slice(0))];};J.zip=function(bx,by){return J.map2(function(bz,bA){return[bz,bA];},bx,by);};J.zip3=function(bx,by,bz){return J.map3(function(bA,bB,bC){return[bA,bB,bC];},bx,by,bz);};J.chunkBySize=function(bx,by){return J.map(J.ofArray,J.ofSeq(I.chunkBySize(bx,by)));};J.compareWith=function(bx,by,bz){return I.compareWith(bx,by,bz);};J.countBy=function(bx,by){return J.ofArray(H.countBy(bx,H.ofList(by)));};J.distinct=function(bx){return J.ofSeq(I.distinct(bx));};J.distinctBy=function(bx,by){return J.ofSeq(I.distinctBy(bx,by));};J.splitInto=function(bx,by){return J.map(J.ofArray,J.ofArray(H.splitInto(bx,H.ofList(by))));};J.except=function(bx,by){return J.ofSeq(I.except(bx,by));};J.tryFindBack=function(bx,by){return H.tryFindBack(bx,H.ofList(by));};J.findBack=function(bx,by){var bz;bz=J.tryFindBack(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};J.findIndexBack=function(bx,by){var bz;bz=H.tryFindIndexBack(bx,H.ofList(by));return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};J.groupBy=function(bx,by){var bz;function bA(bB,bC){return[bB,J.ofArray(bC)];}bz=H.groupBy(bx,H.ofList(by));H.mapInPlace(function(bB){return bA(bB[0],bB[1]);},bz);return J.ofArray(bz);};J.last=function(bx){var by,bz;bx.$==0?J.listEmpty():null;by=bx;bz=by.$1;while(bz.$==1){by=bz;bz=by.$1;}return by.$0;};J.contains=function(bx,by){var bz,bA;bz=false;bA=by;while(!bz&&bA.$==1){bz=bo.Equals(bx,bA.$0);bA=bA.$1;}return bz;};J.mapFold=function(bx,by,bz){var bA;bA=H.mapFold(bx,by,H.ofList(bz));return[J.ofArray(bA[0]),bA[1]];};J.mapFoldBack=function(bx,by,bz){var bA;bA=H.mapFoldBack(bx,H.ofList(by),bz);return[J.ofArray(bA[0]),bA[1]];};J.pairwise=function(bx){return J.ofSeq(I.pairwise(bx));};J.indexed=function(bx){return J.mapi(function(by,bz){return[by,bz];},bx);};J.tryHead=function(bx){return bx.$==0?null:{$:1,$0:bx.$0};};J.exactlyOne=function(bx){var by;return bx.$==1&&(bx.$1.$==0&&(by=bx.$0,true))?by:w.FailWith("The input does not have precisely one element.");};J.unfold=function(bx,by){return J.ofSeq(I.unfold(bx,by));};J.windowed=function(bx,by){return J.ofSeq(I.map(J.ofArray,I.windowed(bx,by)));};J.splitAt=function(bx,by){return[J.ofSeq(I.take(bx,by)),J.skip(bx,by)];};J.listEmpty=function(){return w.FailWith("The input list was empty.");};J.badLengths=function(){return w.FailWith("The lists have different lengths.");};x.getOrValue=function(bx,by){return bx==null?by:bx;};x.get=function(bx){return bx==null?w.FailWith("Nullable object must have a value."):bx;};w.range=function(bx,by){var bz;bz=1+by-bx;return bz<=0?[]:I.init(bz,function(bA){return bA+bx;});};w.step=function(bx,by,bz){var bA;bA=w.Sign(by);return I.takeWhile(function(bB){return bA*(bz-bB)>=0;},I.initInfinite(function(bB){return bx+bB*by;}));};w.KeyValue=function(bx){return[bx.K,bx.V];};w.Truncate=function(bx){return bx<0?bw.ceil(bx):bw.floor(bx);};w.Sign=function(bx){return bx===0?0:bx<0?-1:1;};w.Pown=function(bx,by){function bz(bA){var bB;return bA===1?bx:bA%2===0?(bB=bz(bA/2>>0),bB*bB):bx*bz(bA-1);}return bz(by);};w.InvalidArg=function(bx,by){throw new Y.New(bx,by);};w.InvalidOp=function(bx){throw new _1.New(bx);};w.FailWith=function(bx){throw a.Error(bx);};bc.string=function(bx,by,bz){return by==null?bz!=null&&bz.$==1?bx.slice(0,bz.$0+1):"":bz==null?bx.slice(by.$0):bx.slice(by.$0,bz.$0+1);};bc.array=function(bx,by,bz){return by==null?bz!=null&&bz.$==1?bx.slice(0,bz.$0+1):[]:bz==null?bx.slice(by.$0):bx.slice(by.$0,bz.$0+1);};bc.setArray=function(bx,by,bz,bA){var bB;bB=by!=null&&by.$==1?by.$0:0;H.setSub(bx,bB,(bz!=null&&bz.$==1?bz.$0:bx.length-1)-bB+1,bA);};bc.array2D=function(bx,by,bz,bA,bB){var bC,bD;bC=by!=null&&by.$==1?by.$0:0;bD=bA!=null&&bA.$==1?bA.$0:0;return H.sub2D(bx,bC,bD,(bz!=null&&bz.$==1?bz.$0:bx.length-1)-bC+1,(bB!=null&&bB.$==1?bB.$0:(bx.length?bx[0].length:0)-1)-bD+1);};bc.array2Dfix1=function(bx,by,bz,bA){var bB,bC,bD,bE,bF,bG;bB=bz!=null&&bz.$==1?bz.$0:0;bC=bA!=null&&bA.$==1?bA.$0:(bx.length?bx[0].length:0)-1;bD=bC-bB+1;bE=new a.Array(bD);for(bF=0,bG=bD-1;bF<=bG;bF++)H.set(bE,bF,H.get2D(bx,by,bB+bF));return bE;};bc.array2Dfix2=function(bx,by,bz,bA){var bB,bC,bD,bE,bF,bG;bB=by!=null&&by.$==1?by.$0:0;bC=bz!=null&&bz.$==1?bz.$0:bx.length-1;bD=bC-bB+1;bE=new a.Array(bD);for(bF=0,bG=bD-1;bF<=bG;bF++)H.set(bE,bF,H.get2D(bx,bB+bF,bA));return bE;};bc.setArray2Dfix1=function(bx,by,bz,bA,bB){var bC,bD,bE,bF;bC=bz!=null&&bz.$==1?bz.$0:0;bD=bA!=null&&bA.$==1?bA.$0:(bx.length?bx[0].length:0)-1;for(bE=0,bF=bD-bC+1-1;bE<=bF;bE++)H.set2D(bx,by,bC+bE,H.get(bB,bE));};bc.setArray2Dfix2=function(bx,by,bz,bA,bB){var bC,bD,bE,bF;bC=by!=null&&by.$==1?by.$0:0;bD=bz!=null&&bz.$==1?bz.$0:bx.length-1;for(bE=0,bF=bD-bC+1-1;bE<=bF;bE++)H.set2D(bx,bC+bE,bA,H.get(bB,bE));};bc.setArray2D=function(bx,by,bz,bA,bB,bC){var bD,bE;bD=by!=null&&by.$==1?by.$0:0;bE=bA!=null&&bA.$==1?bA.$0:0;H.setSub2D(bx,bD,bE,(bz!=null&&bz.$==1?bz.$0:bx.length-1)-bD+1,(bB!=null&&bB.$==1?bB.$0:(bx.length?bx[0].length:0)-1)-bE+1,bC);};bd.filter=function(bx,by){var bz;return by!=null&&by.$==1&&(bx(by.$0)&&(bz=by.$0,true))?by:null;};bd.fold=function(bx,by,bz){return bz==null?by:bx(by,bz.$0);};bd.foldBack=function(bx,by,bz){return by==null?bz:bx(by.$0,bz);};bd.ofNullable=function(bx){return bx==null?null:{$:1,$0:x.get(bx)};};bd.ofObj=function(bx){return bx==null?null:{$:1,$0:bx};};bd.toArray=function(bx){return bx==null?[]:[bx.$0];};bd.toList=function(bx){return bx==null?bb.Empty:J.ofArray([bx.$0]);};bd.toNullable=function(bx){return bx!=null&&bx.$==1?bx.$0:null;};bd.toObj=function(bx){return bx==null?null:bx.$0;};be.CopyTo=function(bx,by,bz){H.blit(bx,0,by,bz,H.length(bx));};be.Contains=function(bx,by){return I.exists(function(bz){return bo.Equals(by,bz);},bx);};be.Clear=function(bx){bx.splice(0,H.length(bx));};bf=b.Random=br.Class({NextBytes:function(bx){var by,bz;for(by=0,bz=H.length(bx)-1;by<=bz;by++)H.set(bx,by,bw.floor(bw.random()*256));},Next:function(bx,by){return bx>by?w.FailWith("'minValue' cannot be greater than maxValue."):bx+bw.floor(bw.random()*(by-bx));},Next$1:function(bx){return bx<0?w.FailWith("'maxValue' must be greater than zero."):bw.floor(bw.random()*bx);},Next$2:function(){return bw.floor(bw.random()*2147483648);}},g,bf);bf.New=br.Ctor(function(){},bf);bg.New=function(bx){return[bx];};bh.MapError=function(bx,by){return by.$==1?{$:1,$0:bx(by.$0)}:{$:0,$0:by.$0};};bh.Map=function(bx,by){return by.$==1?{$:1,$0:by.$0}:{$:0,$0:bx(by.$0)};};bh.Bind=function(bx,by){return by.$==1?{$:1,$0:by.$0}:bx(by.$0);};I.enumFinally=function(bx,by){return{GetEnumerator:function(){var bz;try{bz=E.Get(bx);}catch(bA){by();throw bA;}return new F.New(null,null,function(bB){return bz.MoveNext()&&(bB.c=bz.Current(),true);},function(){bz.Dispose();by();});}};};I.enumUsing=function(bx,by){return{GetEnumerator:function(){var bz;try{bz=E.Get(by(bx));}catch(bA){bx.Dispose();throw bA;}return new F.New(null,null,function(bB){return bz.MoveNext()&&(bB.c=bz.Current(),true);},function(){bz.Dispose();bx.Dispose();});}};};I.enumWhile=function(bx,by){return{GetEnumerator:function(){return new F.New(null,null,function(bz){var bA;while(true){bA=bz.s;if(bo.Equals(bA,null)){if(bx()){bz.s=E.Get(by);bz=bz;}else return false;}else if(bA.MoveNext()){bz.c=bA.Current();return true;}else{bA.Dispose();bz.s=null;bz=bz;}}},function(bz){var bA;bA=bz.s;!bo.Equals(bA,null)?bA.Dispose():void 0;});}};};bi.createEvent=function(bx,by,bz){return{AddHandler:bx,RemoveHandler:by,Subscribe:function(bA){var bB;bB=bz(function(){return function(bC){return bA.OnNext(bC);};});bx(bB);return{Dispose:function(){return by(bB);}};}};};I.allPairs=function(bx,by){var bz;bz=I.cache(by);return I.collect(function(bA){return I.map(function(bB){return[bA,bB];},bz);},bx);};I.append=function(bx,by){return{GetEnumerator:function(){var bz;bz=[true];return new F.New(E.Get(bx),null,function(bA){var bB;return bA.s.MoveNext()?(bA.c=bA.s.Current(),true):(bB=bA.s,!bo.Equals(bB,null)?bB.Dispose():void 0,bA.s=null,bz[0]&&(bz[0]=false,bA.s=E.Get(by),bA.s.MoveNext()?(bA.c=bA.s.Current(),true):(bA.s.Dispose(),bA.s=null,false)));},function(bA){var bB;bB=bA.s;!bo.Equals(bB,null)?bB.Dispose():void 0;});}};};I.average=function(bx){var by,bz;by=I.fold(function(bA,bB){return(function(bC){var bD,bE;bD=bC[0];bE=bC[1];return function(bF){return[bD+1,bE+bF];};}(bA))(bB);},[0,0],bx);bz=by[0];return bz===0?w.InvalidArg("source","The input sequence was empty."):by[1]/bz;};I.averageBy=function(bx,by){var bz,bA;bz=I.fold(function(bB,bC){return(function(bD){var bE,bF;bE=bD[0];bF=bD[1];return function(bG){return[bE+1,bF+bx(bG)];};}(bB))(bC);},[0,0],by);bA=bz[0];return bA===0?w.InvalidArg("source","The input sequence was empty."):bz[1]/bA;};I.cache=function(bx){var by,bz;by=[];bz=[E.Get(bx)];return{GetEnumerator:function(){return new F.New(0,null,function(bA){var bB;return bA.s<by.length?(bA.c=by[bA.s],bA.s=bA.s+1,true):(bB=bz[0],bo.Equals(bB,null)?false:bB.MoveNext()?(bA.s=bA.s+1,bA.c=bB.Current(),by.push(bA.c),true):(bB.Dispose(),bz[0]=null,false));},void 0);}};};I.choose=function(bx,by){return I.collect(function(bz){var bA;bA=bx(bz);return bA==null?bb.Empty:J.ofArray([bA.$0]);},by);};I.collect=function(bx,by){return I.concat(I.map(bx,by));};I.compareWith=function(bx,by,bz){var bA,bB,bC,bD,bE;bA=E.Get(by);try{bC=E.Get(bz);try{bD=0;bE=true;while(bE&&bD===0)if(bA.MoveNext())bD=bC.MoveNext()?bx(bA.Current(),bC.Current()):1;else if(bC.MoveNext())bD=-1;else bE=false;bB=bD;}finally{if("Dispose"in bC)bC.Dispose();}return bB;}finally{if("Dispose"in bA)bA.Dispose();}};I.concat=function(bx){return{GetEnumerator:function(){var by;by=E.Get(bx);return new F.New(null,null,function(bz){var bA;while(true){bA=bz.s;if(bo.Equals(bA,null)){if(by.MoveNext()){bz.s=E.Get(by.Current());bz=bz;}else{by.Dispose();return false;}}else if(bA.MoveNext()){bz.c=bA.Current();return true;}else{bz.Dispose();bz.s=null;bz=bz;}}},function(bz){var bA;bA=bz.s;!bo.Equals(bA,null)?bA.Dispose():void 0;!bo.Equals(by,null)?by.Dispose():void 0;});}};};I.countBy=function(bx,by){return I.delay(function(){return H.countBy(bx,H.ofSeq(by));});};I.delay=function(bx){return{GetEnumerator:function(){return E.Get(bx());}};};I.distinct=function(bx){return I.distinctBy(a.id,bx);};I.distinctBy=function(bx,by){return{GetEnumerator:function(){var bz,bA;bz=E.Get(by);bA=new _9.New$3();return new F.New(null,null,function(bB){var bC,bD;if(bz.MoveNext()){bC=bz.Current();bD=bA.Add(bx(bC));while(!bD&&bz.MoveNext()){bC=bz.Current();bD=bA.Add(bx(bC));}return bD&&(bB.c=bC,true);}else return false;},function(){bz.Dispose();});}};};I.splitInto=function(bx,by){bx<=0?w.FailWith("Count must be positive"):void 0;return I.delay(function(){return H.splitInto(bx,H.ofSeq(by));});};I.exactlyOne=function(bx){var by,bz;by=E.Get(bx);try{return by.MoveNext()?(bz=by.Current(),by.MoveNext()?w.InvalidOp("Sequence contains more than one element"):bz):w.InvalidOp("Sequence contains no elements");}finally{if("Dispose"in by)by.Dispose();}};I.exists=function(bx,by){var bz,bA;bz=E.Get(by);try{bA=false;while(!bA&&bz.MoveNext())bA=bx(bz.Current());return bA;}finally{if("Dispose"in bz)bz.Dispose();}};I.exists2=function(bx,by,bz){var bA,bB,bC,bD;bA=E.Get(by);try{bC=E.Get(bz);try{bD=false;while(!bD&&bA.MoveNext()&&bC.MoveNext())bD=bx(bA.Current(),bC.Current());bB=bD;}finally{if("Dispose"in bC)bC.Dispose();}return bB;}finally{if("Dispose"in bA)bA.Dispose();}};I.filter=function(bx,by){return{GetEnumerator:function(){var bz;bz=E.Get(by);return new F.New(null,null,function(bA){var bB,bC,bD;bB=bz.MoveNext();bC=bz.Current();bD=false;while(bB)if(bx(bC)){bA.c=bC;bD=true;bB=false;}else if(bz.MoveNext())bC=bz.Current();else bB=false;return bD;},function(){bz.Dispose();});}};};I.find=function(bx,by){var bz;bz=I.tryFind(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};I.findIndex=function(bx,by){var bz;bz=I.tryFindIndex(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};I.fold=function(bx,by,bz){var bA,bB;bA=by;bB=E.Get(bz);try{while(bB.MoveNext())bA=bx(bA,bB.Current());return bA;}finally{if("Dispose"in bB)bB.Dispose();}};I.forall=function(bx,by){return!I.exists(function(bz){return!bx(bz);},by);};I.forall2=function(bx,by,bz){return!I.exists2(function(bA,bB){return!bx(bA,bB);},by,bz);};I.groupBy=function(bx,by){return I.delay(function(){return H.groupBy(bx,H.ofSeq(by));});};I.head=function(bx){var by;by=E.Get(bx);try{return by.MoveNext()?by.Current():I.insufficient();}finally{if("Dispose"in by)by.Dispose();}};I.init=function(bx,by){return I.take(bx,I.initInfinite(by));};I.initInfinite=function(bx){return{GetEnumerator:function(){return new F.New(0,null,function(by){by.c=bx(by.s);by.s=by.s+1;return true;},void 0);}};};I.isEmpty=function(bx){var by;by=E.Get(bx);try{return!by.MoveNext();}finally{if("Dispose"in by)by.Dispose();}};I.iter=function(bx,by){var bz;bz=E.Get(by);try{while(bz.MoveNext())bx(bz.Current());}finally{if("Dispose"in bz)bz.Dispose();}};I.iter2=function(bx,by,bz){var bA,bB,bC;bA=E.Get(by);try{bC=E.Get(bz);try{while(bA.MoveNext()&&bC.MoveNext())bx(bA.Current(),bC.Current());bB=void 0;}finally{if("Dispose"in bC)bC.Dispose();}bB;}finally{if("Dispose"in bA)bA.Dispose();}};I.iteri=function(bx,by){var bz,bA;bz=0;bA=E.Get(by);try{while(bA.MoveNext()){bx(bz,bA.Current());bz=bz+1;}}finally{if("Dispose"in bA)bA.Dispose();}};I.length=function(bx){var by,bz;by=0;bz=E.Get(bx);try{while(bz.MoveNext())by=by+1;return by;}finally{if("Dispose"in bz)bz.Dispose();}};I.map=function(bx,by){return{GetEnumerator:function(){var bz;bz=E.Get(by);return new F.New(null,null,function(bA){return bz.MoveNext()&&(bA.c=bx(bz.Current()),true);},function(){bz.Dispose();});}};};I.mapi=function(bx,by){return I.map2(bx,I.initInfinite(a.id),by);};I.map2=function(bx,by,bz){return{GetEnumerator:function(){var bA,bB;bA=E.Get(by);bB=E.Get(bz);return new F.New(null,null,function(bC){return bA.MoveNext()&&bB.MoveNext()&&(bC.c=bx(bA.Current(),bB.Current()),true);},function(){bA.Dispose();bB.Dispose();});}};};I.maxBy=function(bx,by){return I.reduce(function(bz,bA){return bo.Compare(bx(bz),bx(bA))>=0?bz:bA;},by);};I.minBy=function(bx,by){return I.reduce(function(bz,bA){return bo.Compare(bx(bz),bx(bA))<=0?bz:bA;},by);};I.max=function(bx){return I.reduce(function(by,bz){return bo.Compare(by,bz)>=0?by:bz;},bx);};I.min=function(bx){return I.reduce(function(by,bz){return bo.Compare(by,bz)<=0?by:bz;},bx);};I.nth=function(bx,by){var bz,bA;if(bx<0)w.FailWith("negative index requested");bz=-1;bA=E.Get(by);try{while(bz<bx){!bA.MoveNext()?I.insufficient():void 0;bz=bz+1;}return bA.Current();}finally{if("Dispose"in bA)bA.Dispose();}};I.pairwise=function(bx){return I.map(function(by){return[H.get(by,0),H.get(by,1)];},I.windowed(2,bx));};I.pick=function(bx,by){var bz;bz=I.tryPick(bx,by);return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};I.readOnly=function(bx){return{GetEnumerator:function(){return E.Get(bx);}};};I.reduce=function(bx,by){var bz,bA;bz=E.Get(by);try{if(!bz.MoveNext())w.FailWith("The input sequence was empty");bA=bz.Current();while(bz.MoveNext())bA=bx(bA,bz.Current());return bA;}finally{if("Dispose"in bz)bz.Dispose();}};I.scan=function(bx,by,bz){return{GetEnumerator:function(){var bA;bA=E.Get(bz);return new F.New(false,null,function(bB){return bB.s?bA.MoveNext()&&(bB.c=bx(bB.c,bA.Current()),true):(bB.c=by,bB.s=true,true);},function(){bA.Dispose();});}};};I.skip=function(bx,by){return{GetEnumerator:function(){var bz;bz=E.Get(by);return new F.New(true,null,function(bA){var bB,bC;if(bA.s){for(bB=1,bC=bx;bB<=bC;bB++)if(!bz.MoveNext())I.insufficient();bA.s=false;}else null;return bz.MoveNext()&&(bA.c=bz.Current(),true);},function(){bz.Dispose();});}};};I.skipWhile=function(bx,by){return{GetEnumerator:function(){var bz;bz=E.Get(by);return new F.New(true,null,function(bA){var bB,bC;if(bA.s){bB=true;bC=false;while(bB)if(bz.MoveNext()){if(!bx(bz.Current()))bB=false;}else{bB=false;bC=true;}bA.s=false;return bC?false:(bA.c=bz.Current(),true);}else return bz.MoveNext()&&(bA.c=bz.Current(),true);},function(){bz.Dispose();});}};};I.sort=function(bx){return I.sortBy(a.id,bx);};I.sortBy=function(bx,by){return I.delay(function(){var bz;bz=H.ofSeq(by);H.sortInPlaceBy(bx,bz);return bz;});};I.sortByDescending=function(bx,by){return I.delay(function(){var bz;bz=H.ofSeq(by);H.sortInPlaceByDescending(bx,bz);return bz;});};I.sortDescending=function(bx){return I.sortByDescending(a.id,bx);};I.sum=function(bx){return I.fold(function(by,bz){return by+bz;},0,bx);};I.sumBy=function(bx,by){return I.fold(function(bz,bA){return bz+bx(bA);},0,by);};I.take=function(bx,by){bx<0?I.nonNegative():void 0;return{GetEnumerator:function(){var bz;bz=[E.Get(by)];return new F.New(0,null,function(bA){var bB;bA.s=bA.s+1;return bA.s>bx?false:(bB=bz[0],bo.Equals(bB,null)?I.insufficient():bB.MoveNext()?(bA.c=bB.Current(),bA.s===bx?(bB.Dispose(),bz[0]=null):void 0,true):(bB.Dispose(),bz[0]=null,I.insufficient()));},function(){var bA;bA=bz[0];!bo.Equals(bA,null)?bA.Dispose():void 0;});}};};I.takeWhile=function(bx,by){return I.delay(function(){return I.enumUsing(E.Get(by),function(bz){return I.enumWhile(function(){return bz.MoveNext()&&bx(bz.Current());},I.delay(function(){return[bz.Current()];}));});});};I.truncate=function(bx,by){return I.delay(function(){return I.enumUsing(E.Get(by),function(bz){var bA;bA=[0];return I.enumWhile(function(){return bz.MoveNext()&&bA[0]<bx;},I.delay(function(){bA[0]++;return[bz.Current()];}));});});};I.tryFind=function(bx,by){var bz,bA,bB;bz=E.Get(by);try{bA=null;while(bA==null&&bz.MoveNext()){bB=bz.Current();bx(bB)?bA={$:1,$0:bB}:void 0;}return bA;}finally{if("Dispose"in bz)bz.Dispose();}};I.findBack=function(bx,by){var bz;bz=H.tryFindBack(bx,H.ofSeq(by));return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};I.tryFindIndex=function(bx,by){var bz,bA,bB;bz=E.Get(by);try{bA=true;bB=0;while(bA&&bz.MoveNext())if(bx(bz.Current()))bA=false;else bB=bB+1;return bA?null:{$:1,$0:bB};}finally{if("Dispose"in bz)bz.Dispose();}};I.findIndexBack=function(bx,by){var bz;bz=H.tryFindIndexBack(bx,H.ofSeq(by));return bz==null?w.FailWith("KeyNotFoundException"):bz.$0;};I.tryPick=function(bx,by){var bz,bA;bz=E.Get(by);try{bA=null;while(bo.Equals(bA,null)&&bz.MoveNext())bA=bx(bz.Current());return bA;}finally{if("Dispose"in bz)bz.Dispose();}};I.unfold=function(bx,by){return{GetEnumerator:function(){return new F.New(by,null,function(bz){var bA;bA=bx(bz.s);return bA==null?false:(bz.c=bA.$0[0],bz.s=bA.$0[1],true);},void 0);}};};I.windowed=function(bx,by){bx<=0?w.FailWith("The input must be positive."):void 0;return I.delay(function(){return I.enumUsing(E.Get(by),function(bz){var bA;bA=[];return I.append(I.enumWhile(function(){return bA.length<bx&&bz.MoveNext();},I.delay(function(){bA.push(bz.Current());return[];})),I.delay(function(){return bA.length===bx?I.append([bA.slice(0)],I.delay(function(){return I.enumWhile(function(){return bz.MoveNext();},I.delay(function(){bA.shift();bA.push(bz.Current());return[bA.slice(0)];}));})):[];}));});});};I.zip=function(bx,by){return I.map2(function(bz,bA){return[bz,bA];},bx,by);};I.map3=function(bx,by,bz,bA){return{GetEnumerator:function(){var bB,bC,bD;bB=E.Get(by);bC=E.Get(bz);bD=E.Get(bA);return new F.New(null,null,function(bE){return bB.MoveNext()&&bC.MoveNext()&&bD.MoveNext()&&(bE.c=bx(bB.Current(),bC.Current(),bD.Current()),true);},function(){bB.Dispose();bC.Dispose();bD.Dispose();});}};};I.zip3=function(bx,by,bz){return I.map3(function(bA,bB,bC){return[bA,bB,bC];},bx,by,bz);};I.fold2=function(bx,by,bz,bA){return H.fold2(bx,by,H.ofSeq(bz),H.ofSeq(bA));};I.foldBack=function(bx,by,bz){return H.foldBack(bx,H.ofSeq(by),bz);};I.foldBack2=function(bx,by,bz,bA){return H.foldBack2(bx,H.ofSeq(by),H.ofSeq(bz),bA);};I.iteri2=function(bx,by,bz){var bA,bB,bC,bD;bA=0;bB=E.Get(by);try{bD=E.Get(bz);try{while(bB.MoveNext()&&bD.MoveNext()){bx(bA,bB.Current(),bD.Current());bA=bA+1;}bC=void 0;}finally{if("Dispose"in bD)bD.Dispose();}bC;}finally{if("Dispose"in bB)bB.Dispose();}};I.mapi2=function(bx,by,bz){return I.map3(bx,I.initInfinite(a.id),by,bz);};I.mapFold=function(bx,by,bz){return H.mapFold(bx,by,H.ofSeq(bz));};I.mapFoldBack=function(bx,by,bz){return H.mapFoldBack(bx,H.ofSeq(by),bz);};I.permute=function(bx,by){return I.delay(function(){return H.permute(bx,H.ofSeq(by));});};I.reduceBack=function(bx,by){return H.reduceBack(bx,H.ofSeq(by));};I.replicate=function(bx,by){bx<0?I.nonNegative():void 0;return I.delay(function(){return I.map(function(){return by;},w.range(0,bx-1));});};I.rev=function(bx){return I.delay(function(){return H.ofSeq(bx).slice().reverse();});};I.scanBack=function(bx,by,bz){return I.delay(function(){return H.scanBack(bx,H.ofSeq(by),bz);});};I.indexed=function(bx){return I.mapi(function(by,bz){return[by,bz];},bx);};I.sortWith=function(bx,by){return I.delay(function(){var bz;bz=H.ofSeq(by);H.sortInPlaceWith(bx,bz);return bz;});};I.tail=function(bx){return I.skip(1,bx);};bj.CopyTo=function(bx,by,bz){H.blit(by,0,by,bz,H.length(bx));};bj.Contains=function(bx,by){return I.exists(function(bz){return bo.Equals(by,bz);},bx);};bj.Clear=function(bx){bx.splice(0,H.length(bx));};bk.RegexEscape=function(bx){return bx.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bk.SplitWith=function(bx,by){return bx.split(by);};bk.Join=function(bx,by){return by.join(bx);};bk.TrimEndWS=function(bx){return bx.replace(new a.RegExp("\\s+$"),"");};bk.TrimStartWS=function(bx){return bx.replace(new a.RegExp("^\\s+"),"");};bk.Trim=function(bx){return bx.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bk.StartsWith=function(bx,by){return bx.substring(0,by.length)==by;};bk.Substring=function(bx,by,bz){return bx.substr(by,bz);};bk.ReplaceOnce=function(bx,by,bz){return bx.replace(by,bz);};bk.Remove=function(bx,by,bz){return bx.substring(0,by)+bx.substring(by+bz);};bk.PadRightWith=function(bx,by,bz){return by>bx.length?bx+a.Array(by-bx.length+1).join(bz):bx;};bk.PadLeftWith=function(bx,by,bz){return by>bx.length?a.Array(by-bx.length+1).join(bz)+bx:bx;};bk.LastIndexOf=function(bx,by,bz){return bx.lastIndexOf(by,bz);};bk.IsNullOrWhiteSpace=function(bx){return bx==null||(new a.RegExp("^\\s*$")).test(bx);};bk.IsNullOrEmpty=function(bx){return bx==null||bx=="";};bk.Insert=function(bx,by,bz){return bx.substring(0,by-1)+bz+bx.substring(by);};bk.IndexOf=function(bx,by,bz){return bx.indexOf(by,bz);};bk.EndsWith=function(bx,by){return bx.substring(bx.length-by.length)==by;};bk.collect=function(bx,by){return H.init(by.length,function(bz){return bx(by[bz]);}).join("");};bk.concat=function(bx,by){return H.ofSeq(by).join(bx);};bk.exists=function(bx,by){return I.exists(bx,bk.protect(by));};bk.forall=function(bx,by){return I.forall(bx,bk.protect(by));};bk.init=function(bx,by){return H.init(bx,by).join("");};bk.iter=function(bx,by){I.iter(bx,bk.protect(by));};bk.iteri=function(bx,by){I.iteri(bx,bk.protect(by));};bk.length=function(bx){return bk.protect(bx).length;};bk.map=function(bx,by){return bk.collect(bx,bk.protect(by));};bk.mapi=function(bx,by){return H.ofSeq(I.mapi(bx,by)).join("");};bk.replicate=function(bx,by){return H.create(bx,by).join("");};bk.protect=function(bx){return bx===null?"":bx;};bk.SFormat=function(bx,by){return bx.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bz,bA,bB){var bC,bD,bE;bC=bt(H.get(by,+bA));return!bo.Equals(bB,void 0)?(bD=+bB,(bE=bw.abs(bD),bE>bC.length?bD>0?bk.PadLeft(bC,bE):bk.PadRight(bC,bE):bC)):bC;});};bk.Filter=function(bx,by){return H.ofSeq(I.choose(function(bz){return bx(bz)?{$:1,$0:bz}:null;},by)).join("");};bk.SplitStrings=function(bx,by,bz){return bk.Split(bx,new a.RegExp(bk.concat("|",H.map(bk.RegexEscape,by))),bz);};bk.SplitChars=function(bx,by,bz){return bk.Split(bx,new a.RegExp("["+bk.RegexEscape(by.join(""))+"]"),bz);};bk.Split=function(bx,by,bz){return bz===1?H.filter(function(bA){return bA!=="";},bk.SplitWith(bx,by)):bk.SplitWith(bx,by);};bk.TrimEnd=function(bx,by){var bz,bA;if(bo.Equals(by,null)||by.length==0)return bk.TrimEndWS(bx);else{bz=bx.length-1;bA=true;while(bz>=0&&bA)(function(){var bB;bB=bx[bz];return H.exists(function(bC){return bB===bC;},by)?void(bz=bz-1):void(bA=false);}());return bk.Substring(bx,0,bz+1);}};bk.TrimStart=function(bx,by){var bz,bA;if(bo.Equals(by,null)||by.length==0)return bk.TrimStartWS(bx);else{bz=0;bA=true;while(bz<bx.length&&bA)(function(){var bB;bB=bx[bz];return H.exists(function(bC){return bB===bC;},by)?void(bz=bz+1):void(bA=false);}());return bx.substring(bz);}};bk.ToCharArrayRange=function(bx,by,bz){return H.init(bz,function(bA){return bx[by+bA];});};bk.ToCharArray=function(bx){return H.init(bx.length,function(by){return bx[by];});};bk.ReplaceChar=function(bx,by,bz){return bk.Replace(bx,by,bz);};bk.Replace=function(bx,by,bz){function bA(bB){var bC,bD,bE;bC=bB.indexOf(by);return bC!==-1?(bD=bk.ReplaceOnce(bB,by,bz),(bE=bC+bz.length,bk.Substring(bD,0,bC+bz.length)+bA(bD.substring(bE)))):bB;}return bA(bx);};bk.PadRight=function(bx,by){return bk.PadRightWith(bx,by," ");};bk.PadLeft=function(bx,by){return bk.PadLeftWith(bx,by," ");};bk.CopyTo=function(bx,by,bz,bA,bB){H.blit(bk.ToCharArray(bx),by,bz,bA,bB);};bk.Compare=function(bx,by){return bo.Compare(bx,by);};bl=b.Task=br.Class({Execute:function(){this.action();},Start:function(){var bx;bx=this;this.status===0?(this.status=2,z.scheduler().Fork(function(){var by;bx.status=3;try{bx.Execute();bx.status=5;}catch(bz){bz instanceof X&&(bo.Equals(bz.ct,bx.token)&&(by=bz,true))?(bv.log("Task cancellation caught:",by),bx.exc=new _2.New$3([by]),bx.status=6):(bv.log("Task error caught:",bz),bx.exc=new _2.New$3([bz]),bx.status=7);}bx.RunContinuations();})):w.InvalidOp("Task not in initial state");},StartContinuation:function(){var bx;bx=this;this.status===1?(this.status=2,z.scheduler().Fork(function(){if(bx.status===2){bx.status=3;try{bx.Execute();bx.status=5;}catch(by){bx.exc=new _2.New$3([by]);bx.status=7;}bx.RunContinuations();}})):void 0;},ContinueWith:function(bx,by){var bz,bA;bz=this;bA=new bm.New$4(function(){return bx(bz);},by,1,null,void 0);this.get_IsCompleted()?bA.StartContinuation():this.continuations.push(bA);return bA;},ContinueWith$1:function(bx,by){var bz,bA;bz=this;bA=new bl.New$4(function(){return bx(bz);},by,1,null);this.get_IsCompleted()?bA.StartContinuation():this.continuations.push(bA);return bA;},RunContinuations:function(){var bx,by,bz;bx=this.continuations;for(by=0,bz=bx.length-1;by<=bz;by++)H.get(bx,by).StartContinuation();},OnCompleted:function(bx){if(this.get_IsCompleted())bx();else{this.get_Status()===0?this.Start():void 0;this.ContinueWith$1(function(){return bx();},z.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return this.status===7;},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},get_IsCanceled:function(){return this.status===6;},get_Exception:function(){return this.exc;}},g,bl);bl.Yield=function(){return new bl.New$3(function(){return null;});};bl.WhenAll=function(bx){var by,bz,bA,bB,bC,bD;by=H.length(bx);bz=[0];bA=new a.Array(by);bB=new bn.New();for(bC=0,bD=by-1;bC<=bD;bC++)(function(bE){H.get(bx,bC).ContinueWith$1(function(bF){return bF.get_IsFaulted()?void bB.TrySetException$1(bF.get_Exception()):bF.get_IsCanceled()?void bB.TrySetCanceled$1():(bz[0]++,bA[bE]=bF.get_Result(),bz[0]===by?bB.SetResult(bA):null);},z.noneCT());}(bC));return bB.get_Task();};bl.WhenAll$1=function(bx){var by,bz,bA,bB,bC;by=H.length(bx);bz=[0];bA=new bn.New();for(bB=0,bC=by-1;bB<=bC;bB++)H.get(bx,bB).ContinueWith$1(function(bD){return bD.get_IsFaulted()?void bA.TrySetException$1(bD.get_Exception()):bD.get_IsCanceled()?void bA.TrySetCanceled$1():(bz[0]++,bz[0]===by?void bA.TrySetResult():null);},z.noneCT());return bA.get_Task();};bl.WhenAny=function(bx){var by,bz,bA;by=new bn.New();for(bz=0,bA=bx.length-1;bz<=bA;bz++)H.get(bx,bz).ContinueWith(function(bB){by.TrySetResult(bB);},z.noneCT());return by.get_Task();};bl.WhenAny$1=function(bx){var by,bz,bA;by=new bn.New();for(bz=0,bA=bx.length-1;bz<=bA;bz++)H.get(bx,bz).ContinueWith$1(function(bB){by.TrySetResult(bB);},z.noneCT());return by.get_Task();};bl.Delay=function(bx,by){return z.StartAsTask(z.Sleep(bx),{$:1,$0:by});};bl.Delay$1=function(bx){return z.StartAsTask(z.Sleep(bx),null);};bl.Run=function(bx,by){var bz;bz=bx();return by.c?bl.FromCanceled(by):(bz.get_Status()===0?bz.Start():void 0,bz);};bl.Run$1=function(bx,by){var bz;bz=new bm.New$4(bx,by,0,null,void 0);bz.Start();return bz;};bl.Run$2=function(bx,by){var bz;bz=bx();return by.c?bl.FromCanceled$1(by):(bz.get_Status()===0?bz.Start():void 0,bz);};bl.Run$3=function(bx,by){var bz;bz=new bl.New$4(bx,by,0,null);bz.Start();return bz;};bl.FromResult=function(bx){return new bm.New$4(null,z.noneCT(),5,null,bx);};bl.FromException=function(bx){return new bm.New$4(null,z.noneCT(),7,new _2.New$3([bx]),null);};bl.FromException$1=function(bx){return new bl.New$4(null,z.noneCT(),7,new _2.New$3([bx]));};bl.FromCanceled=function(bx){return new bm.New$4(null,bx,6,null,null);};bl.FromCanceled$1=function(bx){return new bl.New$4(null,bx,6,null);};bl.New=br.Ctor(function(bx,by,bz){bl.New$4.call(this,function(){return bx(by);},bz,0,null);},bl);bl.New$1=br.Ctor(function(bx,by){bl.New$4.call(this,function(){return bx(by);},z.noneCT(),0,null);},bl);bl.New$2=br.Ctor(function(bx,by){bl.New$4.call(this,bx,by,0,null);},bl);bl.New$3=br.Ctor(function(bx){bl.New$4.call(this,bx,z.noneCT(),0,null);},bl);bl.New$4=br.Ctor(function(bx,by,bz,bA){this.action=bx;this.token=by;this.status=bz;this.continuations=[];this.exc=bA;},bl);bm=b.Task1=br.Class({get_Result:function(){return this.result;},Execute:function(){this.result=this.func();}},bl,bm);bm.New=br.Ctor(function(bx,by,bz){bm.New$4.call(this,function(){return bx(by);},bz,0,null,void 0);},bm);bm.New$1=br.Ctor(function(bx,by){bm.New$4.call(this,function(){return bx(by);},z.noneCT(),0,null,void 0);},bm);bm.New$2=br.Ctor(function(bx,by){bm.New$4.call(this,bx,by,0,null,void 0);},bm);bm.New$3=br.Ctor(function(bx){bm.New$4.call(this,bx,z.noneCT(),0,null,void 0);},bm);bm.New$4=br.Ctor(function(bx,by,bz,bA,bB){bl.New$4.call(this,null,by,bz,bA);this.func=bx;this.result=bB;},bm);bn=b.TaskCompletionSource=br.Class({TrySetResult:function(bx){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bx,this.task.RunContinuations(),true);},TrySetException:function(bx){return this.TrySetException$1(new _2.New$2(bx));},TrySetException$1:function(bx){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _2.New$3([bx]),this.task.RunContinuations(),true);},TrySetCanceled:function(bx){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bx){this.task.get_IsCompleted()?w.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bx;this.task.RunContinuations();},SetException:function(bx){this.SetException$1(new _2.New$2(bx));},SetException$1:function(bx){this.task.get_IsCompleted()?w.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _2.New$3([bx]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?w.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},g,bn);bn.New=br.Ctor(function(){this.task=new bm.New$4(null,z.noneCT(),1,null,void 0);},bn);bo.Hash=function(bx){var by;by=typeof bx;return by=="function"?0:by=="boolean"?bx?1:0:by=="number"?bx:by=="string"?bo.hashString(bx):by=="object"?bx==null?0:bx instanceof a.Array?bo.hashArray(bx):bo.hashObject(bx):0;};bo.hashObject=function(bx){var by,bz;if("GetHashCode"in bx)return bx.GetHashCode();else{by=[0];for(var bA in bx)if(function(bB){by[0]=bo.hashMix(bo.hashMix(by[0],bo.hashString(bB)),bo.Hash(bx[bB]));return false;}(bA))break;return by[0];}};bo.hashString=function(bx){var by,bz,bA;if(bx===null)return 0;else{by=5381;for(bz=0,bA=bx.length-1;bz<=bA;bz++)by=bo.hashMix(by,bx[bz].charCodeAt());return by;}};bo.hashArray=function(bx){var by,bz,bA;by=-34948909;for(bz=0,bA=H.length(bx)-1;bz<=bA;bz++)by=bo.hashMix(by,bo.Hash(H.get(bx,bz)));return by;};bo.hashMix=function(bx,by){return(bx<<5)+bx+by;};bo.Equals=function(bx,by){var bz,bA,bB,bC;if(bx===by)return true;else{bz=typeof bx;if(bz=="object"){if(bx===null||bx===void 0||by===null||by===void 0)return false;else if("Equals"in bx)return bx.Equals(by);else if(bx instanceof a.Array&&by instanceof a.Array)return bo.arrayEquals(bx,by);else if(bx instanceof bu&&by instanceof bu)return bo.dateEquals(bx,by);else{bA=[true];for(var bD in bx)if(function(bE){bA[0]=!bx.hasOwnProperty(bE)||by.hasOwnProperty(bE)&&bo.Equals(bx[bE],by[bE]);return!bA[0];}(bD))break;if(bA[0]){for(var bE in by)if(function(bF){bA[0]=!by.hasOwnProperty(bF)||bx.hasOwnProperty(bF);return!bA[0];}(bE))break;}return bA[0];}}else return bz=="function"&&("$Func"in bx?bx.$Func===by.$Func&&bx.$Target===by.$Target:"$Invokes"in bx&&"$Invokes"in by&&bo.arrayEquals(bx.$Invokes,by.$Invokes));}};bo.dateEquals=function(bx,by){return bx.getTime()===by.getTime();};bo.arrayEquals=function(bx,by){var bz,bA;if(H.length(bx)===H.length(by)){bz=true;bA=0;while(bz&&bA<H.length(bx)){!bo.Equals(H.get(bx,bA),H.get(by,bA))?bz=false:void 0;bA=bA+1;}return bz;}else return false;};bo.Compare=function(bx,by){var bz,bA,bB,bC,bD,bE;if(bx===by)return 0;else{bA=typeof bx;switch(bA=="function"?1:bA=="boolean"?2:bA=="number"?2:bA=="string"?2:bA=="object"?3:0){case 0:return typeof by=="undefined"?0:-1;break;case 1:return w.FailWith("Cannot compare function values.");break;case 2:return bx<by?-1:1;break;case 3:if(bx===null)bB=-1;else if(by===null)bB=1;else if("CompareTo"in bx)bB=bx.CompareTo(by);else if("CompareTo0"in bx)bB=bx.CompareTo0(by);else if(bx instanceof a.Array&&by instanceof a.Array)bB=bo.compareArrays(bx,by);else if(bx instanceof bu&&by instanceof bu)bB=bo.compareDates(bx,by);else{bC=[0];for(var bF in bx)if(function(bG){return!bx.hasOwnProperty(bG)?false:!by.hasOwnProperty(bG)?(bC[0]=1,true):(bC[0]=bo.Compare(bx[bG],by[bG]),bC[0]!==0);}(bF))break;if(bC[0]===0){for(var bG in by)if(function(bH){return!by.hasOwnProperty(bH)?false:!bx.hasOwnProperty(bH)&&(bC[0]=-1,true);}(bG))break;}bB=bC[0];}return bB;break;}}};bo.compareDates=function(bx,by){return bo.Compare(bx.getTime(),by.getTime());};bo.compareArrays=function(bx,by){var bz,bA;if(H.length(bx)<H.length(by))return -1;else if(H.length(bx)>H.length(by))return 1;else{bz=0;bA=0;while(bz===0&&bA<H.length(bx)){bz=bo.Compare(H.get(bx,bA),H.get(by,bA));bA=bA+1;}return bz;}};bp.TryParseBool=function(bx,by){var bz;bz=bx.toLowerCase();return bz==="true"?(by.set(true),true):bz==="false"&&(by.set(false),true);};bp.ParseBool=function(bx){var by;by=bx.toLowerCase();if(by==="true")return true;else if(by==="false")return false;else throw new _4.New$1("String was not recognized as a valid Boolean.");};bp.TryParse=function(bx,by,bz,bA){var bB,bC;bB=+bx;bC=bB===bB-bB%1&&bB>=by&&bB<=bz;bC?bA.set(bB):void 0;return bC;};bp.Parse=function(bx,by,bz,bA){var bB;bB=+bx;if(bB!==bB-bB%1)throw new _4.New$1("Input string was not in a correct format.");else if(bB<by||bB>bz)throw new _5.New$1(bA);else return bB;};bp.ParseByte=function(bx){return bp.Parse(bx,0,255,"Value was either too large or too small for an unsigned byte.");};bp.TryParseByte=function(bx,by){return bp.TryParse(bx,0,255,by);};bp.ParseSByte=function(bx){return bp.Parse(bx,-128,127,"Value was either too large or too small for a signed byte.");};bp.TryParseSByte=function(bx,by){return bp.TryParse(bx,-128,127,by);};bp.ParseInt16=function(bx){return bp.Parse(bx,-32768,32767,"Value was either too large or too small for an Int16.");};bp.TryParseInt16=function(bx,by){return bp.TryParse(bx,-32768,32767,by);};bp.ParseInt32=function(bx){return bp.Parse(bx,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bp.TryParseInt32=function(bx,by){return bp.TryParse(bx,-2147483648,2147483647,by);};bp.ParseUInt16=function(bx){return bp.Parse(bx,0,65535,"Value was either too large or too small for an UInt16.");};bp.TryParseUInt16=function(bx,by){return bp.TryParse(bx,0,65535,by);};bp.ParseUInt32=function(bx){return bp.Parse(bx,0,4294967295,"Value was either too large or too small for an UInt32.");};bp.TryParseUInt32=function(bx,by){return bp.TryParse(bx,0,4294967295,by);};bp.ParseInt64=function(bx){return bp.Parse(bx,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bp.TryParseInt64=function(bx,by){return bp.TryParse(bx,-9223372036854775808,9223372036854775807,by);};bp.ParseUInt64=function(bx){return bp.Parse(bx,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bp.TryParseUInt64=function(bx,by){return bp.TryParse(bx,0,18446744073709551615,by);};}());
