(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(bw){var bx;bx=a.Delay(function(){return a.Return(bw(null));});return a.Start(bx,{$:0});},StartTo:function(by,bz){return a.StartWithContinuations(by,bz,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bC){var bD,bE;bD=b(bC.count);bE=function(bF){return function(bG){return c.set(bD,bF,bG.K);};};d.iteri(bE,bC);return bD;},ToValueArray:function(bH){var bI,bJ;bI=b(bH.count);bJ=function(bK){return function(bL){return c.set(bI,bK,bL.V);};};d.iteri(bJ,bH);return bI;}},Fresh:{Id:function(){var bM;bM=h.counter()+1;h.counter=function(){return bM;};return"uid"+$$.String(h.counter());},Int:function(){var bN;bN=h.counter()+1;h.counter=function(){return bN;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bO,bP){var bQ;bQ=j.New(k.ToArray(bP));bQ.ExceptWith(k.ToArray(bO));return bQ;},Filter:function(bR,bS){var bT;bT=k.ToArray(bS);return j.New(c.filter(bR,bT));},Intersect:function(bU,bV){var bW;bW=j.New(k.ToArray(bU));bW.IntersectWith(k.ToArray(bV));return bW;},ToArray:function(bX){var bY;bY=b(bX.get_Count());bX.CopyTo(bY);return bY;}},Mailbox:{StartProcessor:function(bZ){var b0,b1,b2,b9,ca;b0=[];b1=[false];b2=a.Delay(function(){return a.Combine(a.While(function(){return b0.length>0;},a.Delay(function(){var b6;b6=b0.shift();return a.Bind(bZ(b6),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(b1[0]=false));}));});b9=function(){var b$;if(!b1[0]){b1[0]=true;b$=a.Start(b2,{$:0});}else{b$=null;}return b$;};ca=function(cb){b0.push(cb);return b9(null);};return ca;}},Slot:$.Class({},{Create:function(cc,cd){return l.New(cc,cd);}}),Slot1:$.Class({Equals:function(ce){return m.Equals(this.key.call(null,this.value),this.key.call(null,ce.get_Value()));},GetHashCode:function(){return m.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{New:function(cf,cg){var ch;ch=$.New(this,{});ch.key=cf;ch.value=cg;return ch;}})},An:$.Class({},{Append:function(ci,cj){var ck,cl;ck=ci.$0;cl=cj.$0;return $.New(n,{$:0,$0:o.Append(ck,cl)});},Concat:function(cm){var cn,cp;cn=d.map(function(co){return p.List(co);},cm);cp=o.Concat(cn);return $.New(n,{$:0,$0:cp});},Const:function(cq){return p.Const(cq);},Delayed:function(cr,cs,ct,cu,cv,cw){var cx;cx=ct+cu;return{Compute:function(cy){var cz,cA;if(cy<=cu){cz=cv;}else{cA=cs.TransformTime.call(null,(cy-cu)/ct);cz=cr.Interpolate(cA,cv,cw);}return cz;},Duration:cx};},Map:function(cB,cC){var cD;cD=cC.Compute;return p.Def(cC.Duration,function(cE){return cB(cD(cE));});},Pack:function(cF){return $.New(n,{$:0,$0:o.Single({$:1,$0:cF})});},Play:function(cG){return a.Delay(function(){var cI,cK;cI=function(){};cK=p.Actions(cG);return a.Bind(n.Run(cI,cK),function(){return a.Return(p.Finalize(cG));});});},Run:function(cM,cN){var cO,cP;cO=cN.Duration;cP=function(cQ){var cR,cS,cT,cU,c1;cR=cQ[0];cS=cQ[1];cT=cQ[2];cU=function(cV,cW){var cX,cY,cZ;cX=cW-cV;cM(cN.Compute.call(null,cX));if(cX<=cO){cZ=q(function(c0){return cU(cV,c0);});cY=void cZ;}else{cY=cR(null);}return cY;};c1=q(function(c2){return cU(c2,c2);});return;};return a.FromContinuations(cP);},Simple:function(c3,c4,c5,c6,c7){return{Compute:function(c8){var c9;c9=c4.TransformTime.call(null,c8/c5);return c3.Interpolate(c9,c6,c7);},Duration:c5};},WhenDone:function(c_,c$){var da;da=$.New(n,{$:0,$0:o.Single({$:0,$0:c_})});return n.Append(da,c$);},get_Empty:function(){return $.New(n,{$:0,$0:o.Empty()});}}),AnimatedAttrNode:$.Class({GetChangeAnim:function(db){var dc,dd,df=this,dg,dh,di,dj,dk,dl,dm,dn,dp,dq;dc=[this.visible,this.logical];dd=function(){return df.sync(db);};if(dc[0].$==1){if(dc[1].$==1){dc[0].$0;dc[1].$0;if(df.dirty){dk=dc[1].$0;dl=dc[0].$0;dm=df.tr;dn=function(_do){return df.pushVisible(db,_do);};dp=r.AnimateChange(dm,dl,dk);dq=n.Map(dn,dp);dj=n.Pack(dq);}else{dj=n.get_Empty();}di=dj;}else{di=n.get_Empty();}dh=di;}else{dh=n.get_Empty();}dg=dh;return n.WhenDone(dd,dg);},GetEnterAnim:function(dr){var ds,dt,dv=this,dw,dx,dy,dz,dA,dB,dC,dD,dF,dG,dH,dI,dJ,dK,dL,dN,dO,dP,dQ,dR,dS,dT,dV,dW,dX,dY,dZ,d0,d1,d3,d4;ds=[this.visible,this.logical];dt=function(){return dv.sync(dr);};if(ds[0].$==1){if(ds[1].$==1){ds[0].$0;ds[1].$0;if(dv.dirty){dA=ds[1].$0;dB=ds[0].$0;dC=dv.tr;dD=function(dE){return dv.pushVisible(dr,dE);};dF=r.AnimateChange(dC,dB,dA);dG=n.Map(dD,dF);dz=n.Pack(dG);}else{if(ds[0].$==0){if(ds[1].$==1){dJ=ds[1].$0;dK=dv.tr;dL=function(dM){return dv.pushVisible(dr,dM);};dN=r.AnimateEnter(dK,dJ);dO=n.Map(dL,dN);dI=n.Pack(dO);}else{dI=n.get_Empty();}dH=dI;}else{dH=n.get_Empty();}dz=dH;}dy=dz;}else{if(ds[0].$==0){if(ds[1].$==1){dR=ds[1].$0;dS=dv.tr;dT=function(dU){return dv.pushVisible(dr,dU);};dV=r.AnimateEnter(dS,dR);dW=n.Map(dT,dV);dQ=n.Pack(dW);}else{dQ=n.get_Empty();}dP=dQ;}else{dP=n.get_Empty();}dy=dP;}dx=dy;}else{if(ds[0].$==0){if(ds[1].$==1){dZ=ds[1].$0;d0=dv.tr;d1=function(d2){return dv.pushVisible(dr,d2);};d3=r.AnimateEnter(d0,dZ);d4=n.Map(d1,d3);dY=n.Pack(d4);}else{dY=n.get_Empty();}dX=dY;}else{dX=n.get_Empty();}dx=dX;}dw=dx;return n.WhenDone(dt,dw);},GetExitAnim:function(d5){var d6,d7,d9=this,d_,d$,ea,eb,ec,ee,ef;d6=this.visible;d7=function(){d9.dirty=true;d9.visible={$:0};return;};if(d6.$==1){ea=d6.$0;eb=d9.tr;ec=function(ed){return d9.pushVisible(d5,ed);};ee=r.AnimateExit(eb,ea);ef=n.Map(ec,ee);d$=n.Pack(ef);}else{d$=n.get_Empty();}d_=d$;return n.WhenDone(d7,d_);},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(ei,ej){this.visible={$:1,$0:ej};this.dirty=true;return(this.push.call(null,ei))(ej);},sync:function(ek){var el;if(this.dirty){s.iter(this.push.call(null,ek),this.logical);this.visible=this.logical;el=void(this.dirty=false);}else{el=null;}return el;}},{New:function(em,en,eo){var ep,eq;ep=$.New(this,{});ep.tr=em;ep.push=eo;ep.logical={$:0};ep.visible={$:0};ep.dirty=true;eq=function(er){ep.logical={$:1,$0:er};ep.dirty=true;return;};ep.updates=t.Map(eq,en);return ep;}}),Anims:{Actions:function(es){var et,eu,ey,ez;et=es.$0;eu=function(ev){var ew,ex;if(ev.$==1){ex=ev.$0;ew={$:1,$0:ex};}else{ew={$:0};}return ew;};ey=o.ToArray(et);ez=c.choose(eu,ey);return p.ConcatActions(ez);},ConcatActions:function(eA){var eB,eC,eD,eE,eG,eH,eI;eB=d.toArray(eA);eC=c.length(eB);if(eC===0){eD=p.Const(null);}else{if(eC===1){eD=c.get(eB,0);}else{eE=function(eF){return eF.Duration;};eG=d.map(eE,eB);eH=d.max(eG);eI=c.map(function(eJ){return p.Prolong(eH,eJ);},eB);eD=p.Def(eH,function(eK){return c.iter(function(eL){return eL.Compute.call(null,eK);},eI);});}}return eD;},Const:function(eM){return p.Def(0,function(){return eM;});},Def:function(eO,eP){return{Compute:eP,Duration:eO};},Finalize:function(eQ){var eR,eS,eW;eR=eQ.$0;eS=function(eT){var eU,eV;if(eT.$==0){eV=eT.$0;eU=eV(null);}else{eU=null;}return eU;};eW=o.ToArray(eR);return c.iter(eS,eW);},List:function(eX){var eY;eY=eX.$0;return eY;},Prolong:function(eZ,e0){var e1,e2,e3,e5;e1=e0.Compute;e2=e0.Duration;e3=u.Create(function(){return e0.Compute.call(null,e0.Duration);});e5=function(e6){return e6>=e2?e3.eval():e1(e6);};return{Compute:e5,Duration:eZ};}},AppendList1:{Append:function(e7,e8){var e9,e_,e$,fa,fb;e9=[e7,e8];if(e9[0].$==0){e$=e9[1];e_=e$;}else{if(e9[1].$==0){fb=e9[0];fa=fb;}else{fa={$:2,$0:e7,$1:e8};}e_=fa;}return e_;},Concat:function(fc){var fd,fe,fg,fh;fd=d.toArray(fc);fe=function(ff){return ff;};fg=o.Empty();fh=function(fi){return function(fj){return o.Append(fi,fj);};};return v.MapTreeReduce(fe,fg,fh,fd);},Empty:function(){return{$:0};},FromArray:function(fk){var fl;fl=fk.length;return fl===0?{$:0}:fl===1?{$:1,$0:c.get(fk,0)}:{$:3,$0:fk.slice()};},Single:function(fm){return{$:1,$0:fm};},ToArray:function(fn){var fo,fp;fo=[];fp=function(fq){var fr,fs,ft,fu,fv;if(fq.$==1){fs=fq.$0;fr=fo.push(fs);}else{if(fq.$==2){ft=fq.$1;fu=fq.$0;fp(fu);fr=fp(ft);}else{if(fq.$==3){fv=fq.$0;fr=c.iter(function(fw){return fo.push(fw);},fv);}else{fr=null;}}}return fr;};fp(fn);return fo.slice(0);}},Array:{MapTreeReduce:function(fx,fy,fz,fA){var fB;fB=function(fC,fD){var fE,fF,fG,fH,fI,fJ,fK,fL,fM;if(fD<=0){fE=fy;}else{if(fD===1){if(fC>=0?fC<c.length(fA):false){fG=fx(c.get(fA,fC));}else{fH=fD/2>>0;fI=fB(fC,fH);fJ=fB(fC+fH,fD-fH);fG=(fz(fI))(fJ);}fF=fG;}else{fK=fD/2>>0;fL=fB(fC,fK);fM=fB(fC+fK,fD-fK);fF=(fz(fL))(fM);}fE=fF;}return fE;};return fB(0,c.length(fA));}},AttrModule:{Animated:function(fN,fO,fP,fQ){return w.Animated(fO,fP,function(fR){return function(fS){return x.SetAttr(fR,fN,fQ(fS));};});},AnimatedStyle:function(fT,fU,fV,fW){return w.Animated(fU,fV,function(fX){return function(fY){return x.SetStyle(fX,fT,fW(fY));};});},Class:function(fZ){return w.Static(function(f0){return x.AddClass(f0,fZ);});},ContentEditableHtml:function(f1){var f2,f6;f2=y.CustomVar(f1,function(f3){return function(f4){f3.innerHTML=f4;};},function(f5){return{$:1,$0:f5.innerHTML};});f6=z.Create("contenteditable","true");return z.Append(f6,f2);},ContentEditableText:function(f7){var f8,ga;f8=y.CustomVar(f7,function(f9){return function(f_){f9.textContent=f_;};},function(f$){return{$:1,$0:f$.textContent};});ga=z.Create("contenteditable","true");return z.Append(ga,f8);},CustomValue:function(gb,gc,gd){return y.CustomVar(gb,function(ge){return function(gf){ge.value=gc(gf);};},function(gg){return gd(gg.value);});},CustomVar:function(gh,gi,gj){var gk,gs;gk=function(gl){return function(){return gh.UpdateMaybe(function(gn){var go,gp,gq,gr;go=gj(gl);if(go.$==1){gq=go.$0;if(!m.Equals(gq,gn)){go.$0;gr=go;}else{gr={$:0};}gp=gr;}else{gp={$:0};}return gp;});};};gs=function(gt){return function(gu){var gv,gw,gx,gy;gv=gj(gt);if(gv.$==1){gx=gv.$0;if(m.Equals(gx,gu)){gv.$0;gy=null;}else{gy=(gi(gt))(gu);}gw=gy;}else{gw=(gi(gt))(gu);}return gw;};};return z.Concat(A.ofArray([y.Handler("change",gk),y.Handler("input",gk),y.Handler("keypress",gk),y.DynamicCustom(gs,gh.get_View())]));},Dynamic:function(gz,gA){return w.Dynamic(gA,function(){},function(gC){return function(gD){return x.SetAttr(gC,gz,gD);};});},DynamicClass:function(gE,gF,gG){return w.Dynamic(gF,function(){},function(gI){return function(gJ){return gG(gJ)?x.AddClass(gI,gE):x.RemoveClass(gI,gE);};});},DynamicCustom:function(gK,gL){return w.Dynamic(gL,function(){},gK);},DynamicPred:function(gN,gO,gP){var gQ,gV,gY;gQ=function(gR){return function(gS){var gT,gU;gT=gS[0];gU=gS[1];return gT?x.SetAttr(gR,gN,gU):x.RemoveAttr(gR,gN);};};gV=function(gW){return function(gX){return[gW,gX];};};gY=t.Map2(gV,gO,gP);return w.Dynamic(gY,function(){},gQ);},DynamicProp:function(g0,g1){return w.Dynamic(g1,function(){},function(g3){return function(g4){g3[g0]=g4;};});},DynamicStyle:function(g5,g6){return w.Dynamic(g6,function(){},function(g8){return function(g9){return x.SetStyle(g8,g5,g9);};});},Handler:function(g_,g$){return w.Static(function(ha){return ha.addEventListener(g_,g$(ha),false);});},HandlerView:function(hb,hc,hd){var he,hf,hj;he=h.Id();hf=function(hg){var hh;hh=hd(hg);return hg.addEventListener(hb,function(hi){return(hh(hi))(hg[he]);},false);};hj=function(hk){return function(hl){hk[he]=hl;};};return w.Dynamic(hc,hf,hj);},OnAfterRender:function(hm){return w.Mk(0,{$:4,$0:hm});},OnAfterRenderView:function(hn,ho){var hp,hq,hs;hp=h.Id();hq=y.OnAfterRender(function(hr){return(ho(hr))(hr[hp]);});hs=y.DynamicCustom(function(ht){return function(hu){ht[hp]=hu;};},hn);return z.Append(hq,hs);},Style:function(hv,hw){return w.Static(function(hx){return x.SetStyle(hx,hv,hw);});},ValidateForm:function(){return y.OnAfterRender(function(hy){return $$.H5F?$$.H5F.setup(hy):undefined;});},Value:function(hz){return y.CustomValue(hz,function(hA){return hA;},function(hB){return{$:1,$0:hB};});}},AttrProxy:$.Class({},{Append:function(hC,hD){return w.Mk(hC.Flags|hD.Flags,w.AppendTree(hC.Tree,hD.Tree));},Concat:function(hE){var hF,hG,hI,hJ;hF=d.toArray(hE);hG=function(hH){return hH;};hI=z.get_Empty();hJ=function(hK){return function(hL){return z.Append(hK,hL);};};return v.MapTreeReduce(hG,hI,hJ,hF);},Create:function(hM,hN){return w.Static(function(hO){return x.SetAttr(hO,hM,hN);});},Handler:function(hP,hQ){return w.Static(function(hR){return hR.addEventListener(hP,hQ(hR),false);});},get_Empty:function(){return w.EmptyAttr();}}),Attrs:{Animated:function(hS,hT,hU){var hV,hW;hV=B.New(hS,hT,hU);hW=4;C.CanAnimateEnter(hS)?hW=hW|1:null;C.CanAnimateExit(hS)?hW=hW|2:null;return w.Mk(hW,{$:1,$0:hV});},AppendTree:function(hX,hY){var hZ,h0,h1,h2,h3;hZ=[hX,hY];if(hZ[0].$==0){h1=hZ[1];h0=h1;}else{if(hZ[1].$==0){h3=hZ[0];h2=h3;}else{h2={$:2,$0:hX,$1:hY};}h0=h2;}return h0;},Dynamic:function(h4,h5,h6){var h7;h7={$:1,$0:D.New(h4,h5,h6)};return w.Mk(0,h7);},EmptyAttr:$.Field(function(){return w.Mk(0,{$:0});}),GetAnim:function(h8,h9){var h_,ia,ib;h_=function(h$){return(h9(h$))(h8.DynElem);};ia=h8.DynNodes;ib=c.map(h_,ia);return n.Concat(ib);},GetChangeAnim:function(ic){return w.GetAnim(ic,function(id){return function(ie){return id.GetChangeAnim(ie);};});},GetEnterAnim:function(_if){return w.GetAnim(_if,function(ig){return function(ih){return ig.GetEnterAnim(ih);};});},GetExitAnim:function(ii){return w.GetAnim(ii,function(ij){return function(ik){return ij.GetExitAnim(ik);};});},HasChangeAnim:function(il){return(il.DynFlags&4)!==0;},HasEnterAnim:function(im){return(im.DynFlags&1)!==0;},HasExitAnim:function(_in){return(_in.DynFlags&2)!==0;},Insert:function(io,ip){var iq,ir,is,iA;iq=[];ir=[];is=function(it){var iu,iv,iw,ix,iy,iz;if(it.$==1){iv=it.$0;iv.Init(io);iu=iq.push(iv);}else{if(it.$==2){iw=it.$1;ix=it.$0;is(ix);iu=is(iw);}else{if(it.$==3){iy=it.$0;iu=iy(io);}else{if(it.$==4){iz=it.$0;iu=ir.push(iz);}else{iu=null;}}}}return iu;};is(ip.Tree);iA=iq.slice(0);return $.DeleteEmptyFields({DynElem:io,DynFlags:ip.Flags,DynNodes:iA,OnAfterRender:(ir.length===0?{$:0}:{$:1,$0:function(iB){return d.iter(function(iC){return iC(iB);},ir);}}).$0},["OnAfterRender"]);},Mk:function(iD,iE){return $.New(z,{Flags:iD,Tree:iE});},Static:function(iF){return w.Mk(0,{$:3,$0:iF});},Sync:function(iG,iH){var iI,iK;iI=function(iJ){return iJ.Sync(iG);};iK=iH.DynNodes;return c.iter(iI,iK);},Updates:function(iL){var iM,iS,iT,iV;iM=function(iN){return function(iO){var iP;iP=function(){return function(){return null;};};return t.Map2(iP,iN,iO);};};iS=iL.DynNodes;iT=function(iU){return iU.get_Changed();};iV=E.Const(null);return v.MapTreeReduce(iT,iV,iM,iS);}},CheckedInput:$.Class({get_Input:function(){var iW,iX,iY,iZ;if(this.$==1){iX=this.$0;iW=iX;}else{if(this.$==2){iY=this.$0;iW=iY;}else{iZ=this.$1;iW=iZ;}}return iW;}}),Doc:$.Class({ReplaceInDom:function(i0){var i1,i2;i1=F.createTextNode("");i2=i0.parentNode.replaceChild(i1,i0);return G.RunBefore(i1,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(i3,i4){var i5,i8,i9,i_,i$;i5=function(){return function(){return null;};};i8=i3.get_Updates();i9=i4.get_Updates();i_=t.Map2(i5,i8,i9);i$={$:0,$0:i3.get_DocNode(),$1:i4.get_DocNode()};return G.Mk(i$,i_);},Async:function(ja){var jb,jd,je;jb=function(jc){return jc;};jd=E.Const(ja);je=t.MapAsync(jb,jd);return G.EmbedView(je);},BindView:function(jf,jg){return G.EmbedView(t.Map(jf,jg));},Button:function(jh,ji,jj){var jk,jl,jm;jk=z.Concat(ji);jl=G.Clickable("button",jj);jm=G.TextNode(jh);return H.New(jl,jk,jm);},ButtonView:function(jn,jo,jp,jq){var jr,ju,jv,jw;jr=y.HandlerView("click",jp,function(){return function(){return jq;};});ju=z.Concat(d.append([jr],jo));jv=x.CreateElement("button");jw=G.TextNode(jn);return H.New(jv,ju,jw);},CheckBox:function(jx,jy){var jz,jA,jC,jG;jz=x.CreateElement("input");jA=function(){return jy.Set(jz.checked);};jz.addEventListener("click",jA,false);jC=z.Concat(d.toList(d.delay(function(){return d.append(jx,d.delay(function(){return d.append([z.Create("type","checkbox")],d.delay(function(){return[y.DynamicProp("checked",jy.get_View())];}));}));})));jG=G.get_Empty();return H.New(jz,jC,jG);},CheckBoxGroup:function(jH,jI,jJ){var jK,jL,jR,jT,jV,jW,jX,jY,jZ,j0,j1,j4;jK=jJ.get_View();jL=function(jM){return jJ.Update(function(jN){var jO,jQ;jO=jM?A.append(jN,A.ofArray([jI])):A.filter(function(jP){return!m.Equals(jP,jI);},jN);jQ=I.distinct(jO);return d.toList(jQ);});};jR=function(jS){return m.Equals(jS,jI);};jT=function(jU){return d.exists(jR,jU);};jV=t.Map(jT,jK);jX=jJ.get_Id();jY=h.Id();jW=A.append(A.ofArray([z.Create("type","checkbox"),z.Create("name",jX),z.Create("value",jY),y.DynamicProp("checked",jV)]),A.ofSeq(jH));jZ=z.Concat(jW);j0=x.CreateElement("input");j1=function(){var j3;j3=j0.checked;return jL(j3);};j0.addEventListener("click",j1,false);j4=G.get_Empty();return H.New(j0,jZ,j4);},Clickable:function(j5,j6){var j7;j7=x.CreateElement(j5);j7.addEventListener("click",function(j8){j8.preventDefault();return j6(null);},false);return j7;},Concat:function(j9){var j_,j$,kb,kc;j_=d.toArray(j9);j$=function(ka){return ka;};kb=G.get_Empty();kc=function(kd){return function(ke){return G.Append(kd,ke);};};return v.MapTreeReduce(j$,kb,kc,j_);},Convert:function(kf,kg){var kh;kh=t.MapSeqCached(kf,kg);return G.Flatten(kh);},ConvertBy:function(ki,kj,kk){var kl;kl=t.MapSeqCachedBy(ki,kj,kk);return G.Flatten(kl);},ConvertSeq:function(km,kn){var ko;ko=t.MapSeqCachedView(km,kn);return G.Flatten(ko);},ConvertSeqBy:function(kp,kq,kr){var ks;ks=t.MapSeqCachedViewBy(kp,kq,kr);return G.Flatten(ks);},Element:function(kt,ku,kv){var kw,kx,ky;kw=z.Concat(ku);kx=G.Concat(kv);ky=x.CreateElement(kt);return H.New(ky,kw,kx);},EmbedView:function(kz){var kA,kB,kD,kF,kG,kH;kA=J.CreateEmbedNode();kB=function(kC){J.UpdateEmbedNode(kA,kC.get_DocNode());return kC.get_Updates();};kD=function(){};kF=E.Bind(kB,kz);kG=t.Map(kD,kF);kH={$:2,$0:kA};return G.Mk(kH,kG);},Flatten:function(kI){var kJ,kL;kJ=function(kK){return G.Concat(kK);};kL=t.Map(kJ,kI);return G.EmbedView(kL);},FloatInput:function(kM,kN){var kO,kU;kO=function(kP){return function(kQ){var kR,kS,kT;if(K.isBlank(kQ)){kS=(kP.checkValidity?kP.checkValidity():true)?$.New(L,{$:2,$0:kQ}):$.New(L,{$:1,$0:kQ});}else{kT=+kQ;kS=$$.isNaN(kT)?$.New(L,{$:1,$0:kQ}):$.New(L,{$:0,$0:kT,$1:kQ});}kR=kS;return{$:1,$0:kR};};};kU=function(kV){return d.append(kM,[y.CustomValue(kN,function(kW){return kW.get_Input();},kO(kV)),z.Create("type","number")]);};return G.InputInternal("input",kU);},FloatInputUnchecked:function(kX,kY){var kZ,k3;kZ=function(k0){var k1,k2;if(K.isBlank(k0)){k1={$:1,$0:0};}else{k2=+k0;k1=$$.isNaN(k2)?{$:0}:{$:1,$0:k2};}return k1;};k3=function(){return d.append(kX,[kY.Get()===0?z.Create("value","0"):z.get_Empty(),y.CustomValue(kY,function(k5){return $$.String(k5);},kZ),z.Create("type","number")]);};return G.InputInternal("input",k3);},Input:function(k6,k7){var k8;k8=function(){return d.append(k6,[y.Value(k7)]);};return G.InputInternal("input",k8);},InputArea:function(k_,k$){var la;la=function(){return d.append(k_,[y.Value(k$)]);};return G.InputInternal("textarea",la);},InputInternal:function(lc,ld){var le,lf,lg;le=x.CreateElement(lc);lf=z.Concat(ld(le));lg=G.get_Empty();return H.New(le,lf,lg);},IntInput:function(lh,li){var lj,lp;lj=function(lk){return function(ll){var lm,ln,lo;if(K.isBlank(ll)){ln=(lk.checkValidity?lk.checkValidity():true)?$.New(L,{$:2,$0:ll}):$.New(L,{$:1,$0:ll});}else{lo=+ll;ln=$$.isNaN(lo)?$.New(L,{$:1,$0:ll}):$.New(L,{$:0,$0:lo,$1:ll});}lm=ln;return{$:1,$0:lm};};};lp=function(lq){return d.append(lh,[y.CustomValue(li,function(lr){return lr.get_Input();},lj(lq)),z.Create("type","number"),z.Create("step","1")]);};return G.InputInternal("input",lp);},IntInputUnchecked:function(ls,lt){var lu,ly;lu=function(lv){var lw,lx;if(K.isBlank(lv)){lw={$:1,$0:0};}else{lx=+lv;lw=lx!==lx>>0?{$:0}:{$:1,$0:lx};}return lw;};ly=function(){return d.append(ls,[lt.Get()===0?z.Create("value","0"):z.get_Empty(),y.CustomValue(lt,function(lA){return $$.String(lA);},lu),z.Create("type","number"),z.Create("step","1")]);};return G.InputInternal("input",ly);},Link:function(lB,lC,lD){var lE,lF,lG,lH,lI;lE=z.Concat(lC);lF=z.Create("href","#");lG=z.Append(lF,lE);lH=G.Clickable("a",lD);lI=G.TextNode(lB);return H.New(lH,lG,lI);},LinkView:function(lJ,lK,lL,lM){var lN,lQ,lR,lS;lN=y.HandlerView("click",lL,function(){return function(){return lM;};});lQ=z.Concat(d.append([lN,z.Create("href","#")],lK));lR=x.CreateElement("a");lS=G.TextNode(lJ);return H.New(lR,lQ,lS);},Mk:function(lT,lU){return G.New(lT,lU);},New:function(lV,lW){var lX;lX=$.New(this,{});lX.docNode=lV;lX.updates=lW;return lX;},PasswordBox:function(lY,lZ){var l0;l0=function(){return d.append(lY,[y.Value(lZ),z.Create("type","password")]);};return G.InputInternal("input",l0);},Radio:function(l2,l3,l4){var l5,l7,l9,l_,l$,ma,md,me,mf;l5=x.CreateElement("input");l5.addEventListener("click",function(){return l4.Set(l3);},false);l7=function(l8){return m.Equals(l8,l3);};l9=l4.get_View();l_=t.Map(l7,l9);l$=y.DynamicProp("checked",l_);ma=function(mb,mc){return z.Create(mb,mc);};md=A.append(A.ofArray([ma("type","radio"),ma("name",l4.get_Id()),l$]),A.ofSeq(l2));me=z.Concat(md);mf=G.get_Empty();return H.New(l5,me,mf);},Run:function(mg,mh){var mi,mj,mk,mm;mi=mh.get_DocNode();J.LinkElement(mg,mi);mj=J.CreateRunState(mg,mi);mk=M.StartProcessor(function(){return J.PerformAnimatedUpdate(mj,mi);});mm=mh.get_Updates();return E.Sink(mk,mm);},RunAfter:function(mn,mo){var mp,mq;mp=F.createTextNode("");mq=mn.parentNode.insertBefore(mp,mn.nextSibling);return G.RunBetween(mn,mp,mo);},RunAfterById:function(mr,ms){var mt;mt=x.Doc().getElementById(mr);return m.Equals(mt,null)?N.FailWith("invalid id: "+mr):G.RunAfter(mt,ms);},RunAppend:function(mu,mv){var mw,mx;mw=F.createTextNode("");mx=mu.appendChild(mw);return G.RunBefore(mw,mv);},RunAppendById:function(my,mz){var mA;mA=x.Doc().getElementById(my);return m.Equals(mA,null)?N.FailWith("invalid id: "+my):G.RunAppend(mA,mz);},RunBefore:function(mB,mC){var mD,mE;mD=F.createTextNode("");mE=mB.parentNode.insertBefore(mD,mB);return G.RunBetween(mD,mB,mC);},RunBeforeById:function(mF,mG){var mH;mH=x.Doc().getElementById(mF);return m.Equals(mH,null)?N.FailWith("invalid id: "+mF):G.RunBefore(mH,mG);},RunBetween:function(mI,mJ,mK){var mL,mM,mO;J.LinkPrevElement(mJ,mK.get_DocNode());mL=J.CreateDelimitedRunState(mI,mJ,mK.get_DocNode());mM=M.StartProcessor(function(){return J.PerformAnimatedUpdate(mL,mK.get_DocNode());});mO=mK.get_Updates();return E.Sink(mM,mO);},RunById:function(mP,mQ){var mR;mR=x.Doc().getElementById(mP);return m.Equals(mR,null)?N.FailWith("invalid id: "+mP):G.Run(mR,mQ);},RunPrepend:function(mS,mT){var mU,mV;mU=F.createTextNode("");mV=mS.insertBefore(mU,mS.firstChild);return G.RunBefore(mU,mT);},RunPrependById:function(mW,mX){var mY;mY=x.Doc().getElementById(mW);return m.Equals(mY,null)?N.FailWith("invalid id: "+mW):G.RunPrepend(mY,mX);},Select:function(mZ,m0,m1,m2){var m3;m3=E.Const(m1);return G.SelectDyn(mZ,m0,m3,m2);},SelectDyn:function(m4,m5,m6,m7){var m8,m9,m$,nc,nf,nj,nk,nl,nm,nq,nv,nw,nE,nF,nG,nH,nJ;m8=[$.New(O,{$:0})];m9=function(m_){return m_.selectedIndex;};m$=function(na){var nb;nb=m9(na);return m8[0].get_Item(nb);};nc=function(nd){return d.findIndex(function(ne){return m.Equals(nd,ne);},m8[0]);};nf=function(ng){return function(nh){var ni;ni=nc(nh);ng.selectedIndex=ni;return;};};nj=x.CreateElement("select");nk=m7.get_View();nl=y.DynamicCustom(nf,nk);nm=function(){return m7.UpdateMaybe(function(no){var np;np=m$(nj);return m.Equals(no,np)?{$:0}:{$:1,$0:np};});};nj.addEventListener("change",nm,false);nq=function(nr){var ns;m8[0]=nr;ns=function(nt){return function(nu){return[nt,nu];};};return d.mapi(ns,nr);};nv=t.Map(nq,m6);nw=function(nx){var ny,nz,nA,nB,nC,nD;ny=nx[0];nz=nx[1];nA=G.TextNode(m5(nz));nC=$$.String(ny);nB=A.ofArray([z.Create("value",nC)]);nD=A.ofArray([nA]);return G.Element("option",nB,nD);};nE=G.Convert(nw,nv);nF=z.Concat(m4);nG=z.Append(nl,nF);nH=y.OnAfterRender(function(nI){return(nf(nI))(m7.Get());});nJ=z.Append(nH,nG);return H.New(nj,nJ,nE);},SelectDynOptional:function(nK,nL,nM,nN,nO){var nP,nT,nW;nP=function(nQ){var nR,nS;if(nQ.$==1){nS=nQ.$0;nR=nM(nS);}else{nR=nL;}return nR;};nT=function(nU){return $.New(O,{$:1,$0:{$:0},$1:A.map(function(nV){return{$:1,$0:nV};},nU)});};nW=t.Map(nT,nN);return G.SelectDyn(nK,nP,nW,nO);},SelectOptional:function(nX,nY,nZ,n0,n1){var n2,n6;n2=function(n3){var n4,n5;if(n3.$==1){n5=n3.$0;n4=nZ(n5);}else{n4=nY;}return n4;};n6=$.New(O,{$:1,$0:{$:0},$1:A.map(function(n7){return{$:1,$0:n7};},n0)});return G.Select(nX,n2,n6,n1);},Static:function(n8){var n9,n_;n9=z.get_Empty();n_=G.get_Empty();return H.New(n8,n9,n_);},SvgElement:function(n$,oa,ob){var oc,od,oe;oc=z.Concat(oa);od=G.Concat(ob);oe=x.CreateSvgElement(n$);return H.New(oe,oc,od);},TextNode:function(of){var og,oh;og={$:5,$0:x.CreateText(of)};oh=E.Const(null);return G.Mk(og,oh);},TextView:function(oi){var oj,ok,om,on;oj=J.CreateTextNode();ok=function(ol){return J.UpdateTextNode(oj,ol);};om=t.Map(ok,oi);on={$:4,$0:oj};return G.Mk(on,om);},Verbatim:function(oo){var op,oq,or,ot,ow,ox;op=P.parseHTML(oo);oq=m.Equals(op,null)?[]:op;or=function(os){return{$:1,$0:J.CreateElemNode(os,z.get_Empty(),{$:3})};};ot=function(ou){return function(ov){return{$:0,$0:ou,$1:ov};};};ow=v.MapTreeReduce(or,{$:3},ot,oq);ox=E.Const(null);return G.Mk(ow,ox);},get_Empty:function(){var oy,oz;oy={$:3};oz=E.Const(null);return G.Mk(oy,oz);}}),DocElemNode:$.Class({Equals:function(oA){return this.ElKey===oA.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(oB,oC){var oD,oF,oH,oI,oJ,oK,oM,oN;oD=function(oE){return w.HasChangeAnim(oE.Attr);};oF=function(oG){return Q.Filter(oD,oG);};oH=oF(oB.PreviousNodes);oI=oF(oC);oJ=Q.Intersect(oH,oI);oK=function(oL){return w.GetChangeAnim(oL.Attr);};oM=Q.ToArray(oJ);oN=c.map(oK,oM);return n.Concat(oN);},ComputeEnterAnim:function(oO,oP){var oQ,oS,oT,oU,oV,oX,oY;oQ=function(oR){return w.HasEnterAnim(oR.Attr);};oS=oO.PreviousNodes;oT=Q.Filter(oQ,oP);oU=Q.Except(oS,oT);oV=function(oW){return w.GetEnterAnim(oW.Attr);};oX=Q.ToArray(oU);oY=c.map(oV,oX);return n.Concat(oY);},ComputeExitAnim:function(oZ,o0){var o1,o3,o5,o6,o7,o8,o9;o1=function(o2){return w.HasExitAnim(o2.Attr);};o3=function(o4){return w.GetExitAnim(o4.Attr);};o5=oZ.PreviousNodes;o6=Q.Filter(o1,o5);o7=Q.Except(o0,o6);o8=Q.ToArray(o7);o9=c.map(o3,o8);return n.Concat(o9);},CreateDelimitedElemNode:function(o_,o$,pa,pb){var pc,pd;pc=o_.parentNode;J.LinkPrevElement(o$,pb);pd=w.Insert(pc,pa);return $.New(R,$.DeleteEmptyFields({Attr:pd,Children:pb,Delimiters:[o_,o$],El:pc,ElKey:h.Int(),Render:$.GetOptional(pd.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(pe,pf,pg){return{PreviousNodes:Q.get_Empty(),Top:J.CreateDelimitedElemNode(pe,pf,z.get_Empty(),pg)};},CreateElemNode:function(ph,pi,pj){var pk;J.LinkElement(ph,pj);pk=w.Insert(ph,pi);return $.New(R,$.DeleteEmptyFields({Attr:pk,Children:pj,El:ph,ElKey:h.Int(),Render:$.GetOptional(pk.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(pl,pm){return{PreviousNodes:Q.get_Empty(),Top:J.CreateElemNode(pl,z.get_Empty(),pm)};},CreateTextNode:function(){return{Text:x.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(pn){var po,pp,pA,pB,pC,pD,pE,pF,pH,pI,pJ,pK,pL,pM;po=pn.El;pp=function(pq,pr){var ps,pt,pu,pv,pw,px,py,pz;if(pq.$==1){pt=pq.$0;ps={$:1,$0:pt.El};}else{if(pq.$==2){pu=pq.$0;if(pu.Dirty){pu.Dirty=false;pv=J.InsertDoc(po,pu.Current,pr);}else{pv=pp(pu.Current,pr);}ps=pv;}else{if(pq.$==3){ps=pr;}else{if(pq.$==4){pw=pq.$0;ps={$:1,$0:pw.Text};}else{if(pq.$==5){px=pq.$0;ps={$:1,$0:px};}else{py=pq.$1;pz=pq.$0;ps=pp(pz,pp(py,pr));}}}}}return ps;};pA=S.DocChildren(pn);pB=pn.El;pC=$.GetOptional(pn.Delimiters);pD=S.Children(pB,pC);pE=pn.El;pF=function(pG){return x.RemoveNode(pE,pG);};pH=S.Except(pA,pD);S.Iter(pF,pH);pI=$.GetOptional(pn.Delimiters);if(pI.$==1){pL=pI.$0[1];pK={$:1,$0:pL};}else{pK={$:0};}pJ=pK;pM=pp(pn.Children,pJ);return;},DomNodes:$.Class({},{Children:function(pN,pO){var pP,pQ,pR,pS,pT,pU,pV;if(pO.$==1){pQ=pO.$0[1];pR=pO.$0[0];pS=b.prototype.constructor.apply(b,[]);pT=pR.nextSibling;while(pT!==pQ){pU=pS.push(pT);pT=pT.nextSibling;}pP=$.New(S,{$:0,$0:pS});}else{pV=pN.childNodes;pP=$.New(S,{$:0,$0:c.init(pN.childNodes.length,function(pW){return pV[pW];})});}return pP;},DocChildren:function(pX){var pY,pZ;pY=[];pZ=function(p0){var p1,p2,p3,p4,p5,p6,p7;if(p0.$==2){p2=p0.$0;p1=pZ(p2.Current);}else{if(p0.$==1){p3=p0.$0;p1=pY.push(p3.El);}else{if(p0.$==3){p1=null;}else{if(p0.$==5){p4=p0.$0;p1=pY.push(p4);}else{if(p0.$==4){p5=p0.$0;p1=pY.push(p5.Text);}else{p6=p0.$1;p7=p0.$0;pZ(p7);p1=pZ(p6);}}}}}return p1;};pZ(pX.Children);return $.New(S,{$:0,$0:pY.slice(0)});},Except:function(p8,p9){var p_,p$,qa,qe;p_=p8.$0;p$=p9.$0;qa=function(qb){var qc;qc=function(qd){return!(qb===qd);};return d.forall(qc,p_);};qe=c.filter(qa,p$);return $.New(S,{$:0,$0:qe});},FoldBack:function(qf,qg,qh){var qi;qi=qg.$0;return c.foldBack(qf,qi,qh);},Iter:function(qj,qk){var ql;ql=qk.$0;return c.iter(qj,ql);}}),InsertDoc:function(qm,qn,qo){var qp,qq,qr,qs,qt,qu,qv;if(qn.$==1){qq=qn.$0;qp=J.InsertNode(qm,qq.El,qo);}else{if(qn.$==2){qr=qn.$0;qr.Dirty=false;qp=J.InsertDoc(qm,qr.Current,qo);}else{if(qn.$==3){qp=qo;}else{if(qn.$==4){qs=qn.$0;qp=J.InsertNode(qm,qs.Text,qo);}else{if(qn.$==5){qt=qn.$0;qp=J.InsertNode(qm,qt,qo);}else{qu=qn.$1;qv=qn.$0;qp=J.InsertDoc(qm,qv,J.InsertDoc(qm,qu,qo));}}}}}return qp;},InsertNode:function(qw,qx,qy){x.InsertAt(qw,qy,qx);return{$:1,$0:qx};},LinkElement:function(qz,qA){var qB;qB=J.InsertDoc(qz,qA,{$:0});return;},LinkPrevElement:function(qC,qD){var qE;qE=J.InsertDoc(qC.parentNode,qD,{$:1,$0:qC});return;},NodeSet:$.Class({},{Except:function(qF,qG){var qH,qI;qH=qF.$0;qI=qG.$0;return $.New(Q,{$:0,$0:k.Except(qH,qI)});},Filter:function(qJ,qK){var qL;qL=qK.$0;return $.New(Q,{$:0,$0:k.Filter(qJ,qL)});},FindAll:function(qM){var qN,qO;qN=[];qO=function(qP){var qQ,qR,qS,qT,qU;if(qP.$==0){qR=qP.$1;qS=qP.$0;qO(qS);qQ=qO(qR);}else{if(qP.$==1){qT=qP.$0;qN.push(qT);qQ=qO(qT.Children);}else{if(qP.$==2){qU=qP.$0;qQ=qO(qU.Current);}else{qQ=null;}}}return qQ;};qO(qM);return $.New(Q,{$:0,$0:j.New(qN.slice(0))});},Intersect:function(qV,qW){var qX,qY;qX=qV.$0;qY=qW.$0;return $.New(Q,{$:0,$0:k.Intersect(qX,qY)});},IsEmpty:function(qZ){var q0;q0=qZ.$0;return q0.get_Count()===0;},ToArray:function(q1){var q2;q2=q1.$0;return k.ToArray(q2);},get_Empty:function(){return $.New(Q,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(q3,q4){return a.Delay(function(){var q6,q7,q8,q9;q6=Q.FindAll(q4);q7=J.ComputeChangeAnim(q3,q6);q8=J.ComputeEnterAnim(q3,q6);q9=J.ComputeExitAnim(q3,q6);return a.Bind(n.Play(n.Append(q7,q9)),function(){J.SyncElemNode(q3.Top);return a.Bind(n.Play(q8),function(){return a.Return(void(q3.PreviousNodes=q6));});});});},Sync:function(ra){var rb;rb=function(rc){var rd,re,rf,rg,rh,ri,rj;if(rc.$==1){re=rc.$0;J.SyncElement(re);rd=rb(re.Children);}else{if(rc.$==2){rf=rc.$0;rd=rb(rf.Current);}else{if(rc.$==3){rd=null;}else{if(rc.$==5){rd=null;}else{if(rc.$==4){rg=rc.$0;if(rg.Dirty){rg.Text.nodeValue=rg.Value;rh=void(rg.Dirty=false);}else{rh=null;}rd=rh;}else{ri=rc.$1;rj=rc.$0;rb(rj);rd=rb(ri);}}}}}return rd;};return rb(ra);},SyncElemNode:function(rk){J.SyncElement(rk);return J.Sync(rk.Children);},SyncElement:function(rl){var rm,ru,rv,rw;rm=function(rn){var ro;ro=function(rp){var rq,rr,rs,rt;if(rp.$==0){rr=rp.$1;rs=rp.$0;rq=ro(rs)?true:ro(rr);}else{if(rp.$==2){rt=rp.$0;rq=rt.Dirty?true:ro(rt.Current);}else{rq=false;}}return rq;};return ro(rn.Children);};w.Sync(rl.El,rl.Attr);rm(rl)?J.DoSyncElement(rl):null;ru=$.GetOptional(rl.Render);if(ru.$==1){rw=ru.$0;rw(rl.El);rv=void(delete rl.Render);}else{rv=null;}return rv;},UpdateEmbedNode:function(rx,ry){rx.Current=ry;rx.Dirty=true;return;},UpdateTextNode:function(rz,rA){rz.Value=rA;rz.Dirty=true;return;}},DomUtility:{AddClass:function(rB,rC){var rD;rD=P(rB).addClass(rC);return;},AppendTo:function(rE,rF){var rG;rG=rE.appendChild(rF);return;},Clear:function(rH){var rI;while(rH.hasChildNodes()){rI=rH.removeChild(rH.firstChild);}return;},ClearAttrs:function(rJ){var rK;while(rJ.hasAttributes()){rK=rJ.removeAttributeNode(rJ.attributes.item(0));}return;},CreateAttr:function(rL,rM){var rN;rN=x.Doc().createAttribute(rL);rN.value=rM;return rN;},CreateElement:function(rO){return x.Doc().createElement(rO);},CreateSvgElement:function(rP){return x.Doc().createElementNS("http://www.w3.org/2000/svg",rP);},CreateText:function(rQ){return x.Doc().createTextNode(rQ);},Doc:$.Field(function(){return F;}),InsertAt:function(rR,rS,rT){var rU,rX,rY,rZ,r0,r1,r2,r3,r4,r5,r6,r7,r8,r9;rU=function(rV){var rW;rW=rV.nextSibling;return m.Equals(rW,null)?{$:0}:{$:1,$0:rW};};if(rT.parentNode===rR){rZ=rU(rT);r0=[rS,rZ];if(r0[0].$==1){if(r0[1].$==1){r3=r0[0].$0;r4=r0[1].$0;r2=r3===r4;}else{r2=false;}r1=r2;}else{r1=r0[1].$==0?true:false;}rY=r1;}else{rY=false;}rX=rY;if(!rX){if(rS.$==1){r7=rS.$0;r8=rR.insertBefore(rT,r7);r6=void r8;}else{r9=rR.appendChild(rT);r6=void r9;}r5=r6;}else{r5=null;}return r5;},RemoveAttr:function(r_,r$){return r_.removeAttribute(r$);},RemoveClass:function(sa,sb){var sc;sc=P(sa).removeClass(sb);return;},RemoveNode:function(sd,se){var sf,sg;if(se.parentNode===sd){sg=sd.removeChild(se);sf=void sg;}else{sf=null;}return sf;},SetAttr:function(sh,si,sj){return sh.setAttribute(si,sj);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(sk,sl,sm){return x.SetProperty(sk.style,sl,sm);}},DoubleInterpolation:$.Class({Interpolate:function(sn,so,sp){return so+sn*(sp-so);}}),DynamicAttrNode:$.Class({GetChangeAnim:function(){return n.get_Empty();},GetEnterAnim:function(){return n.get_Empty();},GetExitAnim:function(){return n.get_Empty();},Init:function(st){return this.init.call(null,st);},Sync:function(su){var sv;if(this.dirty){(this.push.call(null,su))(this.value);sv=void(this.dirty=false);}else{sv=null;}return sv;},get_Changed:function(){return this.updates;}},{New:function(sw,sx,sy){var sz,sA;sz=$.New(this,{});sz.init=sx;sz.push=sy;sz.value=undefined;sz.dirty=true;sA=function(sB){sz.value=sB;sz.dirty=true;return;};sz.updates=t.Map(sA,sw);return sz;}}),Easing:$.Class({},{Custom:function(sC){return $.New(T,{TransformTime:sC});},get_CubicInOut:function(){return U.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){var sD;sD=function(sE){var sF,sG;sF=sE*sE;sG=sF*sE;return 3*sF-2*sG;};return $.New(T,{TransformTime:sD});})},Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(sH){var sI,sJ,sK,sN,sO,sP;sI=this.get_DocElemNode();sI.Children={$:0,$0:sI.Children,$1:sH.get_DocNode()};sJ=this.rvUpdates;sK=function(){return function(){return null;};};sN=V.Get(this.rvUpdates);sO=sH.get_Updates();W.Set(sJ,t.Map2(sK,sN,sO));sP=J.InsertDoc(this.elt,sH.get_DocNode(),{$:0});return;},Clear:function(){var sQ;this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,E.Const(null));while(this.elt.hasChildNodes()){sQ=this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(sR){return this.elt.getAttribute(sR);},GetProperty:function(sS){return this.elt[sS];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(sT){return this.elt.hasAttribute(sT);},HasClass:function(sU){return(new X("(\\s|^)"+sU+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(sV){var sW,sX,sY;sW=$.GetOptional(this.get_DocElemNode().Render);if(sW.$==1){sY=sW.$0;sX={$:1,$0:function(sZ){sY(sZ);return sV(sZ);}};}else{sX={$:1,$0:sV};}$.SetOptional(this.get_DocElemNode(),"Render",sX);return this;},OnAfterRenderView:function(s0,s1){var s2,s3,s5=this;s2=h.Id();s3=function(s4){(s5.get_Element())[s2]=s4;return G.get_Empty();};this.Append(G.BindView(s3,s0));return s5.OnAfterRender(function(s6){return(s1(s6))(s6[s2]);});},Prepend:function(s7){var s8,s9,s_,tb,tc,td,te,tf;s8=this.get_DocElemNode();s8.Children={$:0,$0:s7.get_DocNode(),$1:s8.Children};s9=this.rvUpdates;s_=function(){return function(){return null;};};tb=V.Get(this.rvUpdates);tc=s7.get_Updates();W.Set(s9,t.Map2(s_,tb,tc));td=this.elt.firstChild;te=m.Equals(td,null)?{$:0}:{$:1,$0:td};tf=J.InsertDoc(this.elt,s7.get_DocNode(),te);return;},RemoveAttribute:function(tg){return this.elt.removeAttribute(tg);},RemoveClass:function(th){this.elt.className=this.elt.className.replace(new X("(\\s|^)"+th+"(\\s|$)")," ");},SetAttribute:function(ti,tj){return this.elt.setAttribute(ti,tj);},SetProperty:function(tk,tl){this.elt[tk]=tl;},SetStyle:function(tm,tn){this.elt.style[tm]=tn;},SetText:function(to){this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,E.Const(null));this.elt.textContent=to;return;},SetValue:function(tp){this.elt.value=tp;},get_DocElemNode:function(){var tq,tr,ts;tq=this.docNode1;if(tq.$==1){ts=tq.$0;tr=ts;}else{tr=N.FailWith("Elt: Invalid docNode");}return tr;},get_Element:function(){return this.elt;},on:function(tt,tu){this.elt.addEventListener(tt,tu(this.elt),false);return this;},onView:function(tv,tw,tx){var ty,tz,tB=this;ty=h.Id();tz=function(tA){(tB.get_Element())[ty]=tA;return G.get_Empty();};this.Append(G.BindView(tz,tw));tB.elt.addEventListener(tv,function(tC){return((tx(tB.elt))(tC))(tB.elt[ty]);},false);return tB;}},{New:function(tD,tE,tF){var tG,tH,tI,tJ,tM,tO,tP;tG=J.CreateElemNode(tD,tE,tF.get_DocNode());tH=V.Create(tF.get_Updates());tI=w.Updates(tG.Attr);tJ=function(){return function(){return null;};};tM=function(tN){return t.Map2(tJ,tI,tN);};tO=tH.get_View();tP=E.Bind(tM,tO);return H.New1({$:1,$0:tG},tP,tD,tH,tI);},New1:function(tQ,tR,tS,tT){var tV;tV=$.New(this,G.New(tQ,tR));tV.docNode1=tQ;tV.elt=tS;tV.rvUpdates=tT;return tV;}}),Flow:$.Class({},{Bind:function(tW,tX){return{Render:function(tY){return function(tZ){return(tW.Render.call(null,tY))(function(t0){return(tX(t0).Render.call(null,tY))(tZ);});};}};},Map:function(t1,t2){return{Render:function(t3){return function(t4){return(t2.Render.call(null,t3))(function(t5){return t4(t1(t5));});};}};},Return:function(t6){return{Render:function(){return function(t8){return t8(t6);};}};},get_Do:function(){return Y.New();}}),Flow1:$.Class({},{Define:function(t9){return{Render:function(t_){return function(t$){var ua;ua=t9(t$);return W.Set(t_,ua);};}};},Embed:function(ub){var uc;uc=V.Create(G.get_Empty());(ub.Render.call(null,uc))(function(){});return G.EmbedView(uc.get_View());},Static:function(ue){return{Render:function(uf){return function(ug){W.Set(uf,ue);return ug(null);};}};}}),FlowBuilder:$.Class({Bind:function(uh,ui){return Z.Bind(uh,ui);},Return:function(uj){return Z.Return(uj);},ReturnFrom:function(uk){return uk;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var ul,ut;ul=function(um,un){var uo,up,uq,ur,us;uo=um.button;if(uo===0){uq=_0.MouseBtnSt1().Left;up=W.Set(uq,un);}else{if(uo===1){ur=_0.MouseBtnSt1().Middle;up=W.Set(ur,un);}else{if(uo===2){us=_0.MouseBtnSt1().Right;up=W.Set(us,un);}else{up=null;}}}return up;};if(!_0.MouseBtnSt1().Active){_0.MouseBtnSt1().Active=true;F.addEventListener("mousedown",function(uu){return ul(uu,true);},false);ut=F.addEventListener("mouseup",function(uv){return ul(uv,false);},false);}else{ut=null;}return ut;}),ActivateKeyListener:$.Field(function(){var uw,ux,uD;if(!_0.KeyListenerState().KeyListenerActive){ux=P(F).keydown(function(uy){var uz,uA,uB;uz=uy.which;uA=_0.KeyListenerState().LastPressed;W.Set(uA,uz);uB=V.Get(_0.KeyListenerState().KeysPressed);return!d.exists(function(uC){return uC===uz;},uB)?W.Set(_0.KeyListenerState().KeysPressed,A.append(uB,A.ofArray([uz]))):null;});uD=P(F).keyup(function(uE){var uF,uG,uH,uJ;uF=uE.which;uG=_0.KeyListenerState().KeysPressed;uH=function(uI){return uI!==uF;};uJ=function(uK){return A.filter(uH,uK);};return W.Update(uG,uJ);});uw=void uD;}else{uw=null;}return uw;}),KeyListenerState:$.Field(function(){return{KeysPressed:V.Create($.New(O,{$:0})),KeyListenerActive:false,LastPressed:V.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(uL){var uM;_0.ActivateKeyListener();uM=function(uN){return uN===uL;};return t.Map(function(uO){return d.exists(uM,uO);},_0.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_0.ActivateKeyListener();return _0.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_0.ActivateKeyListener();return _0.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_0.ActivateButtonListener();return E.Apply(E.Apply(E.Apply(E.Const(function(uP){return function(uQ){return function(uR){return(uP?true:uQ)?true:uR;};};}),_0.MouseBtnSt1().Left.get_View()),_0.MouseBtnSt1().Middle.get_View()),_0.MouseBtnSt1().Right.get_View());},get_Position:function(){var uS,uW;uS=function(uT){var uU,uV;uU=_0.MousePosSt1().PosV;uV=[uT.clientX,uT.clientY];return W.Set(uU,uV);};if(!_0.MousePosSt1().Active){F.addEventListener("mousemove",uS,false);uW=void(_0.MousePosSt1().Active=true);}else{uW=null;}return _0.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:V.Create(false),Middle:V.Create(false),Right:V.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:V.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_1,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_2,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(uX){var uY,uZ,u0,u1,u3=this,u4;uY=this.Var.get_Value();if(!_3.Contains(this.get_Key(),uX,uY)){u0=this.Storage;uZ=this.Var.set_Value(u0.Add(uX,uY));}else{u1=c.findINdex(function(u2){return m.Equals((u3.get_Key())(u2),(u3.get_Key())(uX));},uY);u4=u3.Storage;uZ=u3.Var.set_Value(u4.SetAt(u1,uX,uY));}return uZ;},Clear:function(){return this.Var.set_Value(this.Storage.Set(d.empty()));},ContainsKey:function(u5){var u7=this;return d.exists(function(u6){return m.Equals(u7.key.call(null,u6),u5);},u7.Var.get_Value());},ContainsKeyAsView:function(u8){var u9,u$=this,va,vc;u9=function(u_){return m.Equals(u$.key.call(null,u_),u8);};va=function(vb){return d.exists(u9,vb);};vc=u$.Var.get_View();return t.Map(va,vc);},Find:function(vd){return c.find(vd,this.Var.get_Value());},FindAsView:function(ve){var vf,vh;vf=function(vg){return c.find(ve,vg);};vh=this.Var.get_View();return t.Map(vf,vh);},FindByKey:function(vi){var vk=this;return c.find(function(vj){return m.Equals(vk.key.call(null,vj),vi);},vk.Var.get_Value());},FindByKeyAsView:function(vl){var vm,vo=this,vp,vr;vm=function(vn){return m.Equals(vo.key.call(null,vn),vl);};vp=function(vq){return c.find(vm,vq);};vr=vo.Var.get_View();return t.Map(vp,vr);},Iter:function(vs){return c.iter(vs,this.Var.get_Value());},Lens:function(vt){var vu,vw;vu=function(vv){return vv;};vw=function(){return function(vy){return vy;};};return this.LensInto(vu,vw,vt);},LensInto:function(vz,vA,vB){return _4.New(this,vB,vz,vA);},Remove:function(vC){var vD,vE,vF,vG,vH,vI;vD=this.Var.get_Value();if(_3.Contains(this.key,vC,vD)){vF=this.key;vG=vF(vC);vH=this.Storage;vI=function(vJ){return!m.Equals(vF(vJ),vG);};vE=this.Var.set_Value(vH.RemoveIf(vI,vD));}else{vE=null;}return vE;},RemoveBy:function(vK){var vL,vM,vP;vL=this.Storage;vM=function(vN){var vO;vO=vK(vN);return!vO;};vP=this.Var.get_Value();return this.Var.set_Value(vL.RemoveIf(vM,vP));},RemoveByKey:function(vQ){var vR,vS,vU=this,vV;vR=this.Storage;vS=function(vT){return!m.Equals((vU.get_Key())(vT),vQ);};vV=vU.Var.get_Value();return this.Var.set_Value(vR.RemoveIf(vS,vV));},Set:function(vW){return this.Var.set_Value(this.Storage.Set(vW));},TryFind:function(vX){return c.tryFind(vX,this.Var.get_Value());},TryFindAsView:function(vY){var vZ,v1;vZ=function(v0){return c.tryFind(vY,v0);};v1=this.Var.get_View();return t.Map(vZ,v1);},TryFindByKey:function(v2){var v4=this;return c.tryFind(function(v3){return m.Equals(v4.key.call(null,v3),v2);},v4.Var.get_Value());},TryFindByKeyAsView:function(v5){var v6,v8=this,v9,v$;v6=function(v7){return m.Equals(v8.key.call(null,v7),v5);};v9=function(v_){return c.tryFind(v6,v_);};v$=v8.Var.get_View();return t.Map(v9,v$);},UpdateAll:function(wa){var wb,wc,wk=this;wb=this.Var;wc=function(wd){var we;we=function(wf){return function(wg){var wh,wj;wh=function(wi){return c.set(wd,wf,wi);};wj=wa(wg);return s.iter(wh,wj);};};c.iteri(we,wd);return wk.Storage.Set(wd);};return wb.Update(wc);},UpdateBy:function(wl,wm){var wn,wo,wq=this,wr,ws,wt,wu,wv,ww;wn=this.Var.get_Value();wo=c.tryFindIndex(function(wp){return m.Equals(wq.key.call(null,wp),wm);},wn);if(wo.$==1){ws=wo.$0;wt=wl(c.get(wn,ws));if(wt.$==1){wv=wt.$0;ww=wq.Storage;wu=wq.Var.set_Value(ww.SetAt(ws,wv,wn));}else{wu=null;}wr=wu;}else{wr=null;}return wr;},Wrap:function(wx,wy,wz){return _5.Wrap(this,wx,wy,wz);},get_Key:function(){return this.key;},get_Length:function(){return c.length(this.Var.get_Value());},get_LengthAsView:function(){var wA,wC;wA=function(wB){return c.length(wB);};wC=this.Var.get_View();return t.Map(wA,wC);},get_View:function(){return this.view;}},{Create:function(wD,wE){var wF,wG;wF=d.toArray(wE);wG=_6.InMemory(wF);return _7.CreateWithStorage(wD,wG);},CreateWithStorage:function(wH,wI){var wJ,wK,wL,wM,wP,wQ;wJ=I.distinctBy(wH,wI.Init());wK=d.toArray(wJ);wL=V.Create(wK);wM=function(wN){var wO;wO=wI.Set(wN);return wN.slice();};wP=wL.get_View();wQ=t.Map(wM,wP);return $.New(_7,{key:wH,Var:wL,Storage:wI,view:wQ});}}),ListModel1:$.Class({},{FromSeq:function(wR){var wS;wS=function(wT){return wT;};return _7.Create(wS,wR);},Key:function(wU){return wU.key;},View:function(wV){return wV.view;},Wrap:function(wW,wX,wY,wZ){var w0,w1,w4,w5,w6,w7,xd,xl,xm;w0=[_8.New12()];w1=function(w2){var w3;w3=wY(w2);w0[0].set_Item((wW.get_Key())(w2),w3);return w3;};w4=wW.Var.get_Value();w5=c.map(w1,w4);w6=wW.Var;w7=function(w8){var w9,w_,xc;w9=_8.New12();w_=function(w$){var xa,xb;xa=(wW.get_Key())(w$);xb=w0[0].ContainsKey(xa)?(wZ(w0[0].get_Item(xa)))(w$):wY(w$);w9.set_Item(xa,xb);return xb;};xc=c.map(w_,w8);w0[0]=w9;return xc;};xd=function(){return function(xf){var xg,xh,xk;xg=_8.New12();xh=function(xi){var xj;xj=wX(xi);xg.set_Item((wW.get_Key())(xj),xi);return xj;};xk=c.map(xh,xf);w0[0]=xg;return xk;};};xl=W.Lens(w6,w7,xd);xm=wW.get_Key();return $.New(_7,{key:function(xn){return xm(wX(xn));},Var:xl,Storage:_6.InMemory(w5),view:t.Map(function(xo){return xo;},xl.get_View())});}}),ListModels:{Contains:function(xp,xq,xr){var xs;xs=xp(xq);return d.exists(function(xt){return m.Equals(xp(xt),xs);},xr);}},Model:$.Class({get_View:function(){return _9.View(this);}},{Create:function(xu,xv){var xw,xx,xy;xw=V.Create(xv);xx=xw.get_View();xy=t.Map(xu,xx);return $.New(_,{$:0,$0:xw,$1:xy});},Update:function(xz,xA){var xB,xC;xB=xA.$0;xC=function(xD){xz(xD);return xD;};return W.Update(xB,xC);}}),Model1:$.Class({},{View:function(xE){var xF;xF=xE.$1;return xF;}}),ReactiveExtensions:$.Class({},{New:function(){return $.New(this,{});}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(xG){var xI=this;return this.baseRef.Update(function(xH){return(xI.update.call(null,xH))(xG);});},Update:function(xJ){var xL=this;return this.baseRef.Update(function(xK){return(xL.update.call(null,xK))(xJ(xL.get.call(null,xK)));});},UpdateMaybe:function(xM){var xO=this;return this.baseRef.UpdateMaybe(function(xN){return s.map(xO.update.call(null,xN),xM(xO.get.call(null,xN)));});},get_Id:function(){return this.id;},get_Value:function(){return this.get.call(null,this.baseRef.Get());},get_View:function(){var xP,xQ;xP=this.get;xQ=this.baseRef.get_View();return t.Map(xP,xQ);},set_Value:function(xR){var xT=this;return this.baseRef.Update(function(xS){return(xT.update.call(null,xS))(xR);});}},{New:function(xU,xV,xW){var xX;xX=$.New(this,{});xX.baseRef=xU;xX.get=xV;xX.update=xW;xX.id=h.Id();return xX;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(xY){var xZ,x0,x2=this,x3;xZ=this.m;x0=function(x1){return{$:1,$0:(x2.update.call(null,x1))(xY)};};x3=x2.key;return xZ.UpdateBy(x0,x3);},Update:function(x4){var x5,x6,x8=this,x9;x5=this.m;x6=function(x7){return{$:1,$0:(x8.update.call(null,x7))(x4(x8.get.call(null,x7)))};};x9=x8.key;return x5.UpdateBy(x6,x9);},UpdateMaybe:function(x_){var x$,ya,yc=this,yd;x$=this.m;ya=function(yb){return s.map(yc.update.call(null,yb),x_(yc.get.call(null,yb)));};yd=yc.key;return x$.UpdateBy(ya,yd);},get_Id:function(){return this.id;},get_Value:function(){return this.Get();},get_View:function(){var ye,yf;ye=this.get;yf=this.m.FindByKeyAsView(this.key);return t.Map(ye,yf);},set_Value:function(yg){return this.Set(yg);}},{New:function(yh,yi,yj,yk){var yl;yl=$.New(this,{});yl.m=yh;yl.key=yi;yl.get=yj;yl.update=yk;yl.id=h.Id();return yl;}}),Route:{Append:function(ym,yn){var yo,yp;yo=ym.$0;yp=yn.$0;return{$:0,$0:o.Append(yo,yp)};},FromList:function(yq){var yr,ys;yr=c.ofSeq(yq);ys=o.FromArray(yr);return{$:0,$0:ys};},MakeHash:function(yt){var yu,yv,yw;yu=yt.$0;yv=o.ToArray(yu);yw=c.map(function(yx){return ba(yx);},yv);return bb.concat("/",yw);},NoHash:function(yy){return bb.StartsWith(yy,"#")?yy.substring(1):yy;},ParseHash:function(yz){var yA,yB,yD;yA=bb.SplitChars(bc.NoHash(yz),[47],1);yB=c.map(function(yC){return bd(yC);},yA);yD=o.FromArray(yB);return{$:0,$0:yD};},SameHash:function(yE,yF){return bc.NoHash(yE)===bc.NoHash(yF);},ToList:function(yG){var yH,yI;yH=yG.$0;yI=o.ToArray(yH);return A.ofArray(yI);}},RouteMap1:$.Class({},{Create:function(yJ,yK){return{Des:yK,Ser:yJ};},Install:function(yL){return be.InstallMap(yL);}}),Router:$.Class({},{Dir:function(yM,yN){var yO;yO=bf.Merge(yN);return bf.Prefix(yM,yO);},Install:function(yP,yQ){return be.Install(yP,yQ);},Merge:function(yR){return be.MergeRouters(yR);},Prefix:function(yS,yT){var yU,yV;yU=yT.$0;yV=yT.$1;return{$:0,$0:yU,$1:bg.Prefix(yS,yV)};}}),Router1:$.Class({},{Route:function(yW,yX,yY){return be.DefineRoute(yW,yX,yY);}}),Routing:{ComputeBodies:function(yZ){var y0,y1,y3;y0=_8.New12();y1=function(y2){return y0.set_Item(y2.RouteId,y2);};y3=bg.ToArray(yZ);c.iter(y1,y3);return y0;},DefineRoute:function(y4,y5,y6){var y7,y8,y9,y_;y7=V.Create(y5);y8=h.Int();y9=(y6({$:0,$0:y8}))(y7);y_=bg.Leaf({$:0,$0:y8,$1:function(y$){var za,zc;za=function(zb){return y$.UpdateRoute.call(null,be.DoLink(y4,zb));};zc=y7.get_View();E.Sink(za,zc);return{OnRouteChanged:function(zd){return W.Set(y7,be.DoRoute(y4,zd));},OnSelect:function(){return y$.UpdateRoute.call(null,be.DoLink(y4,V.Get(y7)));},RouteId:y8,RouteValue:y9};}});return{$:0,$0:{$:1,$0:y9},$1:y_};},DoLink:function(zf,zg){return bc.FromList(zf.Ser.call(null,zg));},DoRoute:function(zh,zi){return zh.Des.call(null,bc.ToList(zi));},Install:function(zj,zk){var zl,zm,zn,zq,zr,zx,zy,zA,zB,zC,zD,zE,zF,zG,zH,zJ,zK,zR;zl=zk.$0;zm=zk.$1;zn=be.InstallMap({Des:function(zo){return bc.FromList(zo);},Ser:function(zp){return bc.ToList(zp);}});zq={Bodies:undefined,CurrentRoute:zn,CurrentSite:0,Selection:undefined};zr=function(zs){return function(zt){var zu,zv;zu=zt.$1;zv=zt.$0;return zu({UpdateRoute:function(zw){return be.OnInternalSiteUpdate(zq,zv,zs,zw);}});};};zx=bg.Map(zr,zm);zq.Bodies=be.ComputeBodies(zx);zy=function(zz){return bg.Lookup(zx,bc.ToList(zz));};zA=zy(V.Get(zn));if(zA.$==0){zD=zA.$0;zA.$1;zq.CurrentSite=zD.RouteId;zC=V.Create(zD.RouteValue);}else{if(zl.$==1){zG=zl.$0;zF=zG;}else{zF=N.FailWith("Site.Install fails on empty site");}zE=zF;zC=V.Create(zE);}zB=zC;zq.Selection=zB;zH=function(zI){return be.OnSelectSite(zq,zj(zI));};zJ=zB.get_View();E.Sink(zH,zJ);zK=function(zL){var zM,zN,zO,zP,zQ;zM=zy(zL);if(zM.$==1){zN=null;}else{zO=zM.$0;zP=zM.$1;zQ=bc.FromList(zP);zN=be.OnGlobalRouteChange(zq,zO,zQ);}return zN;};zK(V.Get(zn));zR=zn.get_View();E.Sink(zK,zR);return zB;},InstallMap:function(zS){var zT,zW,zX,z0,z2,z5;zT=function(){var zV;zV=bc.ParseHash(bh.location.hash);return zS.Des.call(null,bc.ToList(zV));};zW=V.Create(zT(null));zX=function(zY){var zZ;zZ=V.Get(zW);return!m.Equals(zS.Ser.call(null,zZ),zS.Ser.call(null,zY))?W.Set(zW,zY):null;};z0=function(){return zX(zT(null));};bh.onpopstate=z0;bh.onhashchange=z0;z2=function(z3){var z4;z4=bc.MakeHash(bc.FromList(zS.Ser.call(null,z3)));return!bc.SameHash(bh.location.hash,z4)?void(bh.location.hash=z4):null;};z5=zW.get_View();E.Sink(z2,z5);return zW;},MergeRouters:function(z6){var z7,z8,z$,Aa,Ab,Ae,Af,Ag;z7=d.toArray(z6);z8=function(z9){var z_;z_=z9.$1;return z_;};z$=d.map(z8,z7);Aa=bg.Merge(z$);Ab=function(Ac){var Ad;Ad=Ac.$0;return Ad;};Ae=d.tryPick(Ab,z7);if(Aa.$==1){Ag=Aa.$0;Af={$:0,$0:Ae,$1:Ag};}else{Af=N.FailWith("Invalid Site.Merge: need more prefix disambiguation");}return Af;},OnGlobalRouteChange:function(Ah,Ai,Aj){var Ak;if(Ah.CurrentSite!==Ai.RouteId){Ah.CurrentSite=Ai.RouteId;Ak=W.Set(Ah.Selection,Ai.RouteValue);}else{Ak=null;}return Ai.OnRouteChanged.call(null,Aj);},OnInternalSiteUpdate:function(Al,Am,An,Ao){var Ap,Aq;if(Al.CurrentSite===Am){Aq=bc.Append(bc.FromList(An),Ao);Ap=be.SetCurrentRoute(Al,Aq);}else{Ap=null;}return Ap;},OnSelectSite:function(Ar,As){var At,Au;At=As.$0;if(Ar.CurrentSite!==At){Ar.CurrentSite=At;Au=Ar.Bodies.get_Item(At).OnSelect.call(null,null);}else{Au=null;}return Au;},SetCurrentRoute:function(Av,Aw){return!m.Equals(V.Get(Av.CurrentRoute),Aw)?W.Set(Av.CurrentRoute,Aw):null;}},Snap1:{Bind:function(Ax,Ay){var Az,AA,AC;Az=bi.Create();AA=function(){return bi.MarkObsolete(Az);};AC=function(AD){var AE;AE=Ax(AD);return bi.When(AE,function(AF){return(bi.IsForever(AE)?bi.IsForever(Ay):false)?bi.MarkForever(Az,AF):bi.MarkReady(Az,AF);},AA);};bi.When(Ay,AC,AA);return Az;},Create:function(){return bi.Make({$:3,$0:[],$1:[]});},CreateForever:function(AG){return bi.Make({$:0,$0:AG});},CreateForeverAsync:function(AH){var AI,AJ;AI=bi.Make({$:3,$0:[],$1:[]});AJ=a.Delay(function(){return a.Bind(AH,function(AL){return a.Return(bi.MarkForever(AI,AL));});});a.Start(AJ,{$:0});return AI;},CreateWithValue:function(AM){return bi.Make({$:2,$0:AM,$1:[]});},IsForever:function(AN){var AO;AO=AN.State;return AO.$==0?true:false;},IsObsolete:function(AP){var AQ;AQ=AP.State;return AQ.$==1?true:false;},Make:function(AR){return{State:AR};},Map:function(AS,AT){var AU,AV,AW,AX;AU=AT.State;if(AU.$==0){AW=AU.$0;AV=bi.CreateForever(AS(AW));}else{AX=bi.Create();bi.When(AT,function(AY){var AZ;AZ=AS(AY);return bi.MarkDone(AX,AT,AZ);},function(){return bi.MarkObsolete(AX);});AV=AX;}return AV;},Map2:function(A1,A2,A3){var A4,A5,A6,A7,A8,A9,A_,A$,Bb,Bc,Bd,Be,Bg;A4=[A2.State,A3.State];if(A4[0].$==0){if(A4[1].$==0){A7=A4[0].$0;A8=A4[1].$0;A6=bi.CreateForever((A1(A7))(A8));}else{A9=A4[0].$0;A6=bi.Map(A1(A9),A3);}A5=A6;}else{if(A4[1].$==0){A$=A4[1].$0;A_=bi.Map(function(Ba){return(A1(Ba))(A$);},A2);}else{Bb=bi.Create();Bc=[{$:0}];Bd=[{$:0}];Be=function(){Bc[0]={$:0};Bd[0]={$:0};return bi.MarkObsolete(Bb);};Bg=function(){var Bi,Bj,Bk,Bl,Bm;Bi=[Bc[0],Bd[0]];if(Bi[0].$==1){if(Bi[1].$==1){Bl=Bi[0].$0;Bm=Bi[1].$0;Bk=(bi.IsForever(A2)?bi.IsForever(A3):false)?bi.MarkForever(Bb,(A1(Bl))(Bm)):bi.MarkReady(Bb,(A1(Bl))(Bm));}else{Bk=null;}Bj=Bk;}else{Bj=null;}return Bj;};bi.When(A2,function(Bn){Bc[0]={$:1,$0:Bn};return Bg(null);},Be);bi.When(A3,function(Bo){Bd[0]={$:1,$0:Bo};return Bg(null);},Be);A_=Bb;}A5=A_;}return A5;},Map3:function(Bp,Bq,Br,Bs){var Bt,Bu,Bv,Bw,Bx,By,Bz,BA,BB,BD,BE,BF,BH,BK,BL,BM,BN,BP,BS,BT,BW,BX,BY,BZ,B0,B2;Bt=[Bq.State,Br.State,Bs.State];if(Bt[0].$==0){if(Bt[1].$==0){if(Bt[2].$==0){Bx=Bt[0].$0;By=Bt[1].$0;Bz=Bt[2].$0;Bw=bi.CreateForever(((Bp(Bx))(By))(Bz));}else{BA=Bt[0].$0;BB=Bt[1].$0;Bw=bi.Map(function(BC){return((Bp(BA))(BB))(BC);},Bs);}Bv=Bw;}else{if(Bt[2].$==0){BE=Bt[0].$0;BF=Bt[2].$0;BD=bi.Map(function(BG){return((Bp(BE))(BG))(BF);},Br);}else{BH=Bt[0].$0;BD=bi.Map2(function(BI){return function(BJ){return((Bp(BH))(BI))(BJ);};},Br,Bs);}Bv=BD;}Bu=Bv;}else{if(Bt[1].$==0){if(Bt[2].$==0){BM=Bt[1].$0;BN=Bt[2].$0;BL=bi.Map(function(BO){return((Bp(BO))(BM))(BN);},Bq);}else{BP=Bt[1].$0;BL=bi.Map2(function(BQ){return function(BR){return((Bp(BQ))(BP))(BR);};},Bq,Bs);}BK=BL;}else{if(Bt[2].$==0){BT=Bt[2].$0;BS=bi.Map2(function(BU){return function(BV){return((Bp(BU))(BV))(BT);};},Bq,Br);}else{BW=bi.Create();BX=[{$:0}];BY=[{$:0}];BZ=[{$:0}];B0=function(){BX[0]={$:0};BY[0]={$:0};BZ[0]={$:0};return bi.MarkObsolete(BW);};B2=function(){var B4,B5,B6,B7,B8,B9,B_;B4=[BX[0],BY[0],BZ[0]];if(B4[0].$==1){if(B4[1].$==1){if(B4[2].$==1){B8=B4[0].$0;B9=B4[1].$0;B_=B4[2].$0;B7=((bi.IsForever(Bq)?bi.IsForever(Br):false)?bi.IsForever(Bs):false)?bi.MarkForever(BW,((Bp(B8))(B9))(B_)):bi.MarkReady(BW,((Bp(B8))(B9))(B_));}else{B7=null;}B6=B7;}else{B6=null;}B5=B6;}else{B5=null;}return B5;};bi.When(Bq,function(B$){BX[0]={$:1,$0:B$};return B2(null);},B0);bi.When(Br,function(Ca){BY[0]={$:1,$0:Ca};return B2(null);},B0);bi.When(Bs,function(Cb){BZ[0]={$:1,$0:Cb};return B2(null);},B0);BS=BW;}BK=BS;}Bu=BK;}return Bu;},MapAsync:function(Cc,Cd){var Ce;Ce=bi.Create();bi.When(Cd,function(Cf){return bj.StartTo(Cc(Cf),function(Cg){return bi.MarkDone(Ce,Cd,Cg);});},function(){return bi.MarkObsolete(Ce);});return Ce;},MapCached:function(Ci,Cj,Ck){var Cl;Cl=function(Cm){var Cn,Co,Cp,Cq,Cr,Cs,Ct;Cn=Ci[0];if(Cn.$==1){Cn.$0[1];Cp=Cn.$0[0];if(m.Equals(Cm,Cp)){Cn.$0[0];Cr=Cn.$0[1];Cq=Cr;}else{Cs=Cj(Cm);Ci[0]={$:1,$0:[Cm,Cs]};Cq=Cs;}Co=Cq;}else{Ct=Cj(Cm);Ci[0]={$:1,$0:[Cm,Ct]};Co=Ct;}return Co;};return bi.Map(Cl,Ck);},MarkDone:function(Cu,Cv,Cw){return bi.IsForever(Cv)?bi.MarkForever(Cu,Cw):bi.MarkReady(Cu,Cw);},MarkForever:function(Cx,Cy){var Cz,CA,CB;Cz=Cx.State;if(Cz.$==3){CB=Cz.$0;Cx.State={$:0,$0:Cy};CA=d.iter(function(CC){return CC(Cy);},CB);}else{CA=null;}return CA;},MarkObsolete:function(CD){var CE,CF,CG,CI;CE=CD.State;if(CE.$==1){CF=null;}else{if(CE.$==2){CG=CE.$1;CD.State={$:1};CF=d.iter(function(CH){return CH(null);},CG);}else{if(CE.$==3){CI=CE.$1;CD.State={$:1};CF=d.iter(function(CJ){return CJ(null);},CI);}else{CF=null;}}}return CF;},MarkReady:function(CK,CL){var CM,CN,CO,CP;CM=CK.State;if(CM.$==3){CO=CM.$1;CP=CM.$0;CK.State={$:2,$0:CL,$1:CO};CN=d.iter(function(CQ){return CQ(CL);},CP);}else{CN=null;}return CN;},Sequence:function(CR){var CS,CT,CU,CV,CW,CX,CY,C0,C3;if(d.isEmpty(CR)){CS=bi.CreateForever(d.empty());}else{CT=bi.Create();CU=c.ofSeq(CR);CV=c.length(CU);CW=[0];CX=[[]];CY=function(){CW[0]=0;CX[0]=[];return bi.MarkObsolete(CT);};C0=function(){return CW[0]===CV?d.forall(function(C2){return bi.IsForever(C2);},CU)?bi.MarkForever(CT,CX[0]):bi.MarkReady(CT,CX[0]):null;};C3=function(C4){return function(C5){return bi.When(C5,function(C6){CX[0][C4]=C6;bk.incr(CW);return C0(null);},CY);};};c.iteri(C3,CU);CS=CT;}return CS;},SnapshotOn:function(C7,C8){var C9,C_,C$,Da,Dc;C9=bi.Create();C_=[{$:0}];C$=[false];Da=function(){C_[0]={$:0};return bi.MarkObsolete(C9);};Dc=function(){var De,Df,Dg,Dh,Di,Dj,Dk,Dl,Dm;if(C$[0]){Df=C_[0];if(Df.$==1){Df.$0;if(bi.IsForever(C7)){Di=Df.$0;Dh=bi.MarkForever(C9,Di);}else{if(Df.$==1){Dk=Df.$0;Dj=bi.MarkReady(C9,Dk);}else{Dj=null;}Dh=Dj;}Dg=Dh;}else{if(Df.$==1){Dm=Df.$0;Dl=bi.MarkReady(C9,Dm);}else{Dl=null;}Dg=Dl;}De=Dg;}else{De=null;}return De;};bi.When(C7,function(){C$[0]=true;return Dc(null);},Da);bi.When(C8,function(Do){C_[0]={$:1,$0:Do};return Dc(null);},function(){});return C9;},When:function(Dq,Dr,Ds){var Dt,Du,Dv,Dw,Dx,Dy,Dz;Dt=Dq.State;if(Dt.$==1){Du=Ds(null);}else{if(Dt.$==2){Dv=Dt.$0;Dw=Dt.$1;Dw.push(Ds);Du=Dr(Dv);}else{if(Dt.$==3){Dx=Dt.$1;Dy=Dt.$0;Dy.push(Dr);Du=Dx.push(Ds);}else{Dz=Dt.$0;Du=Dr(Dz);}}}return Du;}},Storage1:{ArrayStorage:$.Class({Add:function(DA,DB){var DC;DC=DB.push(DA);return DB;},Init:function(){return this.init;},RemoveIf:function(DD,DE){return c.filter(DD,DE);},Set:function(DF){return d.toArray(DF);},SetAt:function(DG,DH,DI){c.set(DI,DG,DH);return DI;}},{New:function(DJ){var DK;DK=$.New(this,{});DK.init=DJ;return DK;}}),InMemory:function(DL){return bl.New(DL);},LocalStorage:function(DM,DN){return bm.New(DM,DN);},LocalStorageBackend:$.Class({Add:function(DO,DP){var DQ;DQ=DP.push(DO);return this.set(DP);},Init:function(){var DR,DS,DT,DU,DV,DW;DR=this.storage.getItem(this.id);if(DR===null){DS=[];}else{try{DU=bn.parse(DR);DV=this.serializer.Decode;DT=c.map(DV,DU);}catch(DW){DT=[];}DS=DT;}return DS;},RemoveIf:function(DX,DY){var DZ;DZ=c.filter(DX,DY);return this.set(DZ);},Set:function(D0){var D1;D1=d.toArray(D0);return this.set(D1);},SetAt:function(D2,D3,D4){c.set(D4,D2,D3);return this.set(D4);},clear:function(){return this.storage.removeItem(this.id);},set:function(D5){var D6,D7;D6=this.serializer.Encode;D7=c.map(D6,D5);this.storage.setItem(this.id,bn.stringify(D7));return D5;}},{New:function(D8,D9){var D_;D_=$.New(this,{});D_.id=D8;D_.serializer=D9;D_.storage=bh.localStorage;return D_;}})},String:{isBlank:function(D$){return bb.forall(function(Ea){return bo.IsWhiteSpace(Ea);},D$);}},Submitter:$.Class({Trigger:function(){return W.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(Eb,Ec){return bp.New(Eb,Ec);},New:function(Ed,Ee){var Ef,Eg,Eh;Ef=$.New(this,{});Ef.input=Ed;Ef["var"]=V.Create(null);Eg=Ef["var"].get_View();Eh=Ef.input;Ef.view=t.SnapshotOn(Ee,Eg,Eh);return Ef;}}),Submitter1:$.Class({},{CreateOption:function(Ei){var Ej;Ej=function(Ek){return{$:1,$0:Ek};};return bp.New(t.Map(Ej,Ei),{$:0});},Input:function(El){return El.get_Input();},Trigger:function(Em){return Em.Trigger();},View:function(En){return En.get_View();}}),Trans:$.Class({},{AnimateChange:function(Eo,Ep,Eq){return(Eo.TChange.call(null,Ep))(Eq);},AnimateEnter:function(Er,Es){return Er.TEnter.call(null,Es);},AnimateExit:function(Et,Eu){return Et.TExit.call(null,Eu);}}),Trans1:$.Class({},{CanAnimateChange:function(Ev){return(Ev.TFlags&1)!==0;},CanAnimateEnter:function(Ew){return(Ew.TFlags&2)!==0;},CanAnimateExit:function(Ex){return(Ex.TFlags&4)!==0;},Change:function(Ey,Ez){var EA;EA=Ez.TFlags|1;return{TChange:Ey,TEnter:Ez.TEnter,TExit:Ez.TExit,TFlags:EA};},Create:function(EB){return{TChange:EB,TEnter:function(EC){return n.Const(EC);},TExit:function(ED){return n.Const(ED);},TFlags:1};},Enter:function(EE,EF){var EG;EG=EF.TFlags|2;return{TChange:EF.TChange,TEnter:EE,TExit:EF.TExit,TFlags:EG};},Exit:function(EH,EI){var EJ;EJ=EI.TFlags|4;return{TChange:EI.TChange,TEnter:EI.TEnter,TExit:EH,TFlags:EJ};},Trivial:function(){return{TChange:function(){return function(EL){return n.Const(EL);};},TEnter:function(EM){return n.Const(EM);},TExit:function(EN){return n.Const(EN);},TFlags:0};}}),Trie1:{AllSome:function(EO){var EP,EQ,ER,ES,ET,EU;EP=bq.Get(EO);EQ=bs.New2();ER=true;while(ER?EP.MoveNext():false){ES=EP.get_Current();if(ES.$==1){EU=ES.$0;ET=EQ.Add(EU);}else{ET=ER=false;}}return ER?{$:1,$0:EQ.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(EV){return EV.$==2?true:false;},Leaf:function(EW){return{$:2,$0:EW};},Look:function(EX,EY){var EZ,E0,E1,E2,E3,E4,E5,E6,E7,E8;EZ=[EY,EX];if(EZ[0].$==2){E1=EZ[0].$0;E0={$:0,$0:E1,$1:EX};}else{if(EZ[0].$==0){if(EZ[1].$==1){E3=EZ[1].$0;E4=EZ[1].$1;E5=EZ[0].$0;E6=bt.TryFind(E3,E5);if(E6.$==0){E7={$:1};}else{E8=E6.$0;E7=bg.Look(E4,E8);}E2=E7;}else{E2={$:1};}E0=E2;}else{E0={$:1};}}return E0;},Lookup:function(E9,E_){return bg.Look(d.toList(E_),E9);},Map:function(E$,Fa){return bg.MapLoop($.New(O,{$:0}),E$,Fa);},MapLoop:function(Fb,Fc,Fd){var Fe,Ff,Fg,Fh,Fk;if(Fd.$==1){Fe={$:1};}else{if(Fd.$==2){Ff=Fd.$0;Fe={$:2,$0:(Fc(Fb))(Ff)};}else{Fg=Fd.$0;Fh=function(Fi){return function(Fj){return bg.MapLoop(A.append(Fb,A.ofArray([Fi])),Fc,Fj);};};Fk=bt.Map(Fh,Fg);Fe=bg.TrieBranch(Fk);}}return Fe;},Mapi:function(Fl,Fm){var Fn,Fo;Fn=[0];Fo=function(){var Fq;Fq=Fn[0];Fn[0]=Fq+1;return Fq;};return bg.Map(function(Fr){return(Fl(Fo(null)))(Fr);},Fm);},Merge:function(Fs){var Ft,Fu,Fv,Fx,Fy,FC,FE,FG,FH;Ft=d.toArray(Fs);Fu=c.length(Ft);if(Fu===0){Fv={$:1,$0:{$:1}};}else{if(Fu===1){Fv={$:1,$0:c.get(Ft,0)};}else{if(d.exists(function(Fw){return bg.IsLeaf(Fw);},Ft)){Fx={$:0};}else{Fy=function(Fz){var FA,FB;if(Fz.$==0){FB=Fz.$0;FA={$:1,$0:FB};}else{FA={$:0};}return FA;};FC=function(FD){return bg.Merge(FD);};FE=function(FF){return bg.TrieBranch(FF);};FG=d.choose(Fy,Ft);FH=bg.MergeMaps(FC,FG);Fx=s.map(FE,FH);}Fv=Fx;}}return Fv;},MergeMaps:function(FI,FJ){var FK,FM,FR,FS,FT,FU,F1,F2,F3;FK=d.collect(function(FL){return bt.ToSeq(FL);},FJ);FM=function(FN){return function(FO){var FP,FQ;FP=FO[0];FQ=FO[1];return bg.MultiAdd(FP,FQ,FN);};};FR=bu.New1([]);FS=d.fold(FM,FR,FK);FT=bt.ToSeq(FS);FU=function(FV){var FW,FX,FY,F0;FW=FV[0];FX=FV[1];FY=function(FZ){return[FW,FZ];};F0=FI(FX);return s.map(FY,F0);};F1=d.map(FU,FT);F2=bg.AllSome(F1);F3=function(F4){return bt.OfArray(d.toArray(F4));};return s.map(F3,F2);},MultiAdd:function(F5,F6,F7){return F7.Add(F5,$.New(O,{$:1,$0:F6,$1:bg.MultiFind(F5,F7)}));},MultiFind:function(F8,F9){return N.DefaultArg(bt.TryFind(F8,F9),$.New(O,{$:0}));},Prefix:function(F_,F$){return bg.TrieBranch(bu.New1(A.ofArray([[F_,F$]])));},ToArray:function(Ga){var Gb,Gc;Gb=[];Gc=bg.Map(function(){return function(Ge){return Gb.push(Ge);};},Ga);return Gb.slice(0);},TrieBranch:function(Gf){return Gf.get_IsEmpty()?{$:1}:{$:0,$0:Gf};}},Var:$.Class({Get:function(){return V.Get(this);},Set:function(Gg){return W.Set(this,Gg);},Update:function(Gh){return W.Update(this,Gh);},UpdateMaybe:function(Gi){var Gj,Gk,Gl;Gj=Gi(V.Get(this));if(Gj.$==1){Gl=Gj.$0;Gk=W.Set(this,Gl);}else{Gk=null;}return Gk;},get_Id:function(){return"uinref"+$$.String(W.GetId(this));},get_Value:function(){return V.Get(this);},get_View:function(){var Gn=this;return{$:0,$0:function(){return W.Observe(Gn);}};},get_View1:function(){return this.get_View();},set_Value:function(Go){return W.Set(this,Go);}},{Create:function(Gp){return $.New(V,{Const:false,Current:Gp,Snap:bi.CreateWithValue(Gp),Id:h.Int()});},Get:function(Gq){return Gq.Current;}}),Var1:$.Class({},{GetId:function(Gr){return Gr.Id;},Lens:function(Gs,Gt,Gu){return bv.New(Gs,Gt,Gu);},Observe:function(Gv){return Gv.Snap;},Set:function(Gw,Gx){var Gy;if(Gw.Const){Gy=null;}else{bi.MarkObsolete(Gw.Snap);Gw.Current=Gx;Gy=void(Gw.Snap=bi.CreateWithValue(Gx));}return Gy;},SetFinal:function(Gz,GA){var GB;if(Gz.Const){GB=null;}else{Gz.Const=true;Gz.Current=GA;GB=void(Gz.Snap=bi.CreateForever(GA));}return GB;},Update:function(GC,GD){var GE;GE=GD(V.Get(GC));return W.Set(GC,GE);}}),View:$.Class({},{ConvertSeqNode:function(GF,GG){var GH,GI;GH=V.Create(GG);GI=GH.get_View();return{NValue:GF(GI),NVar:GH,NView:GI};},CreateLazy:function(GJ){var GK,GL;GK=[{$:0}];GL=function(){var GN,GO,GP,GQ,GR,GS,GT;GN=GK[0];if(GN.$==1){GP=GN.$0;if(!bi.IsObsolete(GP)){GR=GN.$0;GQ=GR;}else{GS=GJ(null);GK[0]={$:1,$0:GS};GQ=GS;}GO=GQ;}else{GT=GJ(null);GK[0]={$:1,$0:GT};GO=GT;}return GO;};return{$:0,$0:GL};},CreateLazy2:function(GU,GV,GW){var GX,GY;GX=GV.$0;GY=GW.$0;return t.CreateLazy(function(){var G0,G1;G0=GX(null);G1=GY(null);return(GU(G0))(G1);});},Map:function(G2,G3){var G4;G4=G3.$0;return t.CreateLazy(function(){var G6;G6=G4(null);return bi.Map(G2,G6);});},Map2:function(G7,G8,G9){var G_;G_=function(G$){return function(Ha){return bi.Map2(G7,G$,Ha);};};return t.CreateLazy2(G_,G8,G9);},MapAsync:function(Hb,Hc){var Hd;Hd=Hc.$0;return t.CreateLazy(function(){var Hf;Hf=Hd(null);return bi.MapAsync(Hb,Hf);});},MapAsync2:function(Hg,Hh,Hi){var Hj,Hl;Hj=function(Hk){return Hk;};Hl=t.Map2(Hg,Hh,Hi);return t.MapAsync(Hj,Hl);},MapCached:function(Hm,Hn){var Ho,Hp;Ho=Hn.$0;Hp=[{$:0}];return t.CreateLazy(function(){var Hr;Hr=Ho(null);return bi.MapCached(Hp,Hm,Hr);});},MapSeqCached:function(Hs,Ht){var Hu;Hu=function(Hv){return Hv;};return t.MapSeqCachedBy(Hu,Hs,Ht);},MapSeqCachedBy:function(Hw,Hx,Hy){var Hz,HA;Hz=[_8.New12()];HA=function(HB){var HC,HD,HE,HI,HJ;HC=Hz[0];HD=_8.New12();HE=function(HF){var HG,HH;HG=Hw(HF);HH=HC.ContainsKey(HG)?HC.get_Item(HG):Hx(HF);HD.set_Item(HG,HH);return HH;};HI=d.toArray(HB);HJ=c.map(HE,HI);Hz[0]=HD;return HJ;};return t.Map(HA,Hy);},MapSeqCachedView:function(HK,HL){var HM,HO;HM=function(HN){return HN;};HO=function(){return function(HQ){return HK(HQ);};};return t.MapSeqCachedViewBy(HM,HO,HL);},MapSeqCachedViewBy:function(HR,HS,HT){var HU,HV;HU=[_8.New12()];HV=function(HW){var HX,HY,HZ,H0,H9;HX=HU[0];HY=_8.New12();HZ=d.toArray(HW);H0=function(H1){var H2,H3,H4,H5,H6,H7;H2=HR(H1);if(HX.ContainsKey(H2)){H5=HX.get_Item(H2);H6=H5.NVar;W.Set(H6,H1);H4=H5;}else{H7=function(H8){return(HS(H2))(H8);};H4=t.ConvertSeqNode(H7,H1);}H3=H4;HY.set_Item(H2,H3);return H3.NValue;};H9=c.map(H0,HZ);HU[0]=HY;return H9;};return t.Map(HV,HT);},SnapshotOn:function(H_,H$,Ia){var Ib,Ic,Id,Ie;Ib=H$.$0;Ic=Ia.$0;Id=bi.CreateWithValue(H_);Ie=function(){var Ig,Ih,Ii,Ij;Ig=Ib(null);Ih=Ic(null);if(bi.IsObsolete(Id)){Ii=bi.SnapshotOn(Ig,Ih);}else{Ij=bi.SnapshotOn(Ig,Ih);bi.When(Ij,function(){},function(){return bi.MarkObsolete(Id);});Ii=Id;}return Ii;};return t.CreateLazy(Ie);},UpdateWhile:function(Im,In,Io){var Ip,Iq;Ip=[Im];Iq=function(Ir){return function(Is){Ir?void(Ip[0]=Is):null;return Ip[0];};};return t.Map2(Iq,In,Io);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(It,Iu){var Iv;Iv=function(Iw){return function(Ix){return Iw(Ix);};};return t.Map2(Iv,It,Iu);},Bind:function(Iy,Iz){return E.Join(t.Map(Iy,Iz));},Const:function(IA){var IB;IB=bi.CreateForever(IA);return{$:0,$0:function(){return IB;}};},ConstAsync:function(ID){var IE;IE=bi.CreateForeverAsync(ID);return{$:0,$0:function(){return IE;}};},Join:function(IG){var IH;IH=IG.$0;return t.CreateLazy(function(){var IJ,IM;IJ=function(IK){var IL;IL=IK.$0;return IL(null);};IM=IH(null);return bi.Bind(IJ,IM);});},Sequence:function(IN){return t.CreateLazy(function(){var IP,IS;IP=function(IQ){var IR;IR=IQ.$0;return IR(null);};IS=d.map(IP,IN);return bi.Sequence(IS);});},Sink:function(IT,IU){var IV,IW;IV=IU.$0;IW=function(){var IY;IY=IV(null);return bi.When(IY,IT,function(){return bj.Schedule(IW);});};return bj.Schedule(IW);},TryFinally:function(I0,I1){var I2;I2=I1.$0;return t.CreateLazy(function(){var I4;try{I4=I2(null);}finally{I0(null);}return I4;});},TryWith:function(I5,I6){var I7;I7=I6.$0;return t.CreateLazy(function(){var I9,I_,I$,Ja;try{I9=I7(null);}catch(I_){I$=I5(I_);Ja=I$.$0;I9=Ja(null);}return I9;});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Seq);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.Slot1);m=$.Safe($$.WebSharper.Unchecked);n=$.Safe(f.An);o=$.Safe(f.AppendList1);p=$.Safe(f.Anims);q=$.Safe($$.requestAnimationFrame);r=$.Safe(f.Trans);s=$.Safe($$.WebSharper.Option);t=$.Safe(f.View);u=$.Safe($$.WebSharper.Lazy);v=$.Safe(f.Array);w=$.Safe(f.Attrs);x=$.Safe(f.DomUtility);y=$.Safe(f.AttrModule);z=$.Safe(f.AttrProxy);A=$.Safe($$.WebSharper.List);B=$.Safe(f.AnimatedAttrNode);C=$.Safe(f.Trans1);D=$.Safe(f.DynamicAttrNode);E=$.Safe(f.View1);F=$.Safe($$.document);G=$.Safe(f.Doc);H=$.Safe(f.Elt);I=$.Safe($$.Seq);J=$.Safe(f.Docs);K=$.Safe(f.String);L=$.Safe(f.CheckedInput);M=$.Safe(g.Mailbox);N=$.Safe($$.WebSharper.Operators);O=$.Safe(A.T);P=$.Safe($$.jQuery);Q=$.Safe(J.NodeSet);R=$.Safe(f.DocElemNode);S=$.Safe(J.DomNodes);T=$.Safe(f.Easing);U=$.Safe(f.Easings);V=$.Safe(f.Var);W=$.Safe(f.Var1);X=$.Safe($$.RegExp);Y=$.Safe(f.FlowBuilder);Z=$.Safe(f.Flow);_0=$.Safe(f.Input);_1=$.Safe(f.DoubleInterpolation);_2=$.Safe(f.Key);_3=$.Safe(f.ListModels);_4=$.Safe(f.RefImpl1);_5=$.Safe(f.ListModel1);_6=$.Safe(f.Storage1);_7=$.Safe(f.ListModel);_8=$.Safe(i.Dictionary);_9=$.Safe(f.Model1);_=$.Safe(f.Model);ba=$.Safe($$.encodeURIComponent);bb=$.Safe($$.WebSharper.Strings);bc=$.Safe(f.Route);bd=$.Safe($$.decodeURIComponent);be=$.Safe(f.Routing);bf=$.Safe(f.Router);bg=$.Safe(f.Trie1);bh=$.Safe($$.window);bi=$.Safe(f.Snap1);bj=$.Safe(g.Async);bk=$.Safe($$.WebSharper.Ref);bl=$.Safe(_6.ArrayStorage);bm=$.Safe(_6.LocalStorageBackend);bn=$.Safe($$.JSON);bo=$.Safe($$.WebSharper.Char);bp=$.Safe(f.Submitter);bq=$.Safe($$.WebSharper.Enumerator);br=$.Safe(i.ResizeArray);bs=$.Safe(br.ResizeArrayProxy);bt=$.Safe(i.MapModule);bu=$.Safe(i.FSharpMap);return bv=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(H,G);_0.MousePosSt1();_0.MouseBtnSt1();_0.KeyListenerState();_0.ActivateKeyListener();_0.ActivateButtonListener();U.CubicInOut();x.Doc();w.EmptyAttr();h.counter();return;});}());
