(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3;$.Define($$,{WebSharper:{Formlets:{Body:$.Class({},{New:function(_4,_5){return $.New(b,{Element:_4,Label:_5});}}),Controls:{Button:function(_6){var _7;_7=function(){var _9;_9=c.ofArray([f.Tags().text(_6)]);return f.Tags().NewTag("button",_9);};return g.ElementButton(_7);},Checkbox:function(_){return g.CheckboxControl(false,_);},CheckboxControl:function(ba,bb){var bc;bc=function(){var be,bf,bg,bh,bi,bo,bp;be=j.New($.New(m,{$:0,$0:bb}));bf=ba?c.ofArray([n.Attr().NewAttr("disabled","disabled")]):$.New(o,{$:0});bh=c.ofArray([n.Attr().NewAttr("type","checkbox"),n.Attr().NewAttr("class","inputCheckbox")]);bg=p.add(f.Tags().NewTag("input",bh),bf);bi=function(bj){return function(){var bl,bm,bn;if(!ba){bm=q(bj.get_Body()).prop("checked");bn=$.New(m,{$:0,$0:bm});bl=be.Trigger(bn);}else{bl=null;}return bl;};};r.Events().OnClick(bi,bg);bo=bg;bb?bo["HtmlProvider@33"].SetAttribute(bo.get_Body(),"defaultChecked","true"):bo["HtmlProvider@33"].RemoveAttribute(bo.get_Body(),"checked");bp=function(){var br;if(bb){br=bo["HtmlProvider@33"].SetProperty(bo.get_Body(),"checked",true);}else{bo["HtmlProvider@33"].RemoveAttribute(bo.get_Body(),"checked");br=bo["HtmlProvider@33"].SetProperty(bo.get_Body(),"checked",false);}return be.Trigger($.New(m,{$:0,$0:bb}));};bp(null);return[bo,bp,be];};return s.MkFormlet(bc);},CheckboxGroup:function(br){return g.CheckboxGroupControl(false,br);},CheckboxGroupControl:function(bs,bt){var bu,bH,bL,bN,bO;bu=function(bv){var bw,bx,by,bz,bA,bD,bE,bG;bw=bv[0];bx=bv[1];by=bv[2];bz=g.CheckboxControl(bs,by);bA=function(){var bC;bC=c.ofArray([f.Tags().text(bw)]);return f.Tags().NewTag("label",bC);};bD={$:1,$0:bA};bE=function(bF){return[bF,bx];};bG=t.WithLabel(bD,bz);return t.Map(bE,bG);};bH=function(bI){var bJ,bK;bJ=bI[0];bK=bI[1];return bJ?{$:1,$0:bK}:{$:0};};bL=function(bM){return c.choose(bH,bM);};bN=c.map(bu,bt);bO=t.Sequence(bN);return t.Map(bL,bO);},ElementButton:function(bP){var bQ;bQ=function(){var bS,bT,bU,bV,bY,bZ;bS=j.New($.New(m,{$:1,$0:$.New(o,{$:0})}));bT=[0];bU=bP(null);bV=function(){return function(){bS.Trigger($.New(m,{$:0,$0:bT[0]}));return u.incr(bT);};};r.Events().OnClick(bV,bU);bY=bU;bZ=function(){bT[0]=0;return bS.Trigger($.New(m,{$:1,$0:$.New(o,{$:0})}));};return[bY,bZ,bS];};return s.MkFormlet(bQ);},Input:function(b1){return g.InputField(false,"text",v.InputTextClass(),b1);},InputControl:function(b2,b3){var b4;b4=function(){var b6,b7,b8;b6=j.New($.New(m,{$:0,$0:b2}));b7=b3(b6);b7.set_Value(b2);b8=function(){b7.set_Value(b2);return b6.Trigger($.New(m,{$:0,$0:b2}));};return[b7,b8,b6];};return s.MkFormlet(b4);},InputField:function(b_,b$,ca,cb){return g.InputControl(cb,function(cc){var cd,ce,cf,cg;cd=b_?c.ofArray([n.Attr().NewAttr("readonly","readonly")]):$.New(o,{$:0});ce=c.append(c.ofArray([n.Attr().NewAttr("type",b$),n.Attr().NewAttr("class",ca)]),cd);cf=f.Tags().NewTag("input",ce);cg=function(){return!b_?cc.Trigger($.New(m,{$:0,$0:cf.get_Value()})):null;};g.OnTextChange(cg,cf);return cf;});},OnTextChange:function(ci,cj){var ck,cl,co,cr;ck=[cj.get_Value()];cl=function(){var cn;if(cj.get_Value()!==ck[0]){ck[0]=cj.get_Value();cn=ci(null);}else{cn=null;}return cn;};co=function(){return function(){return cl(null);};};r.Events().OnChange(co,cj);cr=function(){return function(){return cl(null);};};r.Events().OnKeyUp(cr,cj);cj.Dom.oninput=cl;return;},Password:function(cu){return g.InputField(false,"password","inputPassword",cu);},RadioButtonGroup:function(cv,cw){return g.RadioButtonGroupControl(false,cv,cw);},RadioButtonGroupControl:function(cx,cy,cz){var cA;cA=function(){var cC,cD,cE,cF,cG,cK,cL,cR,cS,cU,cV,c1,c2,c9,de,dq,dr,ds,dt;cC="id"+w.round(w.random()*100000000);if(cy.$==0){cE={$:0};}else{cF=cy.$0;cG=function(cH){return function(cI){var cJ;cI[0];cJ=cI[1];return[cH,cJ];};};cK=c.mapi(cG,cz);cL=function(cM){var cN,cO,cP,cQ;cN=cM[0];cO=cM[1];if(cy.$==0){cP={$:0};}else{cQ=cy.$0;cP=cQ===cN?{$:1,$0:$.New(m,{$:0,$0:cO})}:{$:0};}return cP;};cE=x.tryPick(cL,cK);}cD=cE;cR=j.New($.New(m,{$:1,$0:$.New(o,{$:0})}));cS=function(cT){return j.New(cT);};cU=y.Maybe(cR,cS,cD);cV=function(cW){var cX,cY,cZ,c0;cX=cW[0];cY=cW[1];c0=c.ofArray([n.Attr().NewAttr("class","inputRadio"),n.Attr().NewAttr("type","radio"),n.Attr().NewAttr("name",cC)]);cZ=p.add(f.Tags().NewTag("input",c0),cx?c.ofArray([n.Attr().NewAttr("disabled","disabled")]):$.New(o,{$:0}));return[cZ,cX,cY];};c1=c.map(cV,cz);c2=function(c3,c4,c5){var c6,c7,c8;if(cy.$==0){c3["HtmlProvider@33"].RemoveAttribute(c3.get_Body(),"checked");c6=cU.Trigger($.New(m,{$:1,$0:$.New(o,{$:0})}));}else{c7=cy.$0;if(c7===c5){c3["HtmlProvider@33"].SetProperty(c3.get_Body(),"checked",true);c8=cU.Trigger($.New(m,{$:0,$0:c4}));}else{c8=c3["HtmlProvider@33"].SetProperty(c3.get_Body(),"checked",false);}c6=c8;}return c6;};c9=function(){var c$;c$=function(da){return function(db){var dc,dd;dc=db[0];db[1];dd=db[2];return c2(dc,dd,da);};};return x.iteri(c$,c1);};de=function(df){return function(dg){var dh,di,dj,dk,dn;dh=dg[0];di=dg[1];dj=dg[2];c2(dh,dj,df);dk=function(){return function(){return!cx?cU.Trigger($.New(m,{$:0,$0:dj})):null;};};r.Events().OnClick(dk,dh);dn={$:1,$0:function(){var dp;dp=c.ofArray([f.Tags().text(di)]);return f.Tags().NewTag("label",dp);}};return $.New(b,{Element:dh,Label:dn});};};dq=c.mapi(de,c1);dr=z.FromSequence(dq);ds=$.New(A,{$:0,$0:dr});dt=s.RX().Return(ds);return $.New(B,{Body:dt,Dispose1:function(){},Notify:function(){return c9(null);},State:cU});};return t.New(cA);},ReadOnlyCheckbox:function(dw){return g.CheckboxControl(true,dw);},ReadOnlyInput:function(dx){return g.InputField(true,"text",v.InputTextClass(),dx);},ReadOnlyRadioButtonGroup:function(dy,dz){return g.RadioButtonGroupControl(true,dy,dz);},ReadOnlySelect:function(dA,dB){return g.SelectControl(true,dA,dB);},ReadOnlyTextArea:function(dC){return g.TextAreaControl(true,dC);},Select:function(dD,dE){return g.SelectControl(false,dD,dE);},SelectControl:function(dF,dG,dH){var dI;dI=function(){var dK,dM,dN,dO,dP,dT,dU,dV,dW,dX,dY,d1;dK=function(dL){return dL[1];};dM=c.map(dK,dH);dN=C.ofSeq(dM);dO=(dG>=0?dG<dH.get_Length():false)?dG:0;dP=function(dQ){return function(dR){var dS;dS=dR[0];dR[1];return f.Tags().NewTag("option",c.ofArray([f.Tags().text(dS),n.Attr().NewAttr("value",$$.String(dQ))]));};};dT=c.mapi(dP,dH);dU=f.Tags().NewTag("select",dT);dV=dF?p.add(dU,c.ofArray([n.Attr().NewAttr("disabled","disabled")])):dU;dW=$.New(m,{$:0,$0:C.get(dN,dO)});dX=j.New(dW);dY=function(){var d0;d0=$$.String(dO);dV["HtmlProvider@33"].SetProperty(dV.get_Body(),"value",d0);return dX.Trigger(dW);};dY(null);d1=function(){return function(){var d4,d5,d6,d7;if(!dF){d5=dV.get_Value();d6=C.get(dN,d5<<0);d7=$.New(m,{$:0,$0:d6});d4=dX.Trigger(d7);}else{d4=null;}return d4;};};r.Events().OnChange(d1,dV);dY(null);return[dV,dY,dX];};return s.MkFormlet(dI);},TextArea:function(d8){return g.TextAreaControl(false,d8);},TextAreaControl:function(d9,d_){return g.InputControl(d_,function(d$){var ea,eb,ec;ea=d9?c.ofArray([n.Attr().NewAttr("readonly","readonly")]):$.New(o,{$:0});eb=f.Tags().NewTag("textarea",ea);ec=function(){return!d9?d$.Trigger($.New(m,{$:0,$0:eb.get_Value()})):null;};g.OnTextChange(ec,eb);return eb;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(ee,ef){var eg,eh;eg=s.BaseFormlet();eh=eg.Apply(ee,ef);return s.OfIFormlet(eh);},BaseFormlet:function(){return D.New(s.UtilsProvider());},DefaultLayout:$.Field(function(){return s.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.buildInternal.call(null,null);},MapResult:function(ei){var ej,em=this;ej=E.New(function(){var el,en,eo,ep;el=em.buildInternal.call(null,null);en=em.utils.Reactive;eo=el.State;ep=function(eq){return ei(eq);};return $.New(B,{Body:el.Body,Dispose1:el.Dispose1,Notify:el.Notify,State:en.Select(eo,ep)});},em.layoutInternal,em.formletBase,em.utils);return ej;},Render:function(){return this.Run(function(){}).Render();},Run:function(es){var et,eu,ev,ew,ex,eA,eB,eC,eD,eE,eF,eG;et=this.get_ElementInternal();if(et.$==0){ev=this.formletBase.ApplyLayout(this);ew=ev.Build();ex=G.subscribeTo(ew.State,function(ey){var ez;ez=m.Map(es,ey);return;});eA=ev.get_Layout().Apply.call(null,ew.Body);if(eA.$==0){eD=s.DefaultLayout().Apply.call(null,ew.Body).$0;eE=eD[0];eC=eE.Element;}else{eF=eA.$0[0];eC=eF.Element;}eB=eC;this.set_ElementInternal({$:1,$0:eB});eu=eB;}else{eG=et.$0;eu=eG;}return eu;},get_Body:function(){return this.Run(function(){}).get_Body();},get_ElementInternal:function(){return this["ElementInternal@"];},get_Layout:function(){return this.layoutInternal;},set_ElementInternal:function(eI){this["ElementInternal@"]=eI;return;}},{New:function(eJ,eK,eL,eM){var eN;eN=$.New(this,F.New());eN.buildInternal=eJ;eN.layoutInternal=eK;eN.formletBase=eL;eN.utils=eM;eN["ElementInternal@"]={$:0};return eN;}}),Layout:$.Field(function(){return H.New(I.New({Reactive:J.Default()}));}),MkFormlet:function(eO){var eP,eQ,e2;eP=s.BaseFormlet();eQ=function(){var eS,eT,eU,eV,eW,eX,eY,eZ;eS=eO(null);eT=eS[2];eU=eS[1];eV=eS[0];eW=s.NewBody(eV,{$:0});eX=z.Set(eW);eY=s.RX().Return(eX);eZ=function(){return eU(null);};return $.New(B,{Body:eY,Dispose1:function(){return null;},Notify:eZ,State:eT});};e2=eP.New(eQ);return s.OfIFormlet(e2);},NewBody:function(e3,e4){return b.New(e3,e4);},OfIFormlet:function(e5){var e6;e6=E.New(function(){return e5.Build();},e5.get_Layout(),s.BaseFormlet(),s.UtilsProvider());return s.PropagateRenderFrom(e5,e6);},PropagateRenderFrom:function(e8,e9){e8.hasOwnProperty("Render")?void(e9.Render=e8.Render):null;return e9;},RX:$.Field(function(){return J.Default();}),UtilsProvider:function(){return{Reactive:s.RX(),DefaultLayout:s.DefaultLayout()};},Validator:$.Field(function(){return K.New(L.New());}),ValidatorProvidor:$.Class({Matches:function(e_,e$){return e$.match(new M(e_));}},{New:function(){return $.New(this,{});}})},ElementStore:$.Class({Init:function(){this.store=O.New12();return;},RegisterElement:function(fa,fb){var fc;fc=this.store.ContainsKey(fa);return!fc?this.store.set_Item(fa,fb):null;},Remove:function(fd){var fe,ff;if(this.store.ContainsKey(fd)){(this.store.get_Item(fd))(null);ff=this.store.Remove(fd);fe=void ff;}else{fe=null;}return fe;}},{New:function(){return $.New(this,{});},NewElementStore:function(){var fg;fg=P.New();fg.Init();return fg;}}),Enhance:{Cancel:function(fh,fi){return t.Replace(fh,function(fj){return fi(fj)?t.Empty():t.Return(fj);});},CustomMany:function(fk,fl){var fm,fr,fs,fu,fz,fA,fB,fC,fD,fE,fM,fN,fO,fP,fR,fS;fm=g.ElementButton(function(){var fo,fp,fq;fp=fk.AddIconClass;fo=c.ofArray([n.Attr().NewAttr("class",fp)]);fq=$.New(o,{$:0});return p.add(f.Tags().NewTag("div",fo),c.ofArray([f.Tags().NewTag("div",fq)]));});fr=t.InitWith(1,fm);fs=function(){};fu=g.ElementButton(function(){var fw,fx,fy;fx=fk.RemoveIconClass;fw=c.ofArray([n.Attr().NewAttr("class",fx)]);fy=$.New(o,{$:0});return p.add(f.Tags().NewTag("div",fw),c.ofArray([f.Tags().NewTag("div",fy)]));});fz=t.Map(fs,fu);fA=t.WithCancelation(fl,fz);fB=s.Layout().get_Horizontal();fC=t.WithLayout(fB,fA);fD=Q.Deletable(fC);fE=function(){var fG,fI,fK,fL;fG=function(fH){return c.ofSeq(fH);};fI=Q.Many_(fr,function(){return fD;});fK=t.Map(fG,fI);fL=t.WithLayoutOrDefault(fK);return t.ApplyLayout(fL);};fM=j.New($.New(m,{$:0,$0:null}));fN=s.BaseFormlet().FromState(fM);fO=s.OfIFormlet(fN);fP=function(){return fM.Trigger($.New(m,{$:0,$0:null}));};fR=t.Do();fS=fR.Delay(function(){return fR.Bind(fO,function(){return fR.ReturnFrom(fE(null));});});return t.WithNotification(fP,fS);},Deletable:function(fV){return Q.Replace(fV,function(fW){var fX,fY;if(fW.$==1){fY=fW.$0;fX=t.Return({$:1,$0:fY});}else{fX=t.ReturnEmpty({$:0});}return fX;});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(R,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var fZ,f0;fZ={$:0};f0={$:0};return $.New(S,{Header:fZ,Padding:T.get_Default(),Description:f0,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(f1,f2){var f3;f3=function(){var f5,f6,f7,f9,f_,f$,gc,gd,ge,gf,gg,gh,gi,gj,gk;f5=j.New($.New(m,{$:1,$0:$.New(o,{$:0})}));f6=[0];f7=y.Maybe("Submit",function(f8){return f8;},f1.Label);f_=c.ofArray([n.Attr().NewAttr("type","button")]);f9=p.add(f.Tags().NewTag("input",f_),c.ofArray([n.Attr().NewAttr("class","submitButton"),n.Attr().NewAttr("value",f7)]));f$=function(){return function(){u.incr(f6);return f5.Trigger($.New(m,{$:0,$0:f6[0]}));};};r.Events().OnClick(f$,f9);gc=f9;!f2?gc["HtmlProvider@33"].AddClass(gc.get_Body(),"disabledButton"):null;ge=f1.Style;if(ge.$==1){gg=ge.$0;gf=gc["HtmlProvider@33"].SetStyle(gc.get_Body(),gg);}else{gf=null;}gh=f1.Class;if(gh.$==1){gj=gh.$0;gi=gc["HtmlProvider@33"].AddClass(gc.get_Body(),gj);}else{gi=null;}gd=gc;gk=function(){f6[0]=0;return f5.Trigger($.New(m,{$:1,$0:$.New(o,{$:0})}));};f5.Trigger($.New(m,{$:1,$0:$.New(o,{$:0})}));return[gd,gk,f5];};return s.MkFormlet(f3);},Many:function(gm){return Q.CustomMany(U.get_Default(),gm);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(U,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(gn,go){var gp,gr,gt,gv,gw,gx;gp=function(gq){return go(gq);};gr=function(gs){return gs;};gt=function(gu){return x.choose(gr,gu);};gv=t.Map(gp,gn);gw=t.SelectMany(gv);gx=t.FlipBody(gw);return t.Map(gt,gx);},Padding:$.Class({},{get_Default:function(){return $.New(T,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(gy,gz){var gA,gG;gA=function(gB){var gC,gD,gE,gF;if(gB.$==1){gD=gB.$0;gE=t.FailWith(gD);gC=$.New(m,{$:0,$0:gE});}else{gF=gB.$0;gC=$.New(m,{$:0,$0:gz(gF)});}return gC;};gG=t.MapResult(gA,gy);return t.Switch(gG);},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(V,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(W,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(gH,gI){var gJ;gJ=function(gK){gK["HtmlProvider@33"].AddClass(gK.get_Body(),gH);return gK;};return t.MapElement(gJ,gI);},WithCustomFormContainer:function(gL,gM){var gN,gO;gN=t.ApplyLayout(gM);gO=function(gP){var gQ,gR,gS,gY,gZ,g0,g1,g2,g$,ha,hb,hc,hf,hg,hm,hn,hp,hq,hs,ht,hv,hw,hy,hz,hB,hC,hD,hE,hF,hG,hH,hI,hJ,hK;gQ=gL.Description;gR=$.New(o,{$:0});gS=function(gT){var gU,gV,gW,gX;if(gT.$==1){gV=gT.$0;gU=c.ofArray([gV(null)]);}else{gW=gT.$0;gX=c.ofArray([f.Tags().text(gW)]);gU=c.ofArray([f.Tags().NewTag("p",gX)]);}return gU;};gY=y.Maybe(gR,gS,gQ);gZ=gL.Header;g1=c.ofArray([n.Attr().NewAttr("class","headerPanel")]);g0=y.InTable(c.ofArray([c.ofArray([p.add(f.Tags().NewTag("div",g1),gY)]),c.ofArray([gP])]));g2=function(g3){var g4,g5,g6,g7,g8,g9,g_;if(g3.$==1){g6=g3.$0;g5=g6(null);}else{g7=g3.$0;g8=c.ofArray([f.Tags().text(g7)]);g5=f.Tags().NewTag("h1",g8);}g4=g5;g_=c.ofArray([n.Attr().NewAttr("class","headerPanel")]);g9=p.add(f.Tags().NewTag("div",g_),$.New(o,{$:1,$0:g4,$1:gY}));return y.InTable(c.ofArray([c.ofArray([g9]),c.ofArray([gP])]));};g$=y.Maybe(g0,g2,gZ);hb=c.ofArray([n.Attr().NewAttr("class","formlet")]);ha=p.add(f.Tags().NewTag("td",hb),c.ofArray([g$]));hc=function(hd){var he;he="border-color: "+hd;return ha["HtmlProvider@33"].SetStyle(ha.get_Body(),he);};hf=gL.BorderColor;y.Maybe(null,hc,hf);hg=function(hh){var hi,hj,hk,hl;hi=hh[0];hj=hh[1];if(hj.$==0){hk=null;}else{hl=hj.$0;hk=ha["HtmlProvider@33"].SetCss(ha.get_Body(),hi,hl);}return hk;};hn=function(ho){return ho;};hp=gL.BackgroundColor;hq=function(hr){return $$.String(hr)+"px";};hs=gL.Padding.Left;ht=function(hu){return $$.String(hu)+"px";};hv=gL.Padding.Right;hw=function(hx){return $$.String(hx)+"px";};hy=gL.Padding.Top;hz=function(hA){return $$.String(hA)+"px";};hB=gL.Padding.Bottom;hm=c.ofArray([["background-color",y.MapOption(hn,hp)],["padding-left",y.MapOption(hq,hs)],["padding-right",y.MapOption(ht,hv)],["padding-top",y.MapOption(hw,hy)],["padding-bottom",y.MapOption(hz,hB)]]);x.iter(hg,hm);hC=gL.Style;if(hC.$==0){hD=null;}else{hE=hC.$0;hD=ha["HtmlProvider@33"].SetStyle(ha.get_Body(),hE);}hF=gL.CssClass;if(hF.$==0){hG=null;}else{hH=hF.$0;hG=ha["HtmlProvider@33"].AddClass(ha.get_Body(),hH);}hK=c.ofArray([ha]);hJ=c.ofArray([f.Tags().NewTag("tr",hK)]);hI=c.ofArray([f.Tags().NewTag("tbody",hJ)]);return f.Tags().NewTag("table",hI);};return t.MapElement(gO,gN);},WithCustomResetButton:function(hL,hM){var hN,hO,hP,hQ;hN=hL.Label;if(hN.$==0){hP=$.New(R,{Label:{$:1,$0:"Reset"},Style:hL.Style,Class:hL.Class});}else{hN.$0;hP=hL;}hO=hP;hQ=Q.InputButton(hO,true);return Q.WithResetFormlet(hM,hQ);},WithCustomSubmitAndResetButtons:function(hR,hS,hT){var hU;hU=function(hV){return function(hW){var hX,hY,hZ,h0,h2,h3,h4,h6,h7,h8,h$,ic;if(hW.$==1){hZ=hW.$0;h0=function(){return $.New(m,{$:1,$0:hZ});};h2=Q.InputButton(hR,false);hY=t.MapResult(h0,h2);}else{h3=hW.$0;h4=function(){return h3;};h6=Q.InputButton(hR,true);hY=t.Map(h4,h6);}hX=hY;h7=t.Do();h8=h7.Delay(function(){return h7.Bind(t.LiftResult(Q.InputButton(hS,true)),function(h_){h_.$==0?hV(null):null;return h7.Return(null);});});h$=s.$(s.$(t.Return(function(ia){return function(){return ia;};}),hX),h8);ic=s.Layout().get_Horizontal();return t.WithLayout(ic,h$);};};return Q.WithSubmitAndReset(hT,hU);},WithCustomSubmitButton:function(id,ie){var _if,ig,ih;_if=id.Label;if(_if.$==0){ih=$.New(R,{Label:{$:1,$0:"Submit"},Style:id.Style,Class:id.Class});}else{_if.$0;ih=id;}ig=ih;return Q.WithSubmitFormlet(ie,function(ii){var ij,il,im;ij=function(){};il=ii.$==0?true:false;im=Q.InputButton(ig,il);return t.Map(ij,im);});},WithCustomValidationFrame:function(_in,io){var ip;ip=function(iq){return function(ir){var is,it,iu;is=c.ofArray([ir.Element]);it=f.Tags().NewTag("div",is);iu=function(iv){var iw;iw=G.subscribeTo(iq,function(ix){var iy,iz,iA,iB,iC,iD,iE,iF,iG,iH,iI,iJ,iK,iL,iM,iN,iO,iP,iQ,iR;if(ix.$==1){iz=ix.$0;iA=_in.ValidClass;if(iA.$==1){iC=iA.$0;iB=iv["HtmlProvider@33"].RemoveClass(iv.get_Body(),iC);}else{iB=null;}iD=_in.ErrorClass;if(iD.$==1){iF=iD.$0;iE=iv["HtmlProvider@33"].AddClass(iv.get_Body(),iF);}else{iE=null;}iG=_in.ErrorStyle;if(iG.$==1){iI=iG.$0;iH=iv["HtmlProvider@33"].SetStyle(iv.get_Body(),iI);}else{iH=iv["HtmlProvider@33"].SetStyle(iv.get_Body(),"");}iy=iH;}else{iJ=_in.ErrorClass;if(iJ.$==1){iL=iJ.$0;iK=iv["HtmlProvider@33"].RemoveClass(iv.get_Body(),iL);}else{iK=null;}iM=_in.ValidClass;if(iM.$==1){iO=iM.$0;iN=iv["HtmlProvider@33"].AddClass(iv.get_Body(),iO);}else{iN=null;}iP=_in.ValidStyle;if(iP.$==1){iR=iP.$0;iQ=iv["HtmlProvider@33"].SetStyle(iv.get_Body(),iR);}else{iQ=iv["HtmlProvider@33"].SetStyle(iv.get_Body(),"");}iy=iQ;}return iy;});return;};p.OnAfterRender(iu,it);return it;};};return Q.WrapFormlet(ip,io);},WithCustomValidationIcon:function(iS,iT){var iU,iV,i_,i$,jb,jf,jg;iU=t.WithLayoutOrDefault(iT);iV=function(iW){var iX;iX=function(){var iZ,i0,i1,i4,i5,i6,i7,i8,i9;if(iW.$==1){i0=iW.$0;i1=x.fold(function(i2){return function(i3){return i2+" "+i3;};},"",i0);i5=iS.ErrorIconClass;i4=c.ofArray([n.Attr().NewAttr("class",i5),n.Attr().NewAttr("title",i1)]);i6=$.New(o,{$:0});iZ=p.add(f.Tags().NewTag("div",i4),c.ofArray([f.Tags().NewTag("div",i6)]));}else{i8=iS.ValidIconClass;i7=c.ofArray([n.Attr().NewAttr("class",i8),n.Attr().NewAttr("title","")]);i9=$.New(o,{$:0});iZ=p.add(f.Tags().NewTag("div",i7),c.ofArray([f.Tags().NewTag("div",i9)]));}return iZ;};return t.OfElement(iX);};i_=t.Do();i$=function(ja){return m.Join(ja);};jb=i_.Delay(function(){return i_.Bind(t.LiftResult(iU),function(jd){return i_.Bind(iV(jd),function(){return i_.Return(jd);});});});jf=t.MapResult(i$,jb);jg=s.Layout().get_Horizontal();return t.WithLayout(jg,jf);},WithErrorFormlet:function(jh,ji){var jj,jk,jm;jj=t.Do();jk=function(jl){return m.Join(jl);};jm=jj.Delay(function(){return jj.Bind(t.LiftResult(ji),function(jo){var jp,jq,jr;if(jo.$==1){jq=jo.$0;jr=t.Do();jp=jr.Delay(function(){return jr.Bind(jh(jq),function(){return jr.Return(jo);});});}else{jo.$0;jp=t.Return(jo);}return jj.ReturnFrom(jp);});});return t.MapResult(jk,jm);},WithErrorSummary:function(ju,jv){var jw,jF,jG,jI;jw=function(jx){return t.OfElement(function(){var jz,jA,jB,jE;jA=c.ofArray([f.Tags().text(ju)]);jB=function(jC){var jD;jD=c.ofArray([f.Tags().text(jC)]);return f.Tags().NewTag("li",jD);};jE=c.map(jB,jx);jz=c.ofArray([f.Tags().NewTag("legend",jA),f.Tags().NewTag("ul",jE)]);return f.Tags().NewTag("fieldset",jz);});};jF=t.Do();jG=function(jH){return m.Join(jH);};jI=jF.Delay(function(){return jF.Bind(t.LiftResult(jv),function(jK){var jL,jM,jN,jP;if(jK.$==1){jM=jK.$0;jN=function(){return jK;};jP=jw(jM);jL=t.Map(jN,jP);}else{jK.$0;jL=t.Return(jK);}return jF.ReturnFrom(jL);});});return t.MapResult(jG,jI);},WithFormContainer:function(jQ){return Q.WithCustomFormContainer(S.get_Default(),jQ);},WithJsonPost:function(jR,jS){var jT,jU,jV,jW,jX,jY,jZ,j0,j1,j2,j3,j4,j5,j6,j7,j8;jT=jR.PostUrl;if(jT.$==0){jU=$.New(o,{$:0});}else{jV=jT.$0;jU=c.ofArray([n.Attr().NewAttr("action",jV)]);}jW=jR.EncodingType;if(jW.$==0){jX=$.New(o,{$:0});}else{jY=jW.$0;jX=c.ofArray([n.Attr().NewAttr("enctype",jY)]);}jZ=f.Tags();j1=jR.ParameterName;j0=c.ofArray([n.Attr().NewAttr("type","hidden"),n.Attr().NewAttr("name",j1)]);j2=jZ.NewTag("input",j0);j3=f.Tags();j4=c.ofArray([n.Attr().NewAttr("type","submit"),n.Attr().NewAttr("value","Submit")]);j5=j3.NewTag("input",j4);j6=c.append($.New(o,{$:1,$0:n.Attr().NewAttr("method","POST"),$1:$.New(o,{$:1,$0:n.Attr().NewAttr("style","display:none"),$1:jU})}),jX);j7=p.add(f.Tags().NewTag("form",j6),c.ofArray([j2,j5]));p.OnAfterRender(function(j9){var j_;j_=jR.EncodingType;return j_.$==0?null:j_.$0==="multipart/form-data"?void q(j9.get_Body()).attr("encoding","multipart/form-data"):null;},j7);j8=c.ofArray([j7,t.Map(function(j$){var ka;ka=X.stringify(j$);q(j2.get_Body()).val(ka);return q(j5.get_Body()).click();},jS)]);return f.Tags().NewTag("div",j8);},WithLabel:function(kb,kc){return t.WithLabel({$:1,$0:kb},kc);},WithLabelAbove:function(kd){var ke;ke=function(kf){var kg,kh,ki,kj,kk,kl,km,kn,ko,kp,kq,kr,ks;kg=kf.Label;if(kg.$==0){kj=$.New(o,{$:0});ki=f.Tags().NewTag("span",kj);}else{kk=kg.$0;ki=kk(null);}kh=ki;ko=c.ofArray([kh]);kn=c.ofArray([f.Tags().NewTag("td",ko)]);kq=c.ofArray([kf.Element]);kp=c.ofArray([f.Tags().NewTag("td",kq)]);km=c.ofArray([f.Tags().NewTag("tr",kn),f.Tags().NewTag("tr",kp)]);kl=c.ofArray([f.Tags().NewTag("tbody",km)]);kr=f.Tags().NewTag("table",kl);ks={$:0};return $.New(b,{Element:kr,Label:ks});};return t.MapBody(ke,kd);},WithLabelAndInfo:function(kt,ku,kv){var kw;kw=function(){var ky,kz;ky=c.ofArray([f.Tags().text(kt)]);kz=c.ofArray([n.Attr().NewAttr("title",ku),n.Attr().NewAttr("class","infoIcon")]);return y.InTable(c.ofArray([c.ofArray([f.Tags().NewTag("label",ky),f.Tags().NewTag("span",kz)])]));};return Q.WithLabel(kw,kv);},WithLabelConfiguration:function(kA,kB){var kC,kD;kC=t.ApplyLayout(kB);kD=s.Layout().LabelLayout(kA);return t.WithLayout(kD,kC);},WithLabelLeft:function(kE){var kF;kF=function(kG){var kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS;kH=kG.Label;if(kH.$==0){kK=$.New(o,{$:0});kJ=f.Tags().NewTag("span",kK);}else{kL=kH.$0;kJ=kL(null);}kI=kJ;kP=c.ofArray([kG.Element]);kQ=c.ofArray([kI]);kO=c.ofArray([f.Tags().NewTag("td",kP),f.Tags().NewTag("td",kQ)]);kN=c.ofArray([f.Tags().NewTag("tr",kO)]);kM=c.ofArray([f.Tags().NewTag("tbody",kN)]);kR=f.Tags().NewTag("table",kM);kS={$:0};return $.New(b,{Element:kR,Label:kS});};return t.MapBody(kF,kE);},WithLegend:function(kT,kU){var kV;kV=function(kW){var kX,kY,kZ,k0,k1,k2;kY=c.ofArray([f.Tags().text(kT)]);kZ=kW.Label;if(kZ.$==0){k0=kW.Element;}else{k1=kZ.$0;k0=y.InTable(c.ofArray([c.ofArray([k1(null),kW.Element])]));}kX=c.ofArray([f.Tags().NewTag("legend",kY),k0]);k2=f.Tags().NewTag("fieldset",kX);return $.New(b,{Element:k2,Label:{$:0}});};return t.MapBody(kV,kU);},WithResetAction:function(k3,k4){var k5,k_,k$,la,lb;k5=function(){var k7,k8;k7=k4.Build();k8=function(k9){return k3(null)?k7.Notify.call(null,k9):null;};return $.New(B,{Body:k7.Body,Dispose1:k7.Dispose1,Notify:k8,State:k7.State});};k_=t.New(k5);k$=k4.get_Layout();la=t.WithLayout(k$,k_);lb=s.PropagateRenderFrom(k4,la);return s.OfIFormlet(lb);},WithResetButton:function(lc){return Q.WithCustomResetButton(R.get_Default(),lc);},WithResetFormlet:function(ld,le){var lf,lg,lh,li,lj,lk,ll,lm,lo,lu,lv;lf=t.WithLayoutOrDefault(ld);lg=t.ApplyLayout(lf);lh=t.InitWithFailure(lg);li=t.LiftResult(lh);lj=t.WithNotificationChannel(li);lk=t.LiftResult(le);ll=t.Do();lm=function(ln){return m.Join(ln);};lo=ll.Delay(function(){return ll.Bind(lj,function(lq){var lr,ls;lr=lq[0];ls=lq[1];return ll.Bind(lk,function(lt){lt.$==0?ls(null):null;return ll.Return(lr);});});});lu=t.MapResult(lm,lo);lv=s.PropagateRenderFrom(lj,lu);return s.OfIFormlet(lv);},WithRowConfiguration:function(lw,lx){var ly,lz;ly=t.ApplyLayout(lx);lz=s.Layout().RowLayout(lw);return t.WithLayout(lz,ly);},WithSubmitAndReset:function(lA,lB){var lC,lD,lL;lC=t.Do();lD=lC.Delay(function(){var lF,lG;lF=t.InitWithFailure(lA);lG=t.LiftResult(lF);return lC.Bind(t.WithNotificationChannel(lG),function(lH){var lI,lJ;lI=lH[0];lJ=lH[1];return lC.ReturnFrom((lB(function(lK){return lJ(lK);}))(lI));});});lL=s.PropagateRenderFrom(lA,lD);return s.OfIFormlet(lL);},WithSubmitAndResetButtons:function(lM){var lN,lO,lP,lQ;lN=R.get_Default();lO=$.New(R,{Label:{$:1,$0:"Submit"},Style:lN.Style,Class:lN.Class});lP=R.get_Default();lQ=$.New(R,{Label:{$:1,$0:"Reset"},Style:lP.Style,Class:lP.Class});return Q.WithCustomSubmitAndResetButtons(lO,lQ,lM);},WithSubmitButton:function(lR){return Q.WithCustomSubmitButton(R.get_Default(),lR);},WithSubmitFormlet:function(lS,lT){var lU,lV,lX,l2,l3;lU=t.Do();lV=function(lW){return m.Join(lW);};lX=lU.Delay(function(){var lZ;lZ=t.InitWithFailure(lS);return lU.Bind(t.LiftResult(lZ),function(l0){return lU.Bind(lT(l0),function(){return lU.Return(l0);});});});l2=t.MapResult(lV,lX);l3=s.PropagateRenderFrom(lS,l2);return s.OfIFormlet(l3);},WithTextLabel:function(l4,l5){return Q.WithLabel(function(){var l7;l7=c.ofArray([f.Tags().text(l4)]);return f.Tags().NewTag("label",l7);},l5);},WithValidationFrame:function(l8){return Q.WithCustomValidationFrame(V.get_Default(),l8);},WithValidationIcon:function(l9){return Q.WithCustomValidationIcon(W.get_Default(),l9);},WrapFormlet:function(l_,l$){var ma;ma=function(){var mc,md,me,mf,mg;mc=t.WithLayoutOrDefault(l$);md=t.BuildForm(mc);me=mc.get_Layout().Apply.call(null,md.Body).$0;me[1];mf=me[0];mg=(l_(md.State))(mf);return[mg,function(){return md.Notify.call(null,null);},md.State];};return s.MkFormlet(ma);}},Formlet:{ApplyLayout:function(mi){var mj,mk;mj=s.BaseFormlet().ApplyLayout(mi);mk=s.PropagateRenderFrom(mi,mj);return s.OfIFormlet(mk);},Bind:function(ml,mm){var mn,mo,mr,ms;mn=s.BaseFormlet();mo=function(mp){var mq;mq=mm(mp);return mq;};mr=mn.Bind(ml,mo);ms=s.PropagateRenderFrom(ml,mr);return s.OfIFormlet(ms);},BindWith:function(mt,mu,mv){var mw,mx,mz,mA;mw=s.BaseFormlet();mx=function(my){return mv(my);};mz=mw.BindWith(mt,mu,mx);mA=s.PropagateRenderFrom(mu,mz);return s.OfIFormlet(mA);},BuildForm:function(mB){return s.BaseFormlet().BuildForm(mB);},BuildFormlet:function(mC){return s.MkFormlet(mC);},Choose:function(mD){var mE,mF,mL,mM,mN,m2,m3,m5,m6;mE=[0];mF=function(mG){var mH,mJ,mK;mH=function(mI){u.incr(mE);return[mI,mE[0]];};mJ=t.Map(mH,mG);mK=t.InitWithFailure(mJ);return t.LiftResult(mK);};mL=x.map(mF,mD);mM=t.Sequence(mL);mN=function(mO){var mP,mT,mW,mX,mY,m1;mP=function(mQ){var mR,mS;if(mQ.$==0){mS=mQ.$0;mR={$:1,$0:mS};}else{mR={$:0};}return mR;};mT=function(mU){var mV;mU[0];mV=mU[1];return mV;};mW=c.choose(mP,mO);mX=c.sortBy(mT,mW);mY=function(mZ){var m0;m0=mZ[0];mZ[1];return{$:1,$0:m0};};m1=c.rev(mX);return x.tryPick(mY,m1);};m2=t.Map(mN,mM);m3=function(m4){return m4.$==1;};m5=s.Validator().Is(m3,"",m2);m6=function(m7){return m7.$0;};return t.Map(m6,m5);},Delay:function(m8){var m9;m9=s.BaseFormlet().Delay(function(){return m8(null);});return s.OfIFormlet(m9);},Deletable:function(m$){var na,nb;na=s.BaseFormlet().Deletable(m$);nb=s.PropagateRenderFrom(m$,na);return s.OfIFormlet(nb);},Do:$.Field(function(){return Y.New();}),Empty:function(){var nc;nc=s.BaseFormlet().Empty();return s.OfIFormlet(nc);},FailWith:function(nd){var ne;ne=s.BaseFormlet().FailWith(nd);return s.OfIFormlet(ne);},FlipBody:function(nf){var ng,nh;ng=s.BaseFormlet().FlipBody(nf);nh=s.PropagateRenderFrom(nf,ng);return s.OfIFormlet(nh);},Flowlet:function(ni){var nj,nk,nl,nm;nj=s.BaseFormlet();nk=s.Layout().get_Flowlet();nl=nj.WithLayout(nk,ni);nm=s.PropagateRenderFrom(ni,nl);return s.OfIFormlet(nm);},Horizontal:function(nn){var no,np,nq,nr;no=s.BaseFormlet();np=s.Layout().get_Horizontal();nq=no.WithLayout(np,nn);nr=s.PropagateRenderFrom(nn,nq);return s.OfIFormlet(nr);},InitWith:function(ns,nt){var nu,nv,nw;nu=s.BaseFormlet();nv=nu.InitWith(ns,nt);nw=s.PropagateRenderFrom(nt,nv);return s.OfIFormlet(nw);},InitWithFailure:function(nx){var ny,nz;ny=s.BaseFormlet().InitWithFailure(nx);nz=s.PropagateRenderFrom(nx,ny);return s.OfIFormlet(nz);},Join:function(nA){var nB,nD,nE,nF,nG;nB=function(nC){return nC;};nD=t.Map(nB,nA);nE=s.BaseFormlet();nF=nE.Join(nD);nG=s.PropagateRenderFrom(nA,nF);return s.OfIFormlet(nG);},LiftResult:function(nH){var nI,nJ;nI=s.BaseFormlet().LiftResult(nH);nJ=s.PropagateRenderFrom(nH,nI);return s.OfIFormlet(nJ);},Map:function(nK,nL){var nM,nN,nO;nM=s.BaseFormlet();nN=nM.Map(nK,nL);nO=s.PropagateRenderFrom(nL,nN);return s.OfIFormlet(nO);},MapBody:function(nP,nQ){var nR,nS,nT;nR=s.BaseFormlet();nS=nR.MapBody(nP,nQ);nT=s.PropagateRenderFrom(nQ,nS);return s.OfIFormlet(nT);},MapElement:function(nU,nV){var nW,nX,nZ,n0;nW=s.BaseFormlet();nX=function(nY){return $.New(b,{Element:nU(nY.Element),Label:nY.Label});};nZ=nW.MapBody(nX,nV);n0=s.PropagateRenderFrom(nV,nZ);return s.OfIFormlet(n0);},MapResult:function(n1,n2){var n3,n4,n5;n3=s.BaseFormlet();n4=n3.MapResult(n1,n2);n5=s.PropagateRenderFrom(n2,n4);return s.OfIFormlet(n5);},Never:function(){var n6;n6=s.BaseFormlet().Never();return s.OfIFormlet(n6);},New:function(n7){var n8;n8=s.BaseFormlet().New(n7);return s.OfIFormlet(n8);},OfElement:function(n9){var n_;n_=function(){var oa;oa=n9(null);return[oa,function(){},s.RX().Return($.New(m,{$:0,$0:null}))];};return s.MkFormlet(n_);},Render:function(oc){var od;od=oc.Run(function(){});return s.PropagateRenderFrom(oc,od);},Replace:function(of,og){var oh,oi,ok,ol;oh=s.BaseFormlet();oi=function(oj){return og(oj);};ok=oh.Replace(of,oi);ol=s.PropagateRenderFrom(of,ok);return s.OfIFormlet(ol);},ReplaceFirstWithFailure:function(om){var on,oo;on=s.BaseFormlet().ReplaceFirstWithFailure(om);oo=s.PropagateRenderFrom(om,on);return s.OfIFormlet(oo);},Return:function(op){var oq;oq=s.BaseFormlet().Return(op);return s.OfIFormlet(oq);},ReturnEmpty:function(or){var os;os=s.BaseFormlet().ReturnEmpty(or);return s.OfIFormlet(os);},Run:function(ot,ou){return ou.Run(ot);},SelectMany:function(ov){var ow,oy,oz,oA,oB;ow=function(ox){return ox;};oy=t.Map(ow,ov);oz=s.BaseFormlet();oA=oz.SelectMany(oy);oB=s.PropagateRenderFrom(ov,oA);return s.OfIFormlet(oB);},Sequence:function(oC){var oD,oF,oG,oH;oD=function(oE){return oE;};oF=x.map(oD,oC);oG=s.BaseFormlet();oH=oG.Sequence(oF);return s.OfIFormlet(oH);},Switch:function(oI){var oJ,oL,oM,oN,oO;oJ=function(oK){return oK;};oL=t.Map(oJ,oI);oM=s.BaseFormlet();oN=oM.Switch(oL);oO=s.PropagateRenderFrom(oI,oN);return s.OfIFormlet(oO);},Vertical:function(oP){var oQ,oR,oS,oT;oQ=s.BaseFormlet();oR=s.Layout().get_Vertical();oS=oQ.WithLayout(oR,oP);oT=s.PropagateRenderFrom(oP,oS);return s.OfIFormlet(oT);},WithCancelation:function(oU,oV){var oW,oX,oY;oW=s.BaseFormlet();oX=oW.WithCancelation(oU,oV);oY=s.PropagateRenderFrom(oU,oX);return s.OfIFormlet(oY);},WithLabel:function(oZ,o0){var o1,o2,o4,o5;o1=s.BaseFormlet();o2=function(o3){return $.New(b,{Element:o3.Element,Label:oZ});};o4=o1.MapBody(o2,o0);o5=s.PropagateRenderFrom(o0,o4);return s.OfIFormlet(o5);},WithLayout:function(o6,o7){var o8,o9,o_;o8=s.BaseFormlet();o9=o8.WithLayout(o6,o7);o_=s.PropagateRenderFrom(o7,o9);return s.OfIFormlet(o_);},WithLayoutOrDefault:function(o$){var pa,pb;pa=s.BaseFormlet().WithLayoutOrDefault(o$);pb=s.PropagateRenderFrom(o$,pa);return s.OfIFormlet(pb);},WithNotification:function(pc,pd){var pe,pf,pg;pe=s.BaseFormlet();pf=pe.WithNotification(pc,pd);pg=s.PropagateRenderFrom(pd,pf);return s.OfIFormlet(pg);},WithNotificationChannel:function(ph){var pi,pj;pi=s.BaseFormlet().WithNotificationChannel(ph);pj=s.PropagateRenderFrom(ph,pi);return s.OfIFormlet(pj);}},FormletBuilder:$.Class({Bind:function(pk,pl){var pm,pn,pq,pr;pm=s.BaseFormlet();pn=function(po){var pp;pp=pl(po);return pp;};pq=pm.Bind(pk,pn);pr=s.PropagateRenderFrom(pk,pq);return s.OfIFormlet(pr);},Delay:function(ps){var pt;pt=s.BaseFormlet().Delay(function(pu){return ps(pu);});return s.OfIFormlet(pt);},Return:function(pv){var pw;pw=s.BaseFormlet().Return(pv);return s.OfIFormlet(pw);},ReturnFrom:function(px){return s.OfIFormlet(px);}},{New:function(){return $.New(this,{});}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(_0,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(_1,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(_2,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(py){var pz,pA,pP=this;pz=this.LayoutUtils;pA=function(){var pC,pD,pE,pF,pG,pH,pI,pX,p2;pC=$.New(o,{$:0});pD=f.Tags().NewTag("tr",pC);pF=c.ofArray([pD]);pE=c.ofArray([f.Tags().NewTag("tbody",pF)]);pG=f.Tags().NewTag("table",pE);pH=P.NewElementStore();pI=function(pJ){return function(pK){var pL,pM,pN,pO,pQ,pR,pS,pT;pL=pK.Element.get_Id();pO=c.ofArray([pP.MakeRow(py,pJ,pK)]);pN=c.ofArray([f.Tags().NewTag("tbody",pO)]);pM=c.ofArray([f.Tags().NewTag("table",pN)]);pQ=f.Tags().NewTag("td",pM);pR=q(pD.get_Body());pS=[0];pT=[false];pR.children().each(function(){var pU,pV;pU=q(this);if(pJ===pS[0]){q(pQ.get_Body()).insertBefore(pU);pQ.Render();pV=void(pT[0]=true);}else{pV=null;}return u.incr(pS);});!pT[0]?pD.AppendI(pQ):null;return pH.RegisterElement(pL,function(){return pQ["HtmlProvider@33"].Remove(pQ.get_Body());});};};pX=function(pY){var pZ,p0,p1;pZ=_3.Get(pY);try{while(pZ.MoveNext()){p1=pZ.get_Current();pH.Remove(p1.Element.get_Id());}}finally{pZ.Dispose!=undefined?pZ.Dispose():null;}return p0;};p2=$.New(b,{Element:pG,Label:{$:0}});return{Body:p2,SyncRoot:null,Insert:pI,Remove:pX};};return pz.New(pA);},HorizontalAlignElem:function(p3,p4){var p5,p6,p7;p5=p3.$==0?"left":"right";p7="float:"+p5+";";p6=c.ofArray([n.Attr().NewAttr("style",p7)]);return p.add(f.Tags().NewTag("div",p6),c.ofArray([p4]));},LabelLayout:function(p8){var p9,p_;p9=_0.get_Default();p_={$:1,$0:p8};return this.RowLayout($.New(_0,{Padding:p9.Padding,Color:p9.Color,Class:p9.Class,Style:p9.Style,LabelConfiguration:p_}));},MakeLayout:function(p$){var qa,qb;qa=this.LayoutUtils;qb=function(){var qd,qe,qf,qo,qt;qd=p$(null);qe=P.NewElementStore();qf=function(qg){return function(qh){var qi,qj;qi=qh.Element.get_Id();qj=(qd.Insert.call(null,qg))(qh);return qe.RegisterElement(qi,function(){var ql,qm,qn;ql=_3.Get(qj);try{while(ql.MoveNext()){qn=ql.get_Current();qn["HtmlProvider@33"].Remove(qn.get_Body());}}finally{ql.Dispose!=undefined?ql.Dispose():null;}return qm;});};};qo=function(qp){var qq,qr,qs;qq=_3.Get(qp);try{while(qq.MoveNext()){qs=qq.get_Current();qe.Remove(qs.Element.get_Id());}}finally{qq.Dispose!=undefined?qq.Dispose():null;}return qr;};qt=$.New(b,{Element:qd.Panel,Label:{$:0}});return{Body:qt,SyncRoot:null,Insert:qf,Remove:qo};};return qa.New(qb);},MakeRow:function(qu,qv,qw){var qx,qy,qz,qB,qC,qE,qF,qG,qI,qJ,qK,qM,qN,qO,qQ,qR,qS,rh,ri,rj,rk,rl,rm,rn,ro,rq,rr,rs,rt,ru,rv,rw,rx,ry,rz,rA,rD,rE,rF,rG,rJ,rK,rL,rM,rO,rP,rQ,rR,rS,rV;qx=qu.Padding;qy=_2.get_Default();qz=function(qA){return qA;};qB=y.Maybe(qy,qz,qx);qC=function(qD){return qD;};qE=qB.Left;qF=y.Maybe(0,qC,qE);qG=function(qH){return qH;};qI=qB.Top;qJ=y.Maybe(0,qG,qI);qK=function(qL){return qL;};qM=qB.Right;qN=y.Maybe(0,qK,qM);qO=function(qP){return qP;};qQ=qB.Bottom;qR=y.Maybe(0,qO,qQ);qS=function(qT){return function(qU){return function(qV){return function(qW){return function(qX){return function(qY){return function(qZ){var q0,q4,q7,q8,q9,q_,rb,rc,rd,re,rf,rg;q0=function(q1){var q2,q3;q2=q1[0];q3=q1[1];return q2+$$.String(q3)+"px;";};q4=function(q5){return function(q6){return q5+q6;};};q7=c.ofArray([["padding-left: ",qT],["padding-top: ",qU],["padding-right: ",qV],["padding-bottom: ",qW]]);q8=c.map(q0,q7);q9=x.reduce(q4,q8);q_=function(q$){var ra;ra=q$.$==1?"middle":q$.$==2?"bottom":"top";return"vertical-align: "+ra+";";};rb=y.Maybe("",q_,qY);rc=n.Attr();rd=q9+";"+rb;re=rc.NewAttr("style",rd);rf=qX?c.ofArray([n.Attr().NewAttr("colspan","2")]):$.New(o,{$:0});rg=c.append($.New(o,{$:1,$0:re,$1:rf}),c.ofArray([qZ]));return f.Tags().NewTag("td",rg);};};};};};};};rh=qw.Element;ri=qw.Label;if(ri.$==1){rl=ri.$0;rm=qu.LabelConfiguration;rn=_1.get_Default();ro=function(rp){return rp;};rq=y.Maybe(rn,ro,rm);rr=rq.Align;rs=rl(null);rt=this.HorizontalAlignElem(rr,rs);ru=rq.Placement;if(ru.$==3){rw=y.InTable(c.ofArray([c.ofArray([rh]),c.ofArray([rt])]));rv=c.ofArray([((((((qS(qF))(qJ))(qN))(qR))(true))({$:0}))(rw)]);}else{if(ru.$==0){rv=c.ofArray([((((((qS(qF))(qJ))(0))(qR))(false))({$:1,$0:rq.VerticalAlign}))(rt),((((((qS(0))(qJ))(qN))(qR))(false))({$:0}))(rh)]);}else{if(ru.$==1){rv=c.ofArray([((((((qS(qF))(qJ))(0))(qR))(false))({$:1,$0:rq.VerticalAlign}))(rh),((((((qS(0))(qJ))(qN))(qR))(false))({$:0}))(rt)]);}else{rx=y.InTable(c.ofArray([c.ofArray([rt]),c.ofArray([rh])]));rv=c.ofArray([((((((qS(qF))(qJ))(qN))(qR))(true))({$:0}))(rx)]);}}}rk=rv;}else{rk=c.ofArray([((((((qS(qF))(qJ))(qN))(qR))(true))({$:0}))(rh)]);}rj=rk;ry=qu.Class;rz=$.New(o,{$:0});rA=function(rB){var rC;rC=rB(qv);return c.ofArray([n.Attr().NewAttr("class",rC)]);};rD=y.Maybe(rz,rA,ry);rE=qu.Color;rF=$.New(o,{$:0});rG=function(rH){var rI;rI=rH(qv);return c.ofArray(["background-color: "+rI]);};rJ=y.Maybe(rF,rG,rE);rK=qu.Style;rL=$.New(o,{$:0});rM=function(rN){return c.ofArray([rN(qv)]);};rO=y.Maybe(rL,rM,rK);rP=c.append(rJ,rO);if(rP.$==0){rR=$.New(o,{$:0});}else{rS=x.reduce(function(rT){return function(rU){return rT+";"+rU;};},rP);rR=c.ofArray([n.Attr().NewAttr("style",rS)]);}rQ=rR;rV=c.append(rD,c.append(rQ,c.append(rQ,rj)));return f.Tags().NewTag("tr",rV);},RowLayout:function(rW){var rX,rY,r_=this;rX=this.LayoutUtils;rY=function(){var r0,r1,r2,r3,r4,r5,sf,sk;r0=$.New(o,{$:0});r1=f.Tags().NewTag("tbody",r0);r2=c.ofArray([r1]);r3=f.Tags().NewTag("table",r2);r4=P.NewElementStore();r5=function(r6){return function(r7){var r8,r9,r$,sa,sb;r8=r7.Element.get_Id();r9=r_.MakeRow(rW,r6,r7);r$=q(r1.get_Body());sa=[0];sb=[false];r$.children().each(function(){var sc,sd;sc=q(this);if(r6===sa[0]){q(r9.get_Body()).insertBefore(sc);r9.Render();sd=void(sb[0]=true);}else{sd=null;}return u.incr(sa);});!sb[0]?r1.AppendI(r9):null;return r4.RegisterElement(r8,function(){return r9["HtmlProvider@33"].Remove(r9.get_Body());});};};sf=function(sg){var sh,si,sj;sh=_3.Get(sg);try{while(sh.MoveNext()){sj=sh.get_Current();r4.Remove(sj.Element.get_Id());}}finally{sh.Dispose!=undefined?sh.Dispose():null;}return si;};sk=$.New(b,{Element:r3,Label:{$:0}});return{Body:sk,SyncRoot:null,Insert:r5,Remove:sf};};return rX.New(rY);},VerticalAlignedTD:function(sl,sm){var sn,so,sp;sn=sl.$==1?"middle":sl.$==2?"bottom":"top";so=c.ofArray([sm]);sp=f.Tags().NewTag("td",so);sp["HtmlProvider@33"].SetCss(sp.get_Body(),"vertical-align",sn);return sp;},get_Flowlet:function(){var sq;sq=function(){var ss,st,su;ss=$.New(o,{$:0});st=f.Tags().NewTag("div",ss);su=function(){return function(sw){var sx,sy,sz,sA,sB;if(sw.Label.$==1){sy=sw.Label.$0.call(null,null);}else{sz=$.New(o,{$:0});sy=f.Tags().NewTag("span",sz);}sx=sy;sB=c.ofArray([sw.Element]);sA=y.InTable(c.ofArray([c.ofArray([sx,f.Tags().NewTag("div",sB)])]));st["HtmlProvider@33"].Clear(st.get_Body());st.AppendI(sA);return c.ofArray([sA]);};};return{Insert:su,Panel:st};};return this.MakeLayout(sq);},get_Horizontal:function(){return this.ColumnLayout(_0.get_Default());},get_Vertical:function(){return this.RowLayout(_0.get_Default());}},{New:function(sC){var sD;sD=$.New(this,{});sD.LayoutUtils=sC;return sD;}}),Utils:{InTable:function(sE){var sF,sL,sM,sN;sF=function(sG){var sH,sK;sH=function(sI){var sJ;sJ=c.ofArray([sI]);return f.Tags().NewTag("td",sJ);};sK=c.map(sH,sG);return f.Tags().NewTag("tr",sK);};sL=c.map(sF,sE);sM=f.Tags().NewTag("tbody",sL);sN=c.ofArray([sM]);return f.Tags().NewTag("table",sN);},MapOption:function(sO,sP){var sQ,sR;if(sP.$==1){sR=sP.$0;sQ={$:1,$0:sO(sR)};}else{sQ={$:0};}return sQ;},Maybe:function(sS,sT,sU){var sV,sW;if(sU.$==0){sV=sS;}else{sW=sU.$0;sV=sT(sW);}return sV;}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Body);c=$.Safe($$.WebSharper.List);d=$.Safe($$.WebSharper.Html);e=$.Safe(d.Client);f=$.Safe(e.Tags);g=$.Safe(a.Controls);h=$.Safe($$.IntelliFactory);i=$.Safe(h.Reactive);j=$.Safe(i.HotStream);k=$.Safe(h.Formlets);l=$.Safe(k.Base);m=$.Safe(l.Result);n=$.Safe(e.Attr);o=$.Safe(c.T);p=$.Safe(e.Operators);q=$.Safe($$.jQuery);r=$.Safe(e.EventsPervasives);s=$.Safe(a.Data);t=$.Safe(a.Formlet);u=$.Safe($$.WebSharper.Ref);v=$.Safe(a.CssConstants);w=$.Safe($$.Math);x=$.Safe($$.WebSharper.Seq);y=$.Safe(a.Utils);z=$.Safe(l.Tree);A=$.Safe(z.Edit);B=$.Safe(l.Form);C=$.Safe($$.WebSharper.Arrays);D=$.Safe(l.FormletProvider);E=$.Safe(s.Formlet);F=$.Safe(e.Pagelet);G=$.Safe($$.WebSharper.Util);H=$.Safe(a.LayoutProvider);I=$.Safe(l.LayoutUtils);J=$.Safe(i.Reactive);K=$.Safe(l.Validator);L=$.Safe(s.ValidatorProvidor);M=$.Safe($$.RegExp);N=$.Safe($$.WebSharper.Collections);O=$.Safe(N.Dictionary);P=$.Safe(a.ElementStore);Q=$.Safe(a.Enhance);R=$.Safe(Q.FormButtonConfiguration);S=$.Safe(Q.FormContainerConfiguration);T=$.Safe(Q.Padding);U=$.Safe(Q.ManyConfiguration);V=$.Safe(Q.ValidationFrameConfiguration);W=$.Safe(Q.ValidationIconConfiguration);X=$.Safe($$.JSON);Y=$.Safe(a.FormletBuilder);Z=$.Safe(a.Layout);_0=$.Safe(Z.FormRowConfiguration);_1=$.Safe(Z.LabelConfiguration);_2=$.Safe(Z.Padding);return _3=$.Safe($$.WebSharper.Enumerator);});$.OnLoad(function(){$.Inherit(E,F);t.Do();s.Validator();s.RX();s.Layout();s.DefaultLayout();v.InputTextClass();return;});}());
